<!DOCTYPE html>
<html>
<head>
<script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
</head>
<body>
<div id="vis" style="width: 400px; height: 300px;"></div>
<script>
const spec = {"$schema": "https://vega.github.io/schema/vega/v5.json", "width": 600, "height": 400, "signals": [{"name": "ox", "value": 300}, {"name": "oy", "value": 200}, {"name": "radius", "value": 150}, {"name": "ax", "expr": "ox - radius"}, {"name": "ay", "expr": "oy"}, {"name": "bx", "expr": "ox + radius"}, {"name": "by", "expr": "oy"}, {"name": "cAngleDeg", "value": 60}, {"name": "cAng", "expr": "cAngleDeg * PI / 180"}, {"name": "cxp", "expr": "ox + radius * cos(cAng)"}, {"name": "cyp", "expr": "oy - radius * sin(cAng)"}, {"name": "t_y2", "expr": "ay - radius - 60"}, {"name": "angleT", "expr": "-PI/2"}, {"name": "angleAC_fromA", "expr": "atan2(cyp - ay, cxp - ax)"}, {"name": "arcARadius", "value": 25}, {"name": "arcA_start", "expr": "angleT"}, {"name": "arcA_end", "expr": "angleAC_fromA"}, {"name": "arcA_mid", "expr": "(arcA_start + arcA_end)/2"}, {"name": "xLabelX", "expr": "ax + (arcARadius + 12) * cos(arcA_mid)"}, {"name": "xLabelY", "expr": "ay + (arcARadius + 12) * sin(arcA_mid)"}, {"name": "angleBA", "expr": "atan2(ay - by, ax - bx)"}, {"name": "angleBC", "expr": "atan2(cyp - by, cxp - bx)"}, {"name": "angleBC_norm", "expr": "angleBC < angleBA ? angleBC + 2*PI : angleBC"}, {"name": "arcBRadius", "value": 25}, {"name": "arcB_start", "expr": "angleBA"}, {"name": "arcB_end", "expr": "angleBC_norm"}, {"name": "arcB_mid", "expr": "(arcB_start + arcB_end)/2"}, {"name": "labelB_x", "expr": "bx + (arcBRadius + 12) * cos(arcB_mid)"}, {"name": "labelB_y", "expr": "by + (arcBRadius + 12) * sin(arcB_mid)"}, {"name": "tLabel_x", "expr": "ax - 14"}, {"name": "tLabel_y", "expr": "t_y2 - 10"}], "marks": [{"type": "arc", "encode": {"update": {"x": {"signal": "ox"}, "y": {"signal": "oy"}, "innerRadius": {"signal": "radius"}, "outerRadius": {"signal": "radius"}, "startAngle": {"value": 0}, "endAngle": {"value": 6.283185307179586}, "stroke": {"value": "black"}, "strokeWidth": {"value": 2}, "fillOpacity": {"value": 0}}}}, {"type": "rule", "encode": {"update": {"x": {"signal": "ax"}, "y": {"signal": "ay"}, "x2": {"signal": "bx"}, "y2": {"signal": "by"}, "stroke": {"value": "black"}, "strokeWidth": {"value": 1}}}}, {"type": "rule", "encode": {"update": {"x": {"signal": "ax"}, "y": {"signal": "ay"}, "x2": {"signal": "cxp"}, "y2": {"signal": "cyp"}, "stroke": {"value": "black"}, "strokeWidth": {"value": 1}}}}, {"type": "rule", "encode": {"update": {"x": {"signal": "bx"}, "y": {"signal": "by"}, "x2": {"signal": "cxp"}, "y2": {"signal": "cyp"}, "stroke": {"value": "black"}, "strokeWidth": {"value": 1}}}}, {"type": "rule", "encode": {"update": {"x": {"signal": "ax"}, "y": {"signal": "ay"}, "x2": {"signal": "ax"}, "y2": {"signal": "t_y2"}, "stroke": {"value": "black"}, "strokeWidth": {"value": 1}, "strokeDash": {"value": [4, 3]}}}}, {"type": "arc", "encode": {"update": {"x": {"signal": "ax"}, "y": {"signal": "ay"}, "innerRadius": {"signal": "arcARadius"}, "outerRadius": {"signal": "arcARadius"}, "startAngle": {"signal": "arcA_start"}, "endAngle": {"signal": "arcA_end"}, "stroke": {"value": "red"}, "strokeWidth": {"value": 2}, "fillOpacity": {"value": 0}}}}, {"type": "arc", "encode": {"update": {"x": {"signal": "bx"}, "y": {"signal": "by"}, "innerRadius": {"signal": "arcBRadius"}, "outerRadius": {"signal": "arcBRadius"}, "startAngle": {"signal": "arcB_start"}, "endAngle": {"signal": "arcB_end"}, "stroke": {"value": "red"}, "strokeWidth": {"value": 2}, "fillOpacity": {"value": 0}}}}, {"type": "symbol", "encode": {"update": {"x": {"signal": "ax"}, "y": {"signal": "ay"}, "size": {"value": 60}, "fill": {"value": "white"}, "stroke": {"value": "black"}}}}, {"type": "text", "encode": {"update": {"x": {"signal": "ax - 12"}, "y": {"signal": "ay + 15"}, "text": {"value": "A"}, "fontSize": {"value": 14}}}}, {"type": "symbol", "encode": {"update": {"x": {"signal": "bx"}, "y": {"signal": "by"}, "size": {"value": 60}, "fill": {"value": "white"}, "stroke": {"value": "black"}}}}, {"type": "text", "encode": {"update": {"x": {"signal": "bx + 8"}, "y": {"signal": "by + 15"}, "text": {"value": "B"}, "fontSize": {"value": 14}}}}, {"type": "symbol", "encode": {"update": {"x": {"signal": "cxp"}, "y": {"signal": "cyp"}, "size": {"value": 60}, "fill": {"value": "white"}, "stroke": {"value": "black"}}}}, {"type": "text", "encode": {"update": {"x": {"signal": "cxp + 8"}, "y": {"signal": "cyp - 10"}, "text": {"value": "C"}, "fontSize": {"value": 14}}}}, {"type": "symbol", "encode": {"update": {"x": {"signal": "ox"}, "y": {"signal": "oy"}, "size": {"value": 60}, "fill": {"value": "white"}, "stroke": {"value": "black"}}}}, {"type": "text", "encode": {"update": {"x": {"signal": "ox + 8"}, "y": {"signal": "oy - 8"}, "text": {"value": "O"}, "fontSize": {"value": 14}}}}, {"type": "text", "encode": {"update": {"x": {"signal": "xLabelX"}, "y": {"signal": "xLabelY"}, "text": {"value": "x"}, "fontSize": {"value": 14}, "fill": {"value": "red"}}}}, {"type": "text", "encode": {"update": {"x": {"signal": "labelB_x"}, "y": {"signal": "labelB_y"}, "text": {"value": "40\u00b0"}, "fontSize": {"value": 14}, "fill": {"value": "red"}}}}, {"type": "text", "encode": {"update": {"x": {"signal": "tLabel_x"}, "y": {"signal": "tLabel_y"}, "text": {"value": "t"}, "fontSize": {"value": 14}}}}]};
const view = new vega.View(vega.parse(spec)).renderer('canvas').initialize('#vis').runAsync();
</script>
</body>
</html>