{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 154, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\r\n\r\nconst globalForPrisma = globalThis as unknown as {\r\n  prisma: PrismaClient | undefined\r\n}\r\n\r\nexport const prisma = globalForPrisma.prisma ?? new PrismaClient()\r\n\r\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma\r\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SAAS,gBAAgB,MAAM,IAAI,IAAI,6HAAA,CAAA,eAAY;AAEhE,wCAA2C,gBAAgB,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/src/lib/auth.ts"],"sourcesContent":["import GoogleProvider from 'next-auth/providers/google'\r\nimport { PrismaAdapter } from '@auth/prisma-adapter'\r\nimport { prisma } from './prisma'\r\n\r\n// Check if we're running in a server environment (not in the browser)\r\n// This prevents validation code from running in client-side bundles\r\nconst isServer = typeof window === 'undefined';\r\n\r\n// Only validate environment variables on the server side\r\n// This prevents errors in client-side bundles where env vars are not available\r\nif (isServer) {\r\n  const isProduction = process.env.NODE_ENV === 'production';\r\n  const secret = process.env.NEXTAUTH_SECRET;\r\n  const nextAuthUrl = process.env.NEXTAUTH_URL;\r\n\r\n  // Debug logging to help diagnose environment variable loading issues\r\n  // Logs in two scenarios:\r\n  // 1. Development mode (always logs to help developers)\r\n  // 2. Production mode when secret or URL is missing (to help diagnose deployment issues)\r\n  // The actual secret value is never logged for security\r\n  if (!isProduction || !secret || !nextAuthUrl) {\r\n    console.log('[NextAuth Config] Environment check:', {\r\n      NODE_ENV: process.env.NODE_ENV,\r\n      NEXTAUTH_SECRET_present: !!secret,\r\n      NEXTAUTH_SECRET_length: secret?.length || 0,\r\n      NEXTAUTH_URL_present: !!nextAuthUrl,\r\n      NEXTAUTH_URL_length: nextAuthUrl?.length || 0,\r\n    });\r\n  }\r\n\r\n  // Fail-fast in production if NEXTAUTH_SECRET is not set\r\n  if (isProduction && !secret) {\r\n    const errorMessage = `NEXTAUTH_SECRET environment variable must be set in production.\r\nGenerate a secure secret with: openssl rand -base64 32\r\nFor Vercel deployments, ensure the variable is set in the Vercel dashboard under Project Settings > Environment Variables.\r\n⚠️ IMPORTANT: Variables must be set in the Vercel UI (Dashboard → Settings → Environment Variables), not just in .env files or build scripts.`;\r\n    \r\n    console.error('[NextAuth Config] FATAL:', errorMessage);\r\n    throw new Error(errorMessage);\r\n  }\r\n\r\n  // Fail-fast in production if NEXTAUTH_URL is not set\r\n  if (isProduction && !nextAuthUrl) {\r\n    const errorMessage = `NEXTAUTH_URL environment variable must be set in production.\r\nSet this to your application's canonical URL (e.g., https://yourdomain.vercel.app).\r\nFor Vercel deployments, ensure the variable is set in the Vercel dashboard under Project Settings > Environment Variables.\r\n⚠️ IMPORTANT: Variables must be set in the Vercel UI (Dashboard → Settings → Environment Variables), not just in .env files or build scripts.`;\r\n    \r\n    console.error('[NextAuth Config] FATAL:', errorMessage);\r\n    throw new Error(errorMessage);\r\n  }\r\n}\r\n\r\n// Helper to build providers list\r\nfunction getProviders() {\r\n  // If running in the browser, return empty array (should never be used)\r\n  // This prevents errors if the module is accidentally bundled into client code\r\n  if (!isServer) {\r\n    console.warn('[NextAuth Config] getProviders() called in browser context. This should not happen in normal operation.');\r\n    return [];\r\n  }\r\n  \r\n  const providers = [];\r\n  // Only configure Google provider if credentials are available\r\n  if (process.env.GOOGLE_CLIENT_ID && process.env.GOOGLE_CLIENT_SECRET) {\r\n    providers.push(\r\n      GoogleProvider({\r\n        clientId: process.env.GOOGLE_CLIENT_ID,\r\n        clientSecret: process.env.GOOGLE_CLIENT_SECRET,\r\n      })\r\n    );\r\n  }\r\n  return providers;\r\n}\r\n\r\n// Helper to get NextAuth secret - no fallback in production\r\nfunction getSecret() {\r\n  // If running in the browser, return a placeholder (should never be used)\r\n  // This prevents errors if the module is accidentally bundled into client code\r\n  if (!isServer) {\r\n    console.warn('[NextAuth Config] getSecret() called in browser context. This should not happen in normal operation.');\r\n    return 'client-side-placeholder-not-for-use';\r\n  }\r\n  \r\n  const secret = process.env.NEXTAUTH_SECRET;\r\n  const isProduction = process.env.NODE_ENV === 'production';\r\n  \r\n  // In production, secret must be set (validated server-side at module load)\r\n  if (secret) {\r\n    return secret;\r\n  }\r\n  \r\n  // Only use fallback in development\r\n  if (!isProduction) {\r\n    return 'development-secret-please-change-in-production';\r\n  }\r\n  \r\n  // This should never be reached due to module-load validation above,\r\n  // but included as a safety measure\r\n  throw new Error(`NEXTAUTH_SECRET environment variable must be set in production.\r\nGenerate a secure secret with: openssl rand -base64 32`);\r\n}\r\n\r\nexport const authOptions = {\r\n  adapter: PrismaAdapter(prisma),\r\n  providers: getProviders(),\r\n  session: {\r\n    strategy: 'database' as const,\r\n  },\r\n  pages: {\r\n    signIn: '/auth/signin',\r\n    error: '/auth/error',\r\n  },\r\n  callbacks: {\r\n    async session({ session, user }: any) {\r\n      if (session?.user) {\r\n        session.user.id = user.id\r\n      }\r\n      return session\r\n    },\r\n  },\r\n  secret: getSecret(),\r\n  debug: process.env.NODE_ENV === 'development',\r\n}\r\n\r\nexport { getProviders, getSecret }\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;AAEA,sEAAsE;AACtE,oEAAoE;AACpE,MAAM,WAAW,gBAAkB;AAEnC,yDAAyD;AACzD,+EAA+E;AAC/E,wCAAc;IACZ,MAAM,eAAe,oDAAyB;IAC9C,MAAM,SAAS,QAAQ,GAAG,CAAC,eAAe;IAC1C,MAAM,cAAc,QAAQ,GAAG,CAAC,YAAY;IAE5C,qEAAqE;IACrE,yBAAyB;IACzB,uDAAuD;IACvD,wFAAwF;IACxF,uDAAuD;IACvD,wCAA8C;QAC5C,QAAQ,GAAG,CAAC,wCAAwC;YAClD,QAAQ;YACR,yBAAyB,CAAC,CAAC;YAC3B,wBAAwB,QAAQ,UAAU;YAC1C,sBAAsB,CAAC,CAAC;YACxB,qBAAqB,aAAa,UAAU;QAC9C;IACF;IAEA,wDAAwD;IACxD;;IAUA,qDAAqD;IACrD;;AASF;AAEA,iCAAiC;AACjC,SAAS;IACP,uEAAuE;IACvE,8EAA8E;IAC9E;;IAKA,MAAM,YAAY,EAAE;IACpB,8DAA8D;IAC9D,IAAI,QAAQ,GAAG,CAAC,gBAAgB,IAAI,QAAQ,GAAG,CAAC,oBAAoB,EAAE;QACpE,UAAU,IAAI,CACZ,CAAA,GAAA,qJAAA,CAAA,UAAc,AAAD,EAAE;YACb,UAAU,QAAQ,GAAG,CAAC,gBAAgB;YACtC,cAAc,QAAQ,GAAG,CAAC,oBAAoB;QAChD;IAEJ;IACA,OAAO;AACT;AAEA,4DAA4D;AAC5D,SAAS;IACP,yEAAyE;IACzE,8EAA8E;IAC9E;;IAKA,MAAM,SAAS,QAAQ,GAAG,CAAC,eAAe;IAC1C,MAAM,eAAe,oDAAyB;IAE9C,2EAA2E;IAC3E,IAAI,QAAQ;QACV,OAAO;IACT;IAEA,mCAAmC;IACnC,wCAAmB;QACjB,OAAO;IACT;;;AAMF;AAEO,MAAM,cAAc;IACzB,SAAS,CAAA,GAAA,sJAAA,CAAA,gBAAa,AAAD,EAAE,sHAAA,CAAA,SAAM;IAC7B,WAAW;IACX,SAAS;QACP,UAAU;IACZ;IACA,OAAO;QACL,QAAQ;QACR,OAAO;IACT;IACA,WAAW;QACT,MAAM,SAAQ,EAAE,OAAO,EAAE,IAAI,EAAO;YAClC,IAAI,SAAS,MAAM;gBACjB,QAAQ,IAAI,CAAC,EAAE,GAAG,KAAK,EAAE;YAC3B;YACA,OAAO;QACT;IACF;IACA,QAAQ;IACR,OAAO,oDAAyB;AAClC","debugId":null}},
    {"offset": {"line": 268, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/src/app/api/auth/%5B...nextauth%5D/route.ts"],"sourcesContent":["import NextAuth from \"next-auth/next\"\r\nimport { PrismaAdapter } from '@auth/prisma-adapter'\r\nimport { prisma } from '@/lib/prisma'\r\nimport { getProviders, getSecret } from '@/lib/auth'\r\n\r\nconst handler = NextAuth({\r\n  adapter: PrismaAdapter(prisma),\r\n  providers: getProviders(),\r\n  session: {\r\n    strategy: 'database',\r\n  },\r\n  pages: {\r\n    signIn: '/auth/signin',\r\n    error: '/auth/error',\r\n  },\r\n  callbacks: {\r\n    async session({ session, user }) {\r\n      if (session?.user && user) {\r\n        (session.user as { id: string }).id = user.id\r\n      }\r\n      return session\r\n    },\r\n  },\r\n  secret: getSecret(),\r\n  debug: process.env.NODE_ENV === 'development',\r\n})\r\n\r\nexport { handler as GET, handler as POST }\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAEA,MAAM,UAAU,CAAA,GAAA,+IAAA,CAAA,UAAQ,AAAD,EAAE;IACvB,SAAS,CAAA,GAAA,sJAAA,CAAA,gBAAa,AAAD,EAAE,sHAAA,CAAA,SAAM;IAC7B,WAAW,CAAA,GAAA,oHAAA,CAAA,eAAY,AAAD;IACtB,SAAS;QACP,UAAU;IACZ;IACA,OAAO;QACL,QAAQ;QACR,OAAO;IACT;IACA,WAAW;QACT,MAAM,SAAQ,EAAE,OAAO,EAAE,IAAI,EAAE;YAC7B,IAAI,SAAS,QAAQ,MAAM;gBACxB,QAAQ,IAAI,CAAoB,EAAE,GAAG,KAAK,EAAE;YAC/C;YACA,OAAO;QACT;IACF;IACA,QAAQ,CAAA,GAAA,oHAAA,CAAA,YAAS,AAAD;IAChB,OAAO,oDAAyB;AAClC","debugId":null}}]
}