{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/vega-scenegraph/build/vega-scenegraph.js","sources":["file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/Gradient.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/path/curves.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/path/parse.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/util/constants.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/path/arc.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/path/render.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/path/symbols.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/path/rectangle.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/path/trail.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/path/shapes.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/util/svg/clip.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/Bounds.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/Item.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/GroupItem.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/ResourceLoader.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/bound/boundStroke.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/bound/boundContext.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/util/canvas/context.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/util/intersect.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/util/canvas/blend.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/util/value.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/util/canvas/gradient.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/util/canvas/color.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/util/canvas/fill.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/util/canvas/stroke.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/util/visit.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/util/canvas/draw.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/util/canvas/pick.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/util/svg/transform.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/marks/markItemPath.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/marks/arc.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/util/pickPath.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/marks/markMultiItemPath.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/marks/area.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/util/canvas/clip.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/marks/group.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/util/svg/metadata.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/marks/image.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/marks/line.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/marks/path.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/marks/rect.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/marks/rule.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/marks/shape.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/marks/symbol.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/util/text.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/marks/text.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/marks/trail.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/marks/index.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/bound/boundItem.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/bound/boundMark.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/util/serialize.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/Scenegraph.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/util/dom.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/util/point.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/util/resolveItem.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/Handler.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/Renderer.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/util/events.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/CanvasHandler.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/util/canvas/resize.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/CanvasRenderer.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/SVGHandler.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/util/aria.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/util/markup.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/util/svg/styles.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/SVGRenderer.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/SVGStringRenderer.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/HybridRenderer.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/HybridHandler.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/modules.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/intersect.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/bound/boundClip.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/src/util/equal.js","file:///C:/Users/lionv/DuckSAT/Migration/DuckSAT_CLEAN/node_modules/vega-scenegraph/index.js"],"sourcesContent":["let gradient_id = 0;\n\nexport function resetSVGGradientId() {\n  gradient_id = 0;\n}\n\nexport const patternPrefix = 'p_';\n\nexport function isGradient(value) {\n  return value && value.gradient;\n}\n\nexport function gradientRef(g, defs, base) {\n  const type = g.gradient;\n\n  let id = g.id,\n      prefix = type === 'radial' ? patternPrefix : '';\n\n  // check id, assign default values as needed\n  if (!id) {\n    id = g.id = 'gradient_' + (gradient_id++);\n    if (type === 'radial') {\n      g.x1 = get(g.x1, 0.5);\n      g.y1 = get(g.y1, 0.5);\n      g.r1 = get(g.r1, 0);\n      g.x2 = get(g.x2, 0.5);\n      g.y2 = get(g.y2, 0.5);\n      g.r2 = get(g.r2, 0.5);\n      prefix = patternPrefix;\n    } else {\n      g.x1 = get(g.x1, 0);\n      g.y1 = get(g.y1, 0);\n      g.x2 = get(g.x2, 1);\n      g.y2 = get(g.y2, 0);\n    }\n  }\n\n  // register definition\n  defs[id] = g;\n\n  // return url reference\n  return 'url(' + (base || '') + '#' + prefix + id + ')';\n}\n\nfunction get(val, def) {\n  return val != null ? val : def;\n}\n\nexport default function(p0, p1) {\n  var stops = [], gradient;\n  return gradient = {\n    gradient: 'linear',\n    x1: p0 ? p0[0] : 0,\n    y1: p0 ? p0[1] : 0,\n    x2: p1 ? p1[0] : 1,\n    y2: p1 ? p1[1] : 0,\n    stops: stops,\n    stop: function(offset, color) {\n      stops.push({offset: offset, color: color});\n      return gradient;\n    }\n  };\n}\n","import {hasOwnProperty} from 'vega-util';\n\nimport {\n  curveBasis,\n  curveBasisClosed,\n  curveBasisOpen,\n  curveBundle,\n  curveCardinal,\n  curveCardinalClosed,\n  curveCardinalOpen,\n  curveCatmullRom,\n  curveCatmullRomClosed,\n  curveCatmullRomOpen,\n  curveLinear,\n  curveLinearClosed,\n  curveMonotoneX,\n  curveMonotoneY,\n  curveNatural,\n  curveStep,\n  curveStepAfter,\n  curveStepBefore\n} from 'd3-shape';\n\nconst lookup = {\n  'basis': {\n    curve: curveBasis\n  },\n  'basis-closed': {\n    curve: curveBasisClosed\n  },\n  'basis-open': {\n    curve: curveBasisOpen\n  },\n  'bundle': {\n    curve: curveBundle,\n    tension: 'beta',\n    value: 0.85\n  },\n  'cardinal': {\n    curve: curveCardinal,\n    tension: 'tension',\n    value: 0\n  },\n  'cardinal-open': {\n    curve: curveCardinalOpen,\n    tension: 'tension',\n    value: 0\n  },\n  'cardinal-closed': {\n    curve: curveCardinalClosed,\n    tension: 'tension',\n    value: 0\n  },\n  'catmull-rom': {\n    curve: curveCatmullRom,\n    tension: 'alpha',\n    value: 0.5\n  },\n  'catmull-rom-closed': {\n    curve: curveCatmullRomClosed,\n    tension: 'alpha',\n    value: 0.5\n  },\n  'catmull-rom-open': {\n    curve: curveCatmullRomOpen,\n    tension: 'alpha',\n    value: 0.5\n  },\n  'linear': {\n    curve: curveLinear\n  },\n  'linear-closed': {\n    curve: curveLinearClosed\n  },\n  'monotone': {\n    horizontal: curveMonotoneY,\n    vertical:   curveMonotoneX\n  },\n  'natural': {\n    curve: curveNatural\n  },\n  'step': {\n    curve: curveStep\n  },\n  'step-after': {\n    curve: curveStepAfter\n  },\n  'step-before': {\n    curve: curveStepBefore\n  }\n};\n\nexport default function curves(type, orientation, tension) {\n  var entry = hasOwnProperty(lookup, type) && lookup[type],\n      curve = null;\n\n  if (entry) {\n    curve = entry.curve || entry[orientation || 'vertical'];\n    if (entry.tension && tension != null) {\n      curve = curve[entry.tension](tension);\n    }\n  }\n\n  return curve;\n}\n","const paramCounts = { m:2, l:2, h:1, v:1, z:0, c:6, s:4, q:4, t:2, a:7 };\nconst commandPattern = /[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi;\nconst numberPattern = /^[+-]?(([0-9]*\\.[0-9]+)|([0-9]+\\.)|([0-9]+))([eE][+-]?[0-9]+)?/;\nconst spacePattern = /^((\\s+,?\\s*)|(,\\s*))/;\nconst flagPattern = /^[01]/;\n\nexport default function parse(path) {\n  const commands = [];\n  const matches = path.match(commandPattern) || [];\n\n  matches.forEach(str => {\n    let cmd = str[0];\n    const type = cmd.toLowerCase();\n\n    // parse parameters\n    const paramCount = paramCounts[type];\n    const params = parseParams(type, paramCount, str.slice(1).trim());\n    const count = params.length;\n\n    // error checking based on parameter count\n    if (count < paramCount || (count && count % paramCount !== 0)) {\n      throw Error('Invalid SVG path, incorrect parameter count');\n    }\n\n    // register the command\n    commands.push([cmd, ...params.slice(0, paramCount)]);\n\n    // exit now if we're done, also handles zero-param 'z'\n    if (count === paramCount) {\n      return;\n    }\n\n    // handle implicit line-to\n    if (type === 'm') {\n      cmd = (cmd === 'M') ? 'L' : 'l';\n    }\n\n    // repeat command when given extended param list\n    for (let i = paramCount; i < count; i += paramCount) {\n      commands.push([cmd, ...params.slice(i, i + paramCount)]);\n    }\n  });\n\n  return commands;\n}\n\nfunction parseParams(type, paramCount, segment) {\n  const params = [];\n\n  for (let index = 0; paramCount && index < segment.length; ) {\n    for (let i = 0; i < paramCount; ++i) {\n      const pattern = type === 'a' && (i === 3 || i === 4) ? flagPattern : numberPattern;\n      const match = segment.slice(index).match(pattern);\n\n      if (match === null) {\n        throw Error('Invalid SVG path, incorrect parameter type');\n      }\n\n      index += match[0].length;\n      params.push(+match[0]);\n\n      const ws = segment.slice(index).match(spacePattern);\n      if (ws !== null) {\n        index += ws[0].length;\n      }\n    }\n  }\n\n  return params;\n}\n","export const DegToRad = Math.PI / 180;\nexport const Epsilon = 1e-14;\nexport const HalfPi = Math.PI / 2;\nexport const Tau = Math.PI * 2;\nexport const HalfSqrt3 = Math.sqrt(3) / 2;\n","import {DegToRad, HalfPi, Tau} from '../util/constants.js';\n\nexport var segmentCache = {};\nexport var bezierCache = {};\n\nvar join = [].join;\n\n// Copied from Inkscape svgtopdf, thanks!\nexport function segments(x, y, rx, ry, large, sweep, rotateX, ox, oy) {\n  const key = join.call(arguments);\n  if (segmentCache[key]) {\n    return segmentCache[key];\n  }\n\n  const th = rotateX * DegToRad;\n  const sin_th = Math.sin(th);\n  const cos_th = Math.cos(th);\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n  const px = cos_th * (ox - x) * 0.5 + sin_th * (oy - y) * 0.5;\n  const py = cos_th * (oy - y) * 0.5 - sin_th * (ox - x) * 0.5;\n  let pl = (px*px) / (rx*rx) + (py*py) / (ry*ry);\n  if (pl > 1) {\n    pl = Math.sqrt(pl);\n    rx *= pl;\n    ry *= pl;\n  }\n\n  const a00 = cos_th / rx;\n  const a01 = sin_th / rx;\n  const a10 = (-sin_th) / ry;\n  const a11 = (cos_th) / ry;\n  const x0 = a00 * ox + a01 * oy;\n  const y0 = a10 * ox + a11 * oy;\n  const x1 = a00 * x + a01 * y;\n  const y1 = a10 * x + a11 * y;\n\n  const d = (x1-x0) * (x1-x0) + (y1-y0) * (y1-y0);\n  let sfactor_sq = 1 / d - 0.25;\n  if (sfactor_sq < 0) sfactor_sq = 0;\n  let sfactor = Math.sqrt(sfactor_sq);\n  if (sweep == large) sfactor = -sfactor;\n  const xc = 0.5 * (x0 + x1) - sfactor * (y1-y0);\n  const yc = 0.5 * (y0 + y1) + sfactor * (x1-x0);\n\n  const th0 = Math.atan2(y0-yc, x0-xc);\n  const th1 = Math.atan2(y1-yc, x1-xc);\n\n  let th_arc = th1-th0;\n  if (th_arc < 0 && sweep === 1) {\n    th_arc += Tau;\n  } else if (th_arc > 0 && sweep === 0) {\n    th_arc -= Tau;\n  }\n\n  const segs = Math.ceil(Math.abs(th_arc / (HalfPi + 0.001)));\n  const result = [];\n  for (let i=0; i<segs; ++i) {\n    const th2 = th0 + i * th_arc / segs;\n    const th3 = th0 + (i+1) * th_arc / segs;\n    result[i] = [xc, yc, th2, th3, rx, ry, sin_th, cos_th];\n  }\n\n  return (segmentCache[key] = result);\n}\n\nexport function bezier(params) {\n  const key = join.call(params);\n  if (bezierCache[key]) {\n    return bezierCache[key];\n  }\n\n  var cx = params[0],\n      cy = params[1],\n      th0 = params[2],\n      th1 = params[3],\n      rx = params[4],\n      ry = params[5],\n      sin_th = params[6],\n      cos_th = params[7];\n\n  const a00 = cos_th * rx;\n  const a01 = -sin_th * ry;\n  const a10 = sin_th * rx;\n  const a11 = cos_th * ry;\n\n  const cos_th0 = Math.cos(th0);\n  const sin_th0 = Math.sin(th0);\n  const cos_th1 = Math.cos(th1);\n  const sin_th1 = Math.sin(th1);\n\n  const th_half = 0.5 * (th1 - th0);\n  const sin_th_h2 = Math.sin(th_half * 0.5);\n  const t = (8/3) * sin_th_h2 * sin_th_h2 / Math.sin(th_half);\n  const x1 = cx + cos_th0 - t * sin_th0;\n  const y1 = cy + sin_th0 + t * cos_th0;\n  const x3 = cx + cos_th1;\n  const y3 = cy + sin_th1;\n  const x2 = x3 + t * sin_th1;\n  const y2 = y3 - t * cos_th1;\n\n  return (bezierCache[key] = [\n    a00 * x1 + a01 * y1,  a10 * x1 + a11 * y1,\n    a00 * x2 + a01 * y2,  a10 * x2 + a11 * y2,\n    a00 * x3 + a01 * y3,  a10 * x3 + a11 * y3\n  ]);\n}\n","import {bezier, segments} from './arc.js';\n\nconst temp = ['l', 0, 0, 0, 0, 0, 0, 0];\n\nfunction scale(current, sX, sY) {\n  const c = (temp[0] = current[0]);\n  if (c === 'a' || c === 'A') {\n    temp[1] = sX * current[1];\n    temp[2] = sY * current[2];\n    temp[3] = current[3];\n    temp[4] = current[4];\n    temp[5] = current[5];\n    temp[6] = sX * current[6];\n    temp[7] = sY * current[7];\n  } else if (c === 'h' || c === 'H') {\n    temp[1] = sX * current[1];\n  } else if (c === 'v' || c === 'V') {\n    temp[1] = sY * current[1];\n  } else {\n    for (var i=1, n=current.length; i<n; ++i) {\n      temp[i] = (i % 2 == 1 ? sX : sY) * current[i];\n    }\n  }\n  return temp;\n}\n\nexport default function(context, path, l, t, sX, sY) {\n  var current, // current instruction\n      previous = null,\n      x = 0, // current x\n      y = 0, // current y\n      controlX = 0, // current control point x\n      controlY = 0, // current control point y\n      tempX,\n      tempY,\n      tempControlX,\n      tempControlY,\n      anchorX = 0,\n      anchorY = 0;\n\n  if (l == null) l = 0;\n  if (t == null) t = 0;\n  if (sX == null) sX = 1;\n  if (sY == null) sY = sX;\n\n  if (context.beginPath) context.beginPath();\n\n  for (var i=0, len=path.length; i<len; ++i) {\n    current = path[i];\n    if (sX !== 1 || sY !== 1) {\n      current = scale(current, sX, sY);\n    }\n\n    switch (current[0]) { // first letter\n\n      case 'l': // lineto, relative\n        x += current[1];\n        y += current[2];\n        context.lineTo(x + l, y + t);\n        break;\n\n      case 'L': // lineto, absolute\n        x = current[1];\n        y = current[2];\n        context.lineTo(x + l, y + t);\n        break;\n\n      case 'h': // horizontal lineto, relative\n        x += current[1];\n        context.lineTo(x + l, y + t);\n        break;\n\n      case 'H': // horizontal lineto, absolute\n        x = current[1];\n        context.lineTo(x + l, y + t);\n        break;\n\n      case 'v': // vertical lineto, relative\n        y += current[1];\n        context.lineTo(x + l, y + t);\n        break;\n\n      case 'V': // verical lineto, absolute\n        y = current[1];\n        context.lineTo(x + l, y + t);\n        break;\n\n      case 'm': // moveTo, relative\n        x += current[1];\n        y += current[2];\n        anchorX = x;\n        anchorY = y;\n        context.moveTo(x + l, y + t);\n        break;\n\n      case 'M': // moveTo, absolute\n        x = current[1];\n        y = current[2];\n        anchorX = x;\n        anchorY = y;\n        context.moveTo(x + l, y + t);\n        break;\n\n      case 'c': // bezierCurveTo, relative\n        tempX = x + current[5];\n        tempY = y + current[6];\n        controlX = x + current[3];\n        controlY = y + current[4];\n        context.bezierCurveTo(\n          x + current[1] + l, // x1\n          y + current[2] + t, // y1\n          controlX + l, // x2\n          controlY + t, // y2\n          tempX + l,\n          tempY + t\n        );\n        x = tempX;\n        y = tempY;\n        break;\n\n      case 'C': // bezierCurveTo, absolute\n        x = current[5];\n        y = current[6];\n        controlX = current[3];\n        controlY = current[4];\n        context.bezierCurveTo(\n          current[1] + l,\n          current[2] + t,\n          controlX + l,\n          controlY + t,\n          x + l,\n          y + t\n        );\n        break;\n\n      case 's': // shorthand cubic bezierCurveTo, relative\n        // transform to absolute x,y\n        tempX = x + current[3];\n        tempY = y + current[4];\n        // calculate reflection of previous control points\n        controlX = 2 * x - controlX;\n        controlY = 2 * y - controlY;\n        context.bezierCurveTo(\n          controlX + l,\n          controlY + t,\n          x + current[1] + l,\n          y + current[2] + t,\n          tempX + l,\n          tempY + t\n        );\n\n        // set control point to 2nd one of this command\n        // the first control point is assumed to be the reflection of\n        // the second control point on the previous command relative\n        // to the current point.\n        controlX = x + current[1];\n        controlY = y + current[2];\n\n        x = tempX;\n        y = tempY;\n        break;\n\n      case 'S': // shorthand cubic bezierCurveTo, absolute\n        tempX = current[3];\n        tempY = current[4];\n        // calculate reflection of previous control points\n        controlX = 2*x - controlX;\n        controlY = 2*y - controlY;\n        context.bezierCurveTo(\n          controlX + l,\n          controlY + t,\n          current[1] + l,\n          current[2] + t,\n          tempX + l,\n          tempY + t\n        );\n        x = tempX;\n        y = tempY;\n        // set control point to 2nd one of this command\n        // the first control point is assumed to be the reflection of\n        // the second control point on the previous command relative\n        // to the current point.\n        controlX = current[1];\n        controlY = current[2];\n\n        break;\n\n      case 'q': // quadraticCurveTo, relative\n        // transform to absolute x,y\n        tempX = x + current[3];\n        tempY = y + current[4];\n\n        controlX = x + current[1];\n        controlY = y + current[2];\n\n        context.quadraticCurveTo(\n          controlX + l,\n          controlY + t,\n          tempX + l,\n          tempY + t\n        );\n        x = tempX;\n        y = tempY;\n        break;\n\n      case 'Q': // quadraticCurveTo, absolute\n        tempX = current[3];\n        tempY = current[4];\n\n        context.quadraticCurveTo(\n          current[1] + l,\n          current[2] + t,\n          tempX + l,\n          tempY + t\n        );\n        x = tempX;\n        y = tempY;\n        controlX = current[1];\n        controlY = current[2];\n        break;\n\n      case 't': // shorthand quadraticCurveTo, relative\n\n        // transform to absolute x,y\n        tempX = x + current[1];\n        tempY = y + current[2];\n\n        if (previous[0].match(/[QqTt]/) === null) {\n          // If there is no previous command or if the previous command was not a Q, q, T or t,\n          // assume the control point is coincident with the current point\n          controlX = x;\n          controlY = y;\n        }\n        else if (previous[0] === 't') {\n          // calculate reflection of previous control points for t\n          controlX = 2 * x - tempControlX;\n          controlY = 2 * y - tempControlY;\n        }\n        else if (previous[0] === 'q') {\n          // calculate reflection of previous control points for q\n          controlX = 2 * x - controlX;\n          controlY = 2 * y - controlY;\n        }\n\n        tempControlX = controlX;\n        tempControlY = controlY;\n\n        context.quadraticCurveTo(\n          controlX + l,\n          controlY + t,\n          tempX + l,\n          tempY + t\n        );\n        x = tempX;\n        y = tempY;\n        controlX = x + current[1];\n        controlY = y + current[2];\n        break;\n\n      case 'T':\n        tempX = current[1];\n        tempY = current[2];\n\n        // calculate reflection of previous control points\n        controlX = 2 * x - controlX;\n        controlY = 2 * y - controlY;\n        context.quadraticCurveTo(\n          controlX + l,\n          controlY + t,\n          tempX + l,\n          tempY + t\n        );\n        x = tempX;\n        y = tempY;\n        break;\n\n      case 'a':\n        drawArc(context, x + l, y + t, [\n          current[1],\n          current[2],\n          current[3],\n          current[4],\n          current[5],\n          current[6] + x + l,\n          current[7] + y + t\n        ]);\n        x += current[6];\n        y += current[7];\n        break;\n\n      case 'A':\n        drawArc(context, x + l, y + t, [\n          current[1],\n          current[2],\n          current[3],\n          current[4],\n          current[5],\n          current[6] + l,\n          current[7] + t\n        ]);\n        x = current[6];\n        y = current[7];\n        break;\n\n      case 'z':\n      case 'Z':\n        x = anchorX;\n        y = anchorY;\n        context.closePath();\n        break;\n    }\n    previous = current;\n  }\n}\n\nfunction drawArc(context, x, y, coords) {\n  const seg = segments(\n    coords[5], // end x\n    coords[6], // end y\n    coords[0], // radius x\n    coords[1], // radius y\n    coords[3], // large flag\n    coords[4], // sweep flag\n    coords[2], // rotation\n    x, y\n  );\n  for (let i=0; i<seg.length; ++i) {\n    const bez = bezier(seg[i]);\n    context.bezierCurveTo(bez[0], bez[1], bez[2], bez[3], bez[4], bez[5]);\n  }\n}\n","import pathParse from './parse.js';\nimport pathRender from './render.js';\nimport {HalfSqrt3, Tau} from '../util/constants.js';\nimport {hasOwnProperty} from 'vega-util';\n\nconst Tan30 = 0.5773502691896257;\n\nconst builtins = {\n  'circle': {\n    draw: function(context, size) {\n      const r = Math.sqrt(size) / 2;\n      context.moveTo(r, 0);\n      context.arc(0, 0, r, 0, Tau);\n    }\n  },\n  'cross': {\n    draw: function(context, size) {\n      var r = Math.sqrt(size) / 2,\n          s = r / 2.5;\n      context.moveTo(-r, -s);\n      context.lineTo(-r, s);\n      context.lineTo(-s, s);\n      context.lineTo(-s, r);\n      context.lineTo(s, r);\n      context.lineTo(s, s);\n      context.lineTo(r, s);\n      context.lineTo(r, -s);\n      context.lineTo(s, -s);\n      context.lineTo(s, -r);\n      context.lineTo(-s, -r);\n      context.lineTo(-s, -s);\n      context.closePath();\n    }\n  },\n  'diamond': {\n    draw: function(context, size) {\n      const r = Math.sqrt(size) / 2;\n      context.moveTo(-r, 0);\n      context.lineTo(0, -r);\n      context.lineTo(r, 0);\n      context.lineTo(0, r);\n      context.closePath();\n    }\n  },\n  'square': {\n    draw: function(context, size) {\n      var w = Math.sqrt(size),\n          x = -w / 2;\n      context.rect(x, x, w, w);\n    }\n  },\n  'arrow': {\n    draw: function(context, size) {\n      var r = Math.sqrt(size) / 2,\n          s = r / 7,\n          t = r / 2.5,\n          v = r / 8;\n      context.moveTo(-s, r);\n      context.lineTo(s, r);\n      context.lineTo(s, -v);\n      context.lineTo(t, -v);\n      context.lineTo(0, -r);\n      context.lineTo(-t, -v);\n      context.lineTo(-s, -v);\n      context.closePath();\n    }\n  },\n  'wedge': {\n    draw: function(context, size) {\n      var r = Math.sqrt(size) / 2,\n          h = HalfSqrt3 * r,\n          o = (h - r * Tan30),\n          b = r / 4;\n      context.moveTo(0, -h - o);\n      context.lineTo(-b, h - o);\n      context.lineTo(b, h - o);\n      context.closePath();\n    }\n  },\n  'triangle': {\n    draw: function(context, size) {\n      var r = Math.sqrt(size) / 2,\n          h = HalfSqrt3 * r,\n          o = (h - r * Tan30);\n      context.moveTo(0, -h - o);\n      context.lineTo(-r, h - o);\n      context.lineTo(r, h - o);\n      context.closePath();\n    }\n  },\n  'triangle-up': {\n    draw: function(context, size) {\n      var r = Math.sqrt(size) / 2,\n          h = HalfSqrt3 * r;\n      context.moveTo(0, -h);\n      context.lineTo(-r, h);\n      context.lineTo(r, h);\n      context.closePath();\n    }\n  },\n  'triangle-down': {\n    draw: function(context, size) {\n      var r = Math.sqrt(size) / 2,\n          h = HalfSqrt3 * r;\n      context.moveTo(0, h);\n      context.lineTo(-r, -h);\n      context.lineTo(r, -h);\n      context.closePath();\n    }\n  },\n  'triangle-right': {\n    draw: function(context, size) {\n      var r = Math.sqrt(size) / 2,\n          h = HalfSqrt3 * r;\n      context.moveTo(h, 0);\n      context.lineTo(-h, -r);\n      context.lineTo(-h, r);\n      context.closePath();\n    }\n  },\n  'triangle-left': {\n    draw: function(context, size) {\n      var r = Math.sqrt(size) / 2,\n          h = HalfSqrt3 * r;\n      context.moveTo(-h, 0);\n      context.lineTo(h, -r);\n      context.lineTo(h, r);\n      context.closePath();\n    }\n  },\n  'stroke': {\n    draw: function(context, size) {\n      const r = Math.sqrt(size) / 2;\n      context.moveTo(-r, 0);\n      context.lineTo(r, 0);\n    }\n  }\n};\n\nexport default function symbols(_) {\n  return hasOwnProperty(builtins, _) ? builtins[_] : customSymbol(_);\n}\n\nvar custom = {};\n\nfunction customSymbol(path) {\n  if (!hasOwnProperty(custom, path)) {\n    const parsed = pathParse(path);\n    custom[path] = {\n      draw: function(context, size) {\n        pathRender(context, parsed, 0, 0, Math.sqrt(size) / 2);\n      }\n    };\n  }\n  return custom[path];\n}\n","import {path} from 'd3-path';\n\n// See http://spencermortensen.com/articles/bezier-circle/\nconst C = 0.448084975506; // C = 1 - c\n\nfunction rectangleX(d) {\n  return d.x;\n}\n\nfunction rectangleY(d) {\n  return d.y;\n}\n\nfunction rectangleWidth(d) {\n  return d.width;\n}\n\nfunction rectangleHeight(d) {\n  return d.height;\n}\n\nfunction number(_) {\n  return typeof _ === 'function' ? _ : () => +_;\n}\n\nfunction clamp(value, min, max) {\n  return Math.max(min, Math.min(value, max));\n}\n\nexport default function() {\n  var x = rectangleX,\n      y = rectangleY,\n      width = rectangleWidth,\n      height = rectangleHeight,\n      crTL = number(0),\n      crTR = crTL,\n      crBL = crTL,\n      crBR = crTL,\n      context = null;\n\n  function rectangle(_, x0, y0) {\n    var buffer,\n        x1 = x0 != null ? x0 : +x.call(this, _),\n        y1 = y0 != null ? y0 : +y.call(this, _),\n        w  = +width.call(this, _),\n        h  = +height.call(this, _),\n        s  = Math.min(w, h) / 2,\n        tl = clamp(+crTL.call(this, _), 0, s),\n        tr = clamp(+crTR.call(this, _), 0, s),\n        bl = clamp(+crBL.call(this, _), 0, s),\n        br = clamp(+crBR.call(this, _), 0, s);\n\n    if (!context) context = buffer = path();\n\n    if (tl <= 0 && tr <= 0 && bl <= 0 && br <= 0) {\n      context.rect(x1, y1, w, h);\n    } else {\n      var x2 = x1 + w,\n          y2 = y1 + h;\n      context.moveTo(x1 + tl, y1);\n      context.lineTo(x2 - tr, y1);\n      context.bezierCurveTo(x2 - C * tr, y1, x2, y1 + C * tr, x2, y1 + tr);\n      context.lineTo(x2, y2 - br);\n      context.bezierCurveTo(x2, y2 - C * br, x2 - C * br, y2, x2 - br, y2);\n      context.lineTo(x1 + bl, y2);\n      context.bezierCurveTo(x1 + C * bl, y2, x1, y2 - C * bl, x1, y2 - bl);\n      context.lineTo(x1, y1 + tl);\n      context.bezierCurveTo(x1, y1 + C * tl, x1 + C * tl, y1, x1 + tl, y1);\n      context.closePath();\n    }\n\n    if (buffer) {\n      context = null;\n      return buffer + '' || null;\n    }\n  }\n\n  rectangle.x = function(_) {\n    if (arguments.length) {\n      x = number(_);\n      return rectangle;\n    } else {\n      return x;\n    }\n  };\n\n  rectangle.y = function(_) {\n    if (arguments.length) {\n      y = number(_);\n      return rectangle;\n    } else {\n      return y;\n    }\n  };\n\n  rectangle.width = function(_) {\n    if (arguments.length) {\n      width = number(_);\n      return rectangle;\n    } else {\n      return width;\n    }\n  };\n\n  rectangle.height = function(_) {\n    if (arguments.length) {\n      height = number(_);\n      return rectangle;\n    } else {\n      return height;\n    }\n  };\n\n  rectangle.cornerRadius = function(tl, tr, br, bl) {\n    if (arguments.length) {\n      crTL = number(tl);\n      crTR = tr != null ? number(tr) : crTL;\n      crBR = br != null ? number(br) : crTL;\n      crBL = bl != null ? number(bl) : crTR;\n      return rectangle;\n    } else {\n      return crTL;\n    }\n  };\n\n  rectangle.context = function(_) {\n    if (arguments.length) {\n      context = _ == null ? null : _;\n      return rectangle;\n    } else {\n      return context;\n    }\n  };\n\n  return rectangle;\n}\n","import {Tau} from '../util/constants.js';\nimport {path} from 'd3-path';\n\nexport default function() {\n  var x,\n      y,\n      size,\n      defined,\n      context = null,\n      ready, x1, y1, r1;\n\n  function point(x2, y2, w2) {\n    const r2 = w2 / 2;\n\n    if (ready) {\n      var ux = y1 - y2,\n          uy = x2 - x1;\n\n      if (ux || uy) {\n        // get normal vector\n        var ud = Math.hypot(ux, uy),\n            rx = (ux /= ud) * r1,\n            ry = (uy /= ud) * r1,\n            t = Math.atan2(uy, ux);\n\n        // draw segment\n        context.moveTo(x1 - rx, y1 - ry);\n        context.lineTo(x2 - ux * r2, y2 - uy * r2);\n        context.arc(x2, y2, r2, t - Math.PI, t);\n        context.lineTo(x1 + rx, y1 + ry);\n        context.arc(x1, y1, r1, t, t + Math.PI);\n      } else {\n        context.arc(x2, y2, r2, 0, Tau);\n      }\n      context.closePath();\n    } else {\n      ready = 1;\n    }\n    x1 = x2;\n    y1 = y2;\n    r1 = r2;\n  }\n\n  function trail(data) {\n    var i,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) context = buffer = path();\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) ready = 0;\n      }\n      if (defined0) point(+x(d, i, data), +y(d, i, data), +size(d, i, data));\n    }\n\n    if (buffer) {\n      context = null;\n      return buffer + '' || null;\n    }\n  }\n\n  trail.x = function(_) {\n    if (arguments.length) {\n      x = _;\n      return trail;\n    } else {\n      return x;\n    }\n  };\n\n  trail.y = function(_) {\n    if (arguments.length) {\n      y = _;\n      return trail;\n    } else {\n      return y;\n    }\n  };\n\n  trail.size = function(_) {\n    if (arguments.length) {\n      size = _;\n      return trail;\n    } else {\n      return size;\n    }\n  };\n\n  trail.defined = function(_) {\n    if (arguments.length) {\n      defined = _;\n      return trail;\n    } else {\n      return defined;\n    }\n  };\n\n  trail.context = function(_) {\n    if (arguments.length) {\n      if (_ == null) {\n        context = null;\n      } else {\n        context = _;\n      }\n      return trail;\n    } else {\n      return context;\n    }\n  };\n\n  return trail;\n}\n","import curves from './curves.js';\nimport symbols from './symbols.js';\n\nimport {default as vg_rect} from './rectangle.js';\nimport {default as vg_trail} from './trail.js';\n\nimport {\n  arc as d3_arc,\n  area as d3_area,\n  line as d3_line,\n  symbol as d3_symbol\n} from 'd3-shape';\n\nfunction value(a, b) {\n  return a != null ? a : b;\n}\n\nconst x =  item => item.x || 0,\n      y =  item => item.y || 0,\n      w =  item => item.width || 0,\n      h =  item => item.height || 0,\n      xw = item => (item.x || 0) + (item.width || 0),\n      yh = item => (item.y || 0) + (item.height || 0),\n      sa = item => item.startAngle || 0,\n      ea = item => item.endAngle || 0,\n      pa = item => item.padAngle || 0,\n      ir = item => item.innerRadius || 0,\n      or = item => item.outerRadius || 0,\n      cr = item => item.cornerRadius || 0,\n      tl = item => value(item.cornerRadiusTopLeft, item.cornerRadius) || 0,\n      tr = item => value(item.cornerRadiusTopRight, item.cornerRadius) || 0,\n      br = item => value(item.cornerRadiusBottomRight, item.cornerRadius) || 0,\n      bl = item => value(item.cornerRadiusBottomLeft, item.cornerRadius) || 0,\n      sz = item => value(item.size, 64),\n      ts = item => item.size || 1,\n      def = item => !(item.defined === false),\n      type = item => symbols(item.shape || 'circle');\n\nconst arcShape    = d3_arc().startAngle(sa).endAngle(ea).padAngle(pa)\n                      .innerRadius(ir).outerRadius(or).cornerRadius(cr),\n      areavShape  = d3_area().x(x).y1(y).y0(yh).defined(def),\n      areahShape  = d3_area().y(y).x1(x).x0(xw).defined(def),\n      lineShape   = d3_line().x(x).y(y).defined(def),\n      rectShape   = vg_rect().x(x).y(y).width(w).height(h)\n                      .cornerRadius(tl, tr, br, bl),\n      symbolShape = d3_symbol().type(type).size(sz),\n      trailShape  = vg_trail().x(x).y(y).defined(def).size(ts);\n\nexport function hasCornerRadius(item) {\n  return item.cornerRadius\n    || item.cornerRadiusTopLeft\n    || item.cornerRadiusTopRight\n    || item.cornerRadiusBottomRight\n    || item.cornerRadiusBottomLeft;\n}\n\nexport function arc(context, item) {\n  return arcShape.context(context)(item);\n}\n\nexport function area(context, items) {\n  const item = items[0],\n        interp = item.interpolate || 'linear';\n  return (item.orient === 'horizontal' ? areahShape : areavShape)\n    .curve(curves(interp, item.orient, item.tension))\n    .context(context)(items);\n}\n\nexport function line(context, items) {\n  const item = items[0],\n        interp = item.interpolate || 'linear';\n  return lineShape.curve(curves(interp, item.orient, item.tension))\n    .context(context)(items);\n}\n\nexport function rectangle(context, item, x, y) {\n  return rectShape.context(context)(item, x, y);\n}\n\nexport function shape(context, item) {\n  return (item.mark.shape || item.shape)\n    .context(context)(item);\n}\n\nexport function symbol(context, item) {\n  return symbolShape.context(context)(item);\n}\n\nexport function trail(context, items) {\n  return trailShape.context(context)(items);\n}\n","import {hasCornerRadius, rectangle} from '../../path/shapes.js';\nimport {isFunction} from 'vega-util';\n\nvar clip_id = 1;\n\nexport function resetSVGClipId() {\n  clip_id = 1;\n}\n\nexport default function(renderer, item, size) {\n  var clip = item.clip,\n      defs = renderer._defs,\n      id = item.clip_id || (item.clip_id = 'clip' + clip_id++),\n      c = defs.clipping[id] || (defs.clipping[id] = {id: id});\n\n  if (isFunction(clip)) {\n    c.path = clip(null);\n  } else if (hasCornerRadius(size)) {\n    c.path = rectangle(null, size, 0, 0);\n  } else {\n    c.width = size.width || 0;\n    c.height = size.height || 0;\n  }\n\n  return 'url(#' + id + ')';\n}\n","export default function Bounds(b) {\n  this.clear();\n  if (b) this.union(b);\n}\n\nBounds.prototype = {\n  clone() {\n    return new Bounds(this);\n  },\n\n  clear() {\n    this.x1 = +Number.MAX_VALUE;\n    this.y1 = +Number.MAX_VALUE;\n    this.x2 = -Number.MAX_VALUE;\n    this.y2 = -Number.MAX_VALUE;\n    return this;\n  },\n\n  empty() {\n    return (\n      this.x1 === +Number.MAX_VALUE &&\n      this.y1 === +Number.MAX_VALUE &&\n      this.x2 === -Number.MAX_VALUE &&\n      this.y2 === -Number.MAX_VALUE\n    );\n  },\n\n  equals(b) {\n    return (\n      this.x1 === b.x1 &&\n      this.y1 === b.y1 &&\n      this.x2 === b.x2 &&\n      this.y2 === b.y2\n    );\n  },\n\n  set(x1, y1, x2, y2) {\n    if (x2 < x1) {\n      this.x2 = x1;\n      this.x1 = x2;\n    } else {\n      this.x1 = x1;\n      this.x2 = x2;\n    }\n    if (y2 < y1) {\n      this.y2 = y1;\n      this.y1 = y2;\n    } else {\n      this.y1 = y1;\n      this.y2 = y2;\n    }\n    return this;\n  },\n\n  add(x, y) {\n    if (x < this.x1) this.x1 = x;\n    if (y < this.y1) this.y1 = y;\n    if (x > this.x2) this.x2 = x;\n    if (y > this.y2) this.y2 = y;\n    return this;\n  },\n\n  expand(d) {\n    this.x1 -= d;\n    this.y1 -= d;\n    this.x2 += d;\n    this.y2 += d;\n    return this;\n  },\n\n  round() {\n    this.x1 = Math.floor(this.x1);\n    this.y1 = Math.floor(this.y1);\n    this.x2 = Math.ceil(this.x2);\n    this.y2 = Math.ceil(this.y2);\n    return this;\n  },\n\n  scale(s) {\n    this.x1 *= s;\n    this.y1 *= s;\n    this.x2 *= s;\n    this.y2 *= s;\n    return this;\n  },\n\n  translate(dx, dy) {\n    this.x1 += dx;\n    this.x2 += dx;\n    this.y1 += dy;\n    this.y2 += dy;\n    return this;\n  },\n\n  rotate(angle, x, y) {\n    const p = this.rotatedPoints(angle, x, y);\n    return this.clear()\n      .add(p[0], p[1])\n      .add(p[2], p[3])\n      .add(p[4], p[5])\n      .add(p[6], p[7]);\n  },\n\n  rotatedPoints(angle, x, y) {\n    var {x1, y1, x2, y2} = this,\n        cos = Math.cos(angle),\n        sin = Math.sin(angle),\n        cx = x - x * cos + y * sin,\n        cy = y - x * sin - y * cos;\n\n    return [\n      cos * x1 - sin * y1 + cx, sin * x1 + cos * y1 + cy,\n      cos * x1 - sin * y2 + cx, sin * x1 + cos * y2 + cy,\n      cos * x2 - sin * y1 + cx, sin * x2 + cos * y1 + cy,\n      cos * x2 - sin * y2 + cx, sin * x2 + cos * y2 + cy\n    ];\n  },\n\n  union(b) {\n    if (b.x1 < this.x1) this.x1 = b.x1;\n    if (b.y1 < this.y1) this.y1 = b.y1;\n    if (b.x2 > this.x2) this.x2 = b.x2;\n    if (b.y2 > this.y2) this.y2 = b.y2;\n    return this;\n  },\n\n  intersect(b) {\n    if (b.x1 > this.x1) this.x1 = b.x1;\n    if (b.y1 > this.y1) this.y1 = b.y1;\n    if (b.x2 < this.x2) this.x2 = b.x2;\n    if (b.y2 < this.y2) this.y2 = b.y2;\n    return this;\n  },\n\n  encloses(b) {\n    return b && (\n      this.x1 <= b.x1 &&\n      this.x2 >= b.x2 &&\n      this.y1 <= b.y1 &&\n      this.y2 >= b.y2\n    );\n  },\n\n  alignsWith(b) {\n    return b && (\n      this.x1 == b.x1 ||\n      this.x2 == b.x2 ||\n      this.y1 == b.y1 ||\n      this.y2 == b.y2\n    );\n  },\n\n  intersects(b) {\n    return b && !(\n      this.x2 < b.x1 ||\n      this.x1 > b.x2 ||\n      this.y2 < b.y1 ||\n      this.y1 > b.y2\n    );\n  },\n\n  contains(x, y) {\n    return !(\n      x < this.x1 ||\n      x > this.x2 ||\n      y < this.y1 ||\n      y > this.y2\n    );\n  },\n\n  width() {\n    return this.x2 - this.x1;\n  },\n\n  height() {\n    return this.y2 - this.y1;\n  }\n};\n","import Bounds from './Bounds.js';\n\nexport default function Item(mark) {\n  this.mark = mark;\n  this.bounds = (this.bounds || new Bounds());\n}\n","import Item from './Item.js';\nimport {inherits} from 'vega-util';\n\nexport default function GroupItem(mark) {\n  Item.call(this, mark);\n  this.items = (this.items || []);\n}\n\ninherits(GroupItem, Item);\n","import {image} from 'vega-canvas';\nimport {loader} from 'vega-loader';\nimport {hasOwnProperty} from 'vega-util';\n\nexport default class ResourceLoader {\n  constructor(customLoader) {\n    this._pending = 0;\n    this._loader = customLoader || loader();\n  }\n\n  pending() {\n    return this._pending;\n  }\n\n  sanitizeURL(uri) {\n    const loader = this;\n    increment(loader);\n\n    return loader._loader.sanitize(uri, { context: 'href' })\n      .then(opt => {\n        decrement(loader);\n        return opt;\n      })\n      .catch(() => {\n        decrement(loader);\n        return null;\n      });\n  }\n\n  loadImage(uri) {\n    const loader = this, Image = image();\n    increment(loader);\n\n    return loader._loader\n      .sanitize(uri, { context: 'image' })\n      .then(opt => {\n        const url = opt.href;\n        if (!url || !Image) throw { url: url };\n\n        const img = new Image();\n\n        // set crossOrigin only if cors is defined; empty string sets anonymous mode\n        // https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/crossOrigin\n        const cors = hasOwnProperty(opt, 'crossOrigin') ? opt.crossOrigin : 'anonymous';\n        if (cors != null) img.crossOrigin = cors;\n\n        // attempt to load image resource\n        img.onload = () => decrement(loader);\n        img.onerror = () => decrement(loader);\n        img.src = url;\n\n        return img;\n      })\n      .catch(e => {\n        decrement(loader);\n        return { complete: false, width: 0, height: 0, src: e && e.url || '' };\n      });\n  }\n\n  ready() {\n    const loader = this;\n    return new Promise(accept => {\n      function poll(value) {\n        if (!loader.pending()) accept(value);\n        else setTimeout(() => { poll(true); }, 10);\n      }\n      poll(false);\n    });\n  }\n}\n\nfunction increment(loader) {\n  loader._pending += 1;\n}\n\nfunction decrement(loader) {\n  loader._pending -= 1;\n}\n","export default function(bounds, item, miter) {\n  if (item.stroke && item.opacity !== 0 && item.strokeOpacity !== 0) {\n    const sw = item.strokeWidth != null ? +item.strokeWidth : 1;\n    bounds.expand(sw + (miter ? miterAdjustment(item, sw) : 0));\n  }\n  return bounds;\n}\n\nfunction miterAdjustment(item, strokeWidth) {\n  // TODO: more sophisticated adjustment? Or miter support in boundContext?\n  return item.strokeJoin && item.strokeJoin !== 'miter' ? 0 : strokeWidth;\n}\n","import {DegToRad, Epsilon, HalfPi, Tau} from '../util/constants.js';\n\nconst circleThreshold = Tau - 1e-8;\nlet bounds, lx, ly, rot, ma, mb, mc, md;\n\nconst add = (x, y) => bounds.add(x, y);\nconst addL = (x, y) => add(lx = x, ly = y);\nconst addX = x => add(x, bounds.y1);\nconst addY = y => add(bounds.x1, y);\n\nconst px = (x, y) => ma * x + mc * y;\nconst py = (x, y) => mb * x + md * y;\nconst addp = (x, y) => add(px(x, y), py(x, y));\nconst addpL = (x, y) => addL(px(x, y), py(x, y));\n\nexport default function(_, deg) {\n  bounds = _;\n  if (deg) {\n    rot = deg * DegToRad;\n    ma = md = Math.cos(rot);\n    mb = Math.sin(rot);\n    mc = -mb;\n  } else {\n    ma = md = 1;\n    rot = mb = mc = 0;\n  }\n  return context;\n}\n\nconst context = {\n  beginPath() {},\n  closePath() {},\n\n  moveTo: addpL,\n  lineTo: addpL,\n\n  rect(x, y, w, h) {\n    if (rot) {\n      addp(x + w, y);\n      addp(x + w, y + h);\n      addp(x, y + h);\n      addpL(x, y);\n    } else {\n      add(x + w, y + h);\n      addL(x, y);\n    }\n  },\n\n  quadraticCurveTo(x1, y1, x2, y2) {\n    const px1 = px(x1, y1),\n          py1 = py(x1, y1),\n          px2 = px(x2, y2),\n          py2 = py(x2, y2);\n    quadExtrema(lx, px1, px2, addX);\n    quadExtrema(ly, py1, py2, addY);\n    addL(px2, py2);\n  },\n\n  bezierCurveTo(x1, y1, x2, y2, x3, y3) {\n    const px1 = px(x1, y1),\n          py1 = py(x1, y1),\n          px2 = px(x2, y2),\n          py2 = py(x2, y2),\n          px3 = px(x3, y3),\n          py3 = py(x3, y3);\n    cubicExtrema(lx, px1, px2, px3, addX);\n    cubicExtrema(ly, py1, py2, py3, addY);\n    addL(px3, py3);\n  },\n\n  arc(cx, cy, r, sa, ea, ccw) {\n    sa += rot;\n    ea += rot;\n\n    // store last point on path\n    lx = r * Math.cos(ea) + cx;\n    ly = r * Math.sin(ea) + cy;\n\n    if (Math.abs(ea - sa) > circleThreshold) {\n      // treat as full circle\n      add(cx - r, cy - r);\n      add(cx + r, cy + r);\n    } else {\n      const update = a => add(r * Math.cos(a) + cx, r * Math.sin(a) + cy);\n      let s, i;\n\n      // sample end points\n      update(sa);\n      update(ea);\n\n      // sample interior points aligned with 90 degrees\n      if (ea !== sa) {\n        sa = sa % Tau; if (sa < 0) sa += Tau;\n        ea = ea % Tau; if (ea < 0) ea += Tau;\n\n        if (ea < sa) {\n          ccw = !ccw; // flip direction\n          s = sa; sa = ea; ea = s; // swap end-points\n        }\n\n        if (ccw) {\n          ea -= Tau;\n          s = sa - (sa % HalfPi);\n          for (i=0; i<4 && s>ea; ++i, s-=HalfPi) update(s);\n        } else {\n          s = sa - (sa % HalfPi) + HalfPi;\n          for (i=0; i<4 && s<ea; ++i, s=s+HalfPi) update(s);\n        }\n      }\n    }\n  }\n};\n\nfunction quadExtrema(x0, x1, x2, cb) {\n  const t = (x0 - x1) / (x0 + x2 - 2 * x1);\n  if (0 < t && t < 1) cb(x0 + (x1 - x0) * t);\n}\n\nfunction cubicExtrema(x0, x1, x2, x3, cb) {\n  const a = x3 - x0 + 3 * x1 - 3 * x2,\n        b = x0 + x2 - 2 * x1,\n        c = x0 - x1;\n\n  let t0 = 0, t1 = 0, r;\n\n  // solve for parameter t\n  if (Math.abs(a) > Epsilon) {\n    // quadratic equation\n    r = b * b + c * a;\n    if (r >= 0) {\n      r = Math.sqrt(r);\n      t0 = (-b + r) / a;\n      t1 = (-b - r) / a;\n    }\n  } else {\n    // linear equation\n    t0 = 0.5 * c / b;\n  }\n\n  // calculate position\n  if (0 < t0 && t0 < 1) cb(cubic(t0, x0, x1, x2, x3));\n  if (0 < t1 && t1 < 1) cb(cubic(t1, x0, x1, x2, x3));\n}\n\nfunction cubic(t, x0, x1, x2, x3) {\n  const s = 1 - t, s2 = s * s, t2 = t * t;\n  return (s2 * s * x0) + (3 * s2 * t * x1) + (3 * s * t2 * x2) + (t2 * t * x3);\n}\n","import {canvas} from 'vega-canvas';\n\nexport var context = (context = canvas(1,1))\n  ? context.getContext('2d')\n  : null;\n","import {context} from './canvas/context.js';\nimport Bounds from '../Bounds.js';\n\nconst b = new Bounds();\n\nexport function intersectPath(draw) {\n  return function(item, brush) {\n    // rely on (inaccurate) bounds intersection if no context\n    if (!context) return true;\n\n    // add path to offscreen graphics context\n    draw(context, item);\n\n    // get bounds intersection region\n    b.clear().union(item.bounds).intersect(brush).round();\n    const {x1, y1, x2, y2} = b;\n\n    // iterate over intersection region\n    // perform fine grained inclusion test\n    for (let y = y1; y <= y2; ++y) {\n      for (let x = x1; x <= x2; ++x) {\n        if (context.isPointInPath(x, y)) {\n          return true;\n        }\n      }\n    }\n\n    // false if no hits in intersection region\n    return false;\n  };\n}\n\nexport function intersectPoint(item, box) {\n  return box.contains(item.x || 0, item.y || 0);\n}\n\nexport function intersectRect(item, box) {\n  const x = item.x || 0,\n        y = item.y || 0,\n        w = item.width || 0,\n        h = item.height || 0;\n  return box.intersects(b.set(x, y, x + w, y + h));\n}\n\nexport function intersectRule(item, box) {\n  const x = item.x || 0,\n        y = item.y || 0,\n        x2 = item.x2 != null ? item.x2 : x,\n        y2 = item.y2 != null ? item.y2 : y;\n  return intersectBoxLine(box, x, y, x2, y2);\n}\n\nexport function intersectBoxLine(box, x, y, u, v) {\n  const {x1, y1, x2, y2} = box,\n        dx = u - x,\n        dy = v - y;\n\n  let t0 = 0, t1 = 1, p, q, r, e;\n\n  for (e=0; e<4; ++e) {\n    if (e === 0) { p = -dx; q = -(x1 - x); }\n    if (e === 1) { p =  dx; q =  (x2 - x); }\n    if (e === 2) { p = -dy; q = -(y1 - y); }\n    if (e === 3) { p =  dy; q =  (y2 - y); }\n\n    if (Math.abs(p) < 1e-10 && q < 0) return false;\n\n    r = q / p;\n\n    if (p < 0) {\n      if (r > t1) return false;\n      else if (r > t0) t0 = r;\n    } else if (p > 0) {\n      if (r < t0) return false;\n      else if (r < t1) t1 = r;\n    }\n  }\n\n  return true;\n}\n","export default function(context, item) {\n  context.globalCompositeOperation = item.blend || 'source-over';\n}\n","export default function(value, dflt) {\n  return value == null ? dflt : value;\n}\n","import value from '../value.js';\nimport {canvas} from 'vega-canvas';\n\nfunction addStops(gradient, stops) {\n  const n = stops.length;\n  for (let i=0; i<n; ++i) {\n    gradient.addColorStop(stops[i].offset, stops[i].color);\n  }\n  return gradient;\n}\n\nexport default function(context, spec, bounds) {\n  const w = bounds.width(),\n        h = bounds.height();\n  let gradient;\n\n\n  if (spec.gradient === 'radial') {\n    gradient = context.createRadialGradient(\n      bounds.x1 + value(spec.x1, 0.5) * w,\n      bounds.y1 + value(spec.y1, 0.5) * h,\n      Math.max(w, h) * value(spec.r1, 0),\n      bounds.x1 + value(spec.x2, 0.5) * w,\n      bounds.y1 + value(spec.y2, 0.5) * h,\n      Math.max(w, h) * value(spec.r2, 0.5)\n    );\n  } else { // linear gradient\n    const x1 = value(spec.x1, 0),\n          y1 = value(spec.y1, 0),\n          x2 = value(spec.x2, 1),\n          y2 = value(spec.y2, 0);\n\n    if (x1 === x2 || y1 === y2 || w === h) {\n      // axis aligned: use normal gradient\n      gradient = context.createLinearGradient(\n        bounds.x1 + x1 * w,\n        bounds.y1 + y1 * h,\n        bounds.x1 + x2 * w,\n        bounds.y1 + y2 * h\n      );\n    } else {\n      // not axis aligned: render gradient into a pattern (#2365)\n      // this allows us to use normalized bounding box coordinates\n      const image = canvas(Math.ceil(w), Math.ceil(h)),\n            ictx = image.getContext('2d');\n\n      ictx.scale(w, h);\n      ictx.fillStyle = addStops(\n        ictx.createLinearGradient(x1, y1, x2, y2),\n        spec.stops\n      );\n      ictx.fillRect(0, 0, w, h);\n\n      return context.createPattern(image, 'no-repeat');\n    }\n  }\n\n  return addStops(gradient, spec.stops);\n}\n","import {isGradient} from '../../Gradient.js';\nimport gradient from './gradient.js';\n\nexport default function(context, item, value) {\n  return isGradient(value)\n    ? gradient(context, value, item.bounds)\n    : value;\n}\n","import color from './color.js';\n\nexport default function(context, item, opacity) {\n  opacity *= (item.fillOpacity==null ? 1 : item.fillOpacity);\n  if (opacity > 0) {\n    context.globalAlpha = opacity;\n    context.fillStyle = color(context, item, item.fill);\n    return true;\n  } else {\n    return false;\n  }\n}\n","import color from './color.js';\n\nvar Empty = [];\n\nexport default function(context, item, opacity) {\n  var lw = (lw = item.strokeWidth) != null ? lw : 1;\n\n  if (lw <= 0) return false;\n\n  opacity *= (item.strokeOpacity==null ? 1 : item.strokeOpacity);\n  if (opacity > 0) {\n    context.globalAlpha = opacity;\n    context.strokeStyle = color(context, item, item.stroke);\n\n    context.lineWidth = lw;\n    context.lineCap = item.strokeCap || 'butt';\n    context.lineJoin = item.strokeJoin || 'miter';\n    context.miterLimit = item.strokeMiterLimit || 10;\n\n    if (context.setLineDash) {\n      context.setLineDash(item.strokeDash || Empty);\n      context.lineDashOffset = item.strokeDashOffset || 0;\n    }\n    return true;\n  } else {\n    return false;\n  }\n}\n","function compare(a, b) {\n  return a.zindex - b.zindex || a.index - b.index;\n}\n\nexport function zorder(scene) {\n  if (!scene.zdirty) return scene.zitems;\n\n  var items = scene.items,\n      output = [], item, i, n;\n\n  for (i=0, n=items.length; i<n; ++i) {\n    item = items[i];\n    item.index = i;\n    if (item.zindex) output.push(item);\n  }\n\n  scene.zdirty = false;\n  return scene.zitems = output.sort(compare);\n}\n\nexport function visit(scene, visitor) {\n  var items = scene.items, i, n;\n  if (!items || !items.length) return;\n\n  const zitems = zorder(scene);\n\n  if (zitems && zitems.length) {\n    for (i=0, n=items.length; i<n; ++i) {\n      if (!items[i].zindex) visitor(items[i]);\n    }\n    items = zitems;\n  }\n\n  for (i=0, n=items.length; i<n; ++i) {\n    visitor(items[i]);\n  }\n}\n\nexport function pickVisit(scene, visitor) {\n  var items = scene.items, hit, i;\n  if (!items || !items.length) return null;\n\n  const zitems = zorder(scene);\n  if (zitems && zitems.length) items = zitems;\n\n  for (i=items.length; --i >= 0;) {\n    if (hit = visitor(items[i])) return hit;\n  }\n\n  if (items === zitems) {\n    for (items=scene.items, i=items.length; --i >= 0;) {\n      if (!items[i].zindex) {\n        if (hit = visitor(items[i])) return hit;\n      }\n    }\n  }\n\n  return null;\n}\n","import blend from './blend.js';\nimport fill from './fill.js';\nimport stroke from './stroke.js';\nimport {visit} from '../visit.js';\n\nexport function drawAll(path) {\n  return function(context, scene, bounds) {\n    visit(scene, item => {\n      if (!bounds || bounds.intersects(item.bounds)) {\n        drawPath(path, context, item, item);\n      }\n    });\n  };\n}\n\nexport function drawOne(path) {\n  return function(context, scene, bounds) {\n    if (scene.items.length && (!bounds || bounds.intersects(scene.bounds))) {\n      drawPath(path, context, scene.items[0], scene.items);\n    }\n  };\n}\n\nfunction drawPath(path, context, item, items) {\n  var opacity = item.opacity == null ? 1 : item.opacity;\n  if (opacity === 0) return;\n\n  if (path(context, items)) return;\n\n  blend(context, item);\n\n  if (item.fill && fill(context, item, opacity)) {\n    context.fill();\n  }\n\n  if (item.stroke && stroke(context, item, opacity)) {\n    context.stroke();\n  }\n}\n","import {pickVisit} from '../visit.js';\nimport {truthy} from 'vega-util';\n\nexport function pick(test) {\n  test = test || truthy;\n\n  return function(context, scene, x, y, gx, gy) {\n    x *= context.pixelRatio;\n    y *= context.pixelRatio;\n\n    return pickVisit(scene, item => {\n      const b = item.bounds;\n      // first hit test against bounding box\n      if ((b && !b.contains(gx, gy)) || !b) return;\n      // if in bounding box, perform more careful test\n      if (test(context, item, x, y, gx, gy)) return item;\n    });\n  };\n}\n\nexport function hitPath(path, filled) {\n  return function(context, o, x, y) {\n    var item = Array.isArray(o) ? o[0] : o,\n        fill = (filled == null) ? item.fill : filled,\n        stroke = item.stroke && context.isPointInStroke, lw, lc;\n\n    if (stroke) {\n      lw = item.strokeWidth;\n      lc = item.strokeCap;\n      context.lineWidth = lw != null ? lw : 1;\n      context.lineCap   = lc != null ? lc : 'butt';\n    }\n\n    return path(context, o) ? false :\n      (fill && context.isPointInPath(x, y)) ||\n      (stroke && context.isPointInStroke(x, y));\n  };\n}\n\nexport function pickPath(path) {\n  return pick(hitPath(path));\n}\n","export function translate(x, y) {\n  return 'translate(' + x + ',' + y + ')';\n}\n\nexport function rotate(a) {\n  return 'rotate(' + a + ')';\n}\n\nexport function scale(scaleX, scaleY){\n  return 'scale('+ scaleX + ',' + scaleY+')';\n}\n\nexport function translateItem(item) {\n  return translate(item.x || 0, item.y || 0);\n}\n\nexport function rotateItem(item) {\n  return translate(item.x || 0, item.y || 0)\n    + (item.angle ? ' ' + rotate(item.angle) : '');\n}\n\nexport function transformItem(item) {\n  return translate(item.x || 0, item.y || 0)\n    + (item.angle ? ' ' + rotate(item.angle) : '')\n    + (item.scaleX || item.scaleY ? ' ' + scale(item.scaleX || 1, item.scaleY || 1) : '');\n}\n","import boundStroke from '../bound/boundStroke.js';\nimport context from '../bound/boundContext.js';\nimport {intersectPath} from '../util/intersect.js';\nimport {drawAll} from '../util/canvas/draw.js';\nimport {pickPath} from '../util/canvas/pick.js';\nimport {rotateItem} from '../util/svg/transform.js';\nimport {DegToRad} from '../util/constants.js';\n\nexport default function(type, shape, isect) {\n\n  function attr(emit, item) {\n    emit('transform', rotateItem(item));\n    emit('d', shape(null, item));\n  }\n\n  function bound(bounds, item) {\n    shape(context(bounds, item.angle), item);\n    return boundStroke(bounds, item).translate(item.x || 0, item.y || 0);\n  }\n\n  function draw(context, item) {\n    var x = item.x || 0,\n        y = item.y || 0,\n        a = item.angle || 0;\n\n    context.translate(x, y);\n    if (a) context.rotate(a *= DegToRad);\n    context.beginPath();\n    shape(context, item);\n    if (a) context.rotate(-a);\n    context.translate(-x, -y);\n  }\n\n  return {\n    type:   type,\n    tag:    'path',\n    nested: false,\n    attr:   attr,\n    bound:  bound,\n    draw:   drawAll(draw),\n    pick:   pickPath(draw),\n    isect:  isect || intersectPath(draw)\n  };\n\n}\n","import {arc} from '../path/shapes.js';\nimport markItemPath from './markItemPath.js';\n\nexport default markItemPath('arc', arc);\n","export function pickArea(a, p) {\n  var v = a[0].orient === 'horizontal' ? p[1] : p[0],\n      z = a[0].orient === 'horizontal' ? 'y' : 'x',\n      i = a.length,\n      min = +Infinity, hit, d;\n\n  while (--i >= 0) {\n    if (a[i].defined === false) continue;\n    d = Math.abs(a[i][z] - v);\n    if (d < min) {\n      min = d;\n      hit = a[i];\n    }\n  }\n\n  return hit;\n}\n\nexport function pickLine(a, p) {\n  var t = Math.pow(a[0].strokeWidth || 1, 2),\n      i = a.length, dx, dy, dd;\n\n  while (--i >= 0) {\n    if (a[i].defined === false) continue;\n    dx = a[i].x - p[0];\n    dy = a[i].y - p[1];\n    dd = dx * dx + dy * dy;\n    if (dd < t) return a[i];\n  }\n\n  return null;\n}\n\nexport function pickTrail(a, p) {\n  var i = a.length, dx, dy, dd;\n\n  while (--i >= 0) {\n    if (a[i].defined === false) continue;\n    dx = a[i].x - p[0];\n    dy = a[i].y - p[1];\n    dd = dx * dx + dy * dy;\n    dx = a[i].size || 1;\n    if (dd < dx*dx) return a[i];\n  }\n\n  return null;\n}\n","import boundStroke from '../bound/boundStroke.js';\nimport context from '../bound/boundContext.js';\nimport {intersectPoint} from '../util/intersect.js';\nimport {drawOne} from '../util/canvas/draw.js';\nimport {hitPath} from '../util/canvas/pick.js';\n\nexport default function(type, shape, tip) {\n\n  function attr(emit, item) {\n    var items = item.mark.items;\n    if (items.length) emit('d', shape(null, items));\n  }\n\n  function bound(bounds, mark) {\n    var items = mark.items;\n    if (items.length === 0) {\n      return bounds;\n    } else {\n      shape(context(bounds), items);\n      return boundStroke(bounds, items[0]);\n    }\n  }\n\n  function draw(context, items) {\n    context.beginPath();\n    shape(context, items);\n  }\n\n  const hit = hitPath(draw);\n\n  function pick(context, scene, x, y, gx, gy) {\n    var items = scene.items,\n        b = scene.bounds;\n\n    if (!items || !items.length || b && !b.contains(gx, gy)) {\n      return null;\n    }\n\n    x *= context.pixelRatio;\n    y *= context.pixelRatio;\n    return hit(context, items, x, y) ? items[0] : null;\n  }\n\n  return {\n    type:   type,\n    tag:    'path',\n    nested: true,\n    attr:   attr,\n    bound:  bound,\n    draw:   drawOne(draw),\n    pick:   pick,\n    isect:  intersectPoint,\n    tip:    tip\n  };\n\n}\n","import {area} from '../path/shapes.js';\nimport {pickArea} from '../util/pickPath.js';\nimport markMultiItemPath from './markMultiItemPath.js';\n\nexport default markMultiItemPath('area', area, pickArea);\n","import {hasCornerRadius, rectangle} from '../../path/shapes.js';\nimport {isFunction} from 'vega-util';\n\nexport default function(context, scene) {\n  var clip = scene.clip;\n\n  context.save();\n\n  if (isFunction(clip)) {\n    context.beginPath();\n    clip(context);\n    context.clip();\n  } else {\n    clipGroup(context, scene.group);\n  }\n}\n\nexport function clipGroup(context, group) {\n  context.beginPath();\n  hasCornerRadius(group)\n    ? rectangle(context, group, 0, 0)\n    : context.rect(0, 0, group.width || 0, group.height || 0);\n  context.clip();\n}\n","import {hasCornerRadius, rectangle} from '../path/shapes.js';\nimport boundStroke from '../bound/boundStroke.js';\nimport {intersectRect} from '../util/intersect.js';\nimport value from '../util/value.js';\nimport {pickVisit, visit} from '../util/visit.js';\nimport blend from '../util/canvas/blend.js';\nimport {clipGroup} from '../util/canvas/clip.js';\nimport fill from '../util/canvas/fill.js';\nimport stroke from '../util/canvas/stroke.js';\nimport {hitPath} from '../util/canvas/pick.js';\nimport clip from '../util/svg/clip.js';\nimport {translateItem} from '../util/svg/transform.js';\n\nfunction offset(item) {\n  const sw = value(item.strokeWidth, 1);\n  return item.strokeOffset != null ? item.strokeOffset\n    : item.stroke && sw > 0.5 && sw < 1.5 ? 0.5 - Math.abs(sw - 1)\n    : 0;\n}\n\nfunction attr(emit, item) {\n  emit('transform', translateItem(item));\n}\n\nfunction emitRectangle(emit, item) {\n  const off = offset(item);\n  emit('d', rectangle(null, item, off, off));\n}\n\nfunction background(emit, item) {\n  emit('class', 'background');\n  emit('aria-hidden', true);\n  emitRectangle(emit, item);\n}\n\nfunction foreground(emit, item) {\n  emit('class', 'foreground');\n  emit('aria-hidden', true);\n  if (item.strokeForeground) {\n    emitRectangle(emit, item);\n  } else {\n    emit('d', '');\n  }\n}\n\nfunction content(emit, item, renderer) {\n  const url = item.clip ? clip(renderer, item, item) : null;\n  emit('clip-path', url);\n}\n\nfunction bound(bounds, group) {\n  if (!group.clip && group.items) {\n    const items = group.items, m = items.length;\n    for (let j=0; j<m; ++j) {\n      bounds.union(items[j].bounds);\n    }\n  }\n\n  if ((group.clip || group.width || group.height) && !group.noBound) {\n    bounds.add(0, 0).add(group.width || 0, group.height || 0);\n  }\n\n  boundStroke(bounds, group);\n\n  return bounds.translate(group.x || 0, group.y || 0);\n}\n\nfunction rectanglePath(context, group, x, y) {\n  const off = offset(group);\n  context.beginPath();\n  rectangle(context, group, (x || 0) + off, (y || 0) + off);\n}\n\nconst hitBackground = hitPath(rectanglePath);\nconst hitForeground = hitPath(rectanglePath, false);\nconst hitCorner = hitPath(rectanglePath, true);\n\nfunction draw(context, scene, bounds, markTypes) {\n  visit(scene, group => {\n    const gx = group.x || 0,\n          gy = group.y || 0,\n          fore = group.strokeForeground,\n          opacity = group.opacity == null ? 1 : group.opacity;\n\n    // draw group background\n    if ((group.stroke || group.fill) && opacity) {\n      rectanglePath(context, group, gx, gy);\n      blend(context, group);\n      if (group.fill && fill(context, group, opacity)) {\n        context.fill();\n      }\n      if (group.stroke && !fore && stroke(context, group, opacity)) {\n        context.stroke();\n      }\n    }\n\n    // setup graphics context, set clip and bounds\n    context.save();\n    context.translate(gx, gy);\n    if (group.clip) clipGroup(context, group);\n    if (bounds) bounds.translate(-gx, -gy);\n\n    // draw group contents\n    visit(group, item => {\n      if (item.marktype === 'group' || markTypes == null || markTypes.includes(item.marktype)) {\n        this.draw(context, item, bounds, markTypes);\n      }\n    });\n\n    // restore graphics context\n    if (bounds) bounds.translate(gx, gy);\n    context.restore();\n\n    // draw group foreground\n    if (fore && group.stroke && opacity) {\n      rectanglePath(context, group, gx, gy);\n      blend(context, group);\n      if (stroke(context, group, opacity)) {\n        context.stroke();\n      }\n    }\n  });\n}\n\nfunction pick(context, scene, x, y, gx, gy) {\n  if (scene.bounds && !scene.bounds.contains(gx, gy) || !scene.items) {\n    return null;\n  }\n\n  const cx = x * context.pixelRatio,\n        cy = y * context.pixelRatio;\n\n  return pickVisit(scene, group => {\n    let hit, dx, dy;\n\n    // first hit test bounding box\n    const b = group.bounds;\n    if (b && !b.contains(gx, gy)) return;\n\n    // passed bounds check, test rectangular clip\n    dx = group.x || 0;\n    dy = group.y || 0;\n    const dw = dx + (group.width || 0),\n          dh = dy + (group.height || 0),\n          c = group.clip;\n    if (c && (gx < dx || gx > dw || gy < dy || gy > dh)) return;\n\n    // adjust coordinate system\n    context.save();\n    context.translate(dx, dy);\n    dx = gx - dx;\n    dy = gy - dy;\n\n    // test background for rounded corner clip\n    if (c && hasCornerRadius(group) && !hitCorner(context, group, cx, cy)) {\n      context.restore();\n      return null;\n    }\n\n    const fore = group.strokeForeground,\n          ix = scene.interactive !== false;\n\n    // hit test against group foreground\n    if (ix && fore && group.stroke\n        && hitForeground(context, group, cx, cy)) {\n      context.restore();\n      return group;\n    }\n\n    // hit test against contained marks\n    hit = pickVisit(group, mark => pickMark(mark, dx, dy)\n      ? this.pick(mark, x, y, dx, dy)\n      : null\n    );\n\n    // hit test against group background\n    if (!hit && ix && (group.fill || (!fore && group.stroke))\n        && hitBackground(context, group, cx, cy)) {\n      hit = group;\n    }\n\n    // restore state and return\n    context.restore();\n    return hit || null;\n  });\n}\n\nfunction pickMark(mark, x, y) {\n  return (mark.interactive !== false || mark.marktype === 'group')\n    && mark.bounds && mark.bounds.contains(x, y);\n}\n\nexport default {\n  type:       'group',\n  tag:        'g',\n  nested:     false,\n  attr:       attr,\n  bound:      bound,\n  draw:       draw,\n  pick:       pick,\n  isect:      intersectRect,\n  content:    content,\n  background: background,\n  foreground: foreground\n};\n","export default {\n  'xmlns': 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  'version': '1.1'\n};","import {visit} from '../util/visit.js';\nimport blend from '../util/canvas/blend.js';\nimport {pick} from '../util/canvas/pick.js';\nimport metadata from '../util/svg/metadata.js';\nimport {translate} from '../util/svg/transform.js';\nimport {truthy} from 'vega-util';\n\nfunction getImage(item, renderer) {\n  var image = item.image;\n  if (!image || item.url && item.url !== image.url) {\n    image = {complete: false, width: 0, height: 0};\n    renderer.loadImage(item.url).then(image => {\n      item.image = image;\n      item.image.url = item.url;\n    });\n  }\n  return image;\n}\n\nfunction imageWidth(item, image) {\n  return item.width != null ? item.width\n    : !image || !image.width ? 0\n    : item.aspect !== false && item.height ? item.height * image.width / image.height\n    : image.width;\n}\n\nfunction imageHeight(item, image) {\n  return item.height != null ? item.height\n    : !image || !image.height ? 0\n    : item.aspect !== false && item.width ? item.width * image.height / image.width\n    : image.height;\n}\n\nfunction imageXOffset(align, w) {\n  return align === 'center' ? w / 2 : align === 'right' ? w : 0;\n}\n\nfunction imageYOffset(baseline, h) {\n  return baseline === 'middle' ? h / 2 : baseline === 'bottom' ? h : 0;\n}\n\nfunction attr(emit, item, renderer) {\n  const img = getImage(item, renderer),\n        w = imageWidth(item, img),\n        h = imageHeight(item, img),\n        x = (item.x || 0) - imageXOffset(item.align, w),\n        y = (item.y || 0) - imageYOffset(item.baseline, h),\n        i = !img.src && img.toDataURL ? img.toDataURL() : img.src || '';\n\n  emit('href', i, metadata['xmlns:xlink'], 'xlink:href');\n  emit('transform', translate(x, y));\n  emit('width', w);\n  emit('height', h);\n  emit('preserveAspectRatio', item.aspect === false ? 'none' : 'xMidYMid');\n}\n\nfunction bound(bounds, item) {\n  const img = item.image,\n        w = imageWidth(item, img),\n        h = imageHeight(item, img),\n        x = (item.x || 0) - imageXOffset(item.align, w),\n        y = (item.y || 0) - imageYOffset(item.baseline, h);\n\n  return bounds.set(x, y, x + w, y + h);\n}\n\nfunction draw(context, scene, bounds) {\n  visit(scene, item => {\n    if (bounds && !bounds.intersects(item.bounds)) return; // bounds check\n\n    const img = getImage(item, this);\n\n    let w = imageWidth(item, img);\n    let h = imageHeight(item, img);\n    if (w === 0 || h === 0) return; // early exit\n\n    let x = (item.x || 0) - imageXOffset(item.align, w),\n        y = (item.y || 0) - imageYOffset(item.baseline, h),\n        opacity, ar0, ar1, t;\n\n    if (item.aspect !== false) {\n      ar0 = img.width / img.height;\n      ar1 = item.width / item.height;\n      if (ar0 === ar0 && ar1 === ar1 && ar0 !== ar1) {\n        if (ar1 < ar0) {\n          t = w / ar0;\n          y += (h - t) / 2;\n          h = t;\n        } else {\n          t = h * ar0;\n          x += (w - t) / 2;\n          w = t;\n        }\n      }\n    }\n\n    if (img.complete || img.toDataURL) {\n      blend(context, item);\n      context.globalAlpha = (opacity = item.opacity) != null ? opacity : 1;\n      context.imageSmoothingEnabled = item.smooth !== false;\n      context.drawImage(img, x, y, w, h);\n    }\n  });\n}\n\nexport default {\n  type:     'image',\n  tag:      'image',\n  nested:   false,\n  attr:     attr,\n  bound:    bound,\n  draw:     draw,\n  pick:     pick(),\n  isect:    truthy, // bounds check is sufficient\n  get:      getImage,\n  xOffset:  imageXOffset,\n  yOffset:  imageYOffset\n};\n","import {line} from '../path/shapes.js';\nimport {pickLine} from '../util/pickPath.js';\nimport markMultiItemPath from './markMultiItemPath.js';\n\nexport default markMultiItemPath('line', line, pickLine);\n","import boundStroke from '../bound/boundStroke.js';\nimport context from '../bound/boundContext.js';\nimport pathParse from '../path/parse.js';\nimport pathRender from '../path/render.js';\nimport {intersectPath} from '../util/intersect.js';\nimport {drawAll} from '../util/canvas/draw.js';\nimport {pickPath} from '../util/canvas/pick.js';\nimport {transformItem} from '../util/svg/transform.js';\nimport {DegToRad} from '../util/constants.js';\n\nfunction attr(emit, item) {\n  var sx = item.scaleX || 1,\n      sy = item.scaleY || 1;\n  if (sx !== 1 || sy !== 1) {\n    emit('vector-effect', 'non-scaling-stroke');\n  }\n  emit('transform', transformItem(item));\n  emit('d', item.path);\n}\n\nfunction path(context, item) {\n  var path = item.path;\n  if (path == null) return true;\n\n  var x = item.x || 0,\n      y = item.y || 0,\n      sx = item.scaleX || 1,\n      sy = item.scaleY || 1,\n      a = (item.angle || 0) * DegToRad,\n      cache = item.pathCache;\n\n  if (!cache || cache.path !== path) {\n    (item.pathCache = cache = pathParse(path)).path = path;\n  }\n\n  if (a && context.rotate && context.translate) {\n    context.translate(x, y);\n    context.rotate(a);\n    pathRender(context, cache, 0, 0, sx, sy);\n    context.rotate(-a);\n    context.translate(-x, -y);\n  } else {\n    pathRender(context, cache, x, y, sx, sy);\n  }\n}\n\nfunction bound(bounds, item) {\n  return path(context(bounds, item.angle), item)\n    ? bounds.set(0, 0, 0, 0)\n    : boundStroke(bounds, item, true);\n}\n\nexport default {\n  type:   'path',\n  tag:    'path',\n  nested: false,\n  attr:   attr,\n  bound:  bound,\n  draw:   drawAll(path),\n  pick:   pickPath(path),\n  isect:  intersectPath(path)\n};\n","import boundStroke from '../bound/boundStroke.js';\nimport {rectangle} from '../path/shapes.js';\nimport {intersectRect} from '../util/intersect.js';\nimport {drawAll} from '../util/canvas/draw.js';\nimport {pickPath} from '../util/canvas/pick.js';\n\nfunction attr(emit, item) {\n  emit('d', rectangle(null, item));\n}\n\nfunction bound(bounds, item) {\n  var x, y;\n  return boundStroke(bounds.set(\n    x = item.x || 0,\n    y = item.y || 0,\n    (x + item.width) || 0,\n    (y + item.height) || 0\n  ), item);\n}\n\nfunction draw(context, item) {\n  context.beginPath();\n  rectangle(context, item);\n}\n\nexport default {\n  type:   'rect',\n  tag:    'path',\n  nested: false,\n  attr:   attr,\n  bound:  bound,\n  draw:   drawAll(draw),\n  pick:   pickPath(draw),\n  isect:  intersectRect\n};\n","import boundStroke from '../bound/boundStroke.js';\nimport {intersectRule} from '../util/intersect.js';\nimport {visit} from '../util/visit.js';\nimport blend from '../util/canvas/blend.js';\nimport {pick} from '../util/canvas/pick.js';\nimport stroke from '../util/canvas/stroke.js';\nimport {translateItem} from '../util/svg/transform.js';\n\nfunction attr(emit, item) {\n  emit('transform', translateItem(item));\n  emit('x2', item.x2 != null ? item.x2 - (item.x || 0) : 0);\n  emit('y2', item.y2 != null ? item.y2 - (item.y || 0) : 0);\n}\n\nfunction bound(bounds, item) {\n  var x1, y1;\n  return boundStroke(bounds.set(\n    x1 = item.x || 0,\n    y1 = item.y || 0,\n    item.x2 != null ? item.x2 : x1,\n    item.y2 != null ? item.y2 : y1\n  ), item);\n}\n\nfunction path(context, item, opacity) {\n  var x1, y1, x2, y2;\n\n  if (item.stroke && stroke(context, item, opacity)) {\n    x1 = item.x || 0;\n    y1 = item.y || 0;\n    x2 = item.x2 != null ? item.x2 : x1;\n    y2 = item.y2 != null ? item.y2 : y1;\n    context.beginPath();\n    context.moveTo(x1, y1);\n    context.lineTo(x2, y2);\n    return true;\n  }\n  return false;\n}\n\nfunction draw(context, scene, bounds) {\n  visit(scene, item => {\n    if (bounds && !bounds.intersects(item.bounds)) return; // bounds check\n    var opacity = item.opacity == null ? 1 : item.opacity;\n    if (opacity && path(context, item, opacity)) {\n      blend(context, item);\n      context.stroke();\n    }\n  });\n}\n\nfunction hit(context, item, x, y) {\n  if (!context.isPointInStroke) return false;\n  return path(context, item, 1) && context.isPointInStroke(x, y);\n}\n\nexport default {\n  type:   'rule',\n  tag:    'line',\n  nested: false,\n  attr:   attr,\n  bound:  bound,\n  draw:   draw,\n  pick:   pick(hit),\n  isect:  intersectRule\n};\n","import {shape} from '../path/shapes.js';\nimport markItemPath from './markItemPath.js';\n\nexport default markItemPath('shape', shape);\n","import {symbol} from '../path/shapes.js';\nimport {intersectPoint} from '../util/intersect.js';\nimport markItemPath from './markItemPath.js';\n\nexport default markItemPath('symbol', symbol, intersectPoint);\n","import {context} from './canvas/context.js';\nimport {isArray, lruCache} from 'vega-util';\n\n// memoize text width measurement\nconst widthCache = lruCache();\n\nexport var textMetrics = {\n  height: fontSize,\n  measureWidth: measureWidth,\n  estimateWidth: estimateWidth,\n  width: estimateWidth,\n  canvas: useCanvas\n};\n\nuseCanvas(true);\n\nfunction useCanvas(use) {\n  textMetrics.width = (use && context) ? measureWidth : estimateWidth;\n}\n\n// make simple estimate if no canvas is available\nfunction estimateWidth(item, text) {\n  return _estimateWidth(textValue(item, text), fontSize(item));\n}\n\nfunction _estimateWidth(text, currentFontHeight) {\n  return ~~(0.8 * text.length * currentFontHeight);\n}\n\n// measure text width if canvas is available\nfunction measureWidth(item, text) {\n  return fontSize(item) <= 0 || !(text = textValue(item, text)) ? 0\n    : _measureWidth(text, font(item));\n}\n\nfunction _measureWidth(text, currentFont) {\n  const key = `(${currentFont}) ${text}`;\n  let width = widthCache.get(key);\n  if (width === undefined) {\n    context.font = currentFont;\n    width = context.measureText(text).width;\n    widthCache.set(key, width);\n  }\n  return width;\n}\n\nexport function fontSize(item) {\n  return item.fontSize != null ? (+item.fontSize || 0) : 11;\n}\n\nexport function lineHeight(item) {\n  return item.lineHeight != null ? item.lineHeight : (fontSize(item) + 2);\n}\n\nfunction lineArray(_) {\n  return isArray(_) ? _.length > 1 ? _ : _[0] : _;\n}\n\nexport function textLines(item) {\n  return lineArray(\n    item.lineBreak && item.text && !isArray(item.text)\n      ? item.text.split(item.lineBreak)\n      : item.text\n  );\n}\n\nexport function multiLineOffset(item) {\n  const tl = textLines(item);\n  return (isArray(tl) ? (tl.length - 1) : 0) * lineHeight(item);\n}\n\nexport function textValue(item, line) {\n  const text = line == null ? '' : (line + '').trim();\n  return item.limit > 0 && text.length ? truncate(item, text) : text;\n}\n\nfunction widthGetter(item) {\n  if (textMetrics.width === measureWidth) {\n    // we are using canvas\n    const currentFont = font(item);\n    return text => _measureWidth(text, currentFont);\n  } else if (textMetrics.width === estimateWidth) {\n    // we are relying on estimates\n    const currentFontHeight = fontSize(item);\n    return text => _estimateWidth(text, currentFontHeight);\n  } else {\n    // User defined textMetrics.width function in use (e.g. vl-convert)\n    return text => textMetrics.width(item, text);\n  }\n}\n\nfunction truncate(item, text) {\n  var limit = +item.limit,\n      width = widthGetter(item);\n\n  if (width(text) < limit) return text;\n\n  var ellipsis = item.ellipsis || '\\u2026',\n      rtl = item.dir === 'rtl',\n      lo = 0,\n      hi = text.length, mid;\n\n  limit -= width(ellipsis);\n\n  if (rtl) {\n    while (lo < hi) {\n      mid = (lo + hi >>> 1);\n      if (width(text.slice(mid)) > limit) lo = mid + 1;\n      else hi = mid;\n    }\n    return ellipsis + text.slice(lo);\n  } else {\n    while (lo < hi) {\n      mid = 1 + (lo + hi >>> 1);\n      if (width(text.slice(0, mid)) < limit) lo = mid;\n      else hi = mid - 1;\n    }\n    return text.slice(0, lo) + ellipsis;\n  }\n}\n\nexport function fontFamily(item, quote) {\n  var font = item.font;\n  return (quote && font\n    ? String(font).replace(/\"/g, '\\'')\n    : font) || 'sans-serif';\n}\n\nexport function font(item, quote) {\n  return '' +\n    (item.fontStyle ? item.fontStyle + ' ' : '') +\n    (item.fontVariant ? item.fontVariant + ' ' : '') +\n    (item.fontWeight ? item.fontWeight + ' ' : '') +\n    fontSize(item) + 'px ' +\n    fontFamily(item, quote);\n}\n\nexport function offset(item) {\n  // perform our own font baseline calculation\n  // why? not all browsers support SVG 1.1 'alignment-baseline' :(\n  // this also ensures consistent layout across renderers\n  var baseline = item.baseline,\n      h = fontSize(item);\n\n  return Math.round(\n    baseline === 'top'         ?  0.79 * h :\n    baseline === 'middle'      ?  0.30 * h :\n    baseline === 'bottom'      ? -0.21 * h :\n    baseline === 'line-top'    ?  0.29 * h + 0.5 * lineHeight(item) :\n    baseline === 'line-bottom' ?  0.29 * h - 0.5 * lineHeight(item) : 0\n  );\n}\n","import Bounds from '../Bounds.js';\nimport {DegToRad, HalfPi} from '../util/constants.js';\nimport {font, lineHeight, offset, textLines, textMetrics, textValue} from '../util/text.js';\nimport {intersectBoxLine} from '../util/intersect.js';\nimport {visit} from '../util/visit.js';\nimport blend from '../util/canvas/blend.js';\nimport fill from '../util/canvas/fill.js';\nimport {pick} from '../util/canvas/pick.js';\nimport stroke from '../util/canvas/stroke.js';\nimport {rotate, translate} from '../util/svg/transform.js';\nimport {isArray} from 'vega-util';\n\nconst textAlign = {\n  'left':   'start',\n  'center': 'middle',\n  'right':  'end'\n};\n\nconst tempBounds = new Bounds();\n\nfunction anchorPoint(item) {\n  var x = item.x || 0,\n      y = item.y || 0,\n      r = item.radius || 0, t;\n\n  if (r) {\n    t = (item.theta || 0) - HalfPi;\n    x += r * Math.cos(t);\n    y += r * Math.sin(t);\n  }\n\n  tempBounds.x1 = x;\n  tempBounds.y1 = y;\n  return tempBounds;\n}\n\nfunction attr(emit, item) {\n  var dx = item.dx || 0,\n      dy = (item.dy || 0) + offset(item),\n      p = anchorPoint(item),\n      x = p.x1,\n      y = p.y1,\n      a = item.angle || 0, t;\n\n  emit('text-anchor', textAlign[item.align] || 'start');\n\n  if (a) {\n    t = translate(x, y) + ' ' + rotate(a);\n    if (dx || dy) t += ' ' + translate(dx, dy);\n  } else {\n    t = translate(x + dx, y + dy);\n  }\n  emit('transform', t);\n}\n\nfunction bound(bounds, item, mode) {\n  var h = textMetrics.height(item),\n      a = item.align,\n      p = anchorPoint(item),\n      x = p.x1,\n      y = p.y1,\n      dx = item.dx || 0,\n      dy = (item.dy || 0) + offset(item) - Math.round(0.8*h), // use 4/5 offset\n      tl = textLines(item),\n      w;\n\n  // get dimensions\n  if (isArray(tl)) {\n    // multi-line text\n    h += lineHeight(item) * (tl.length - 1);\n    w = tl.reduce((w, t) => Math.max(w, textMetrics.width(item, t)), 0);\n  } else {\n    // single-line text\n    w = textMetrics.width(item, tl);\n  }\n\n  // horizontal alignment\n  if (a === 'center') {\n    dx -= (w / 2);\n  } else if (a === 'right') {\n    dx -= w;\n  } else {\n    // left by default, do nothing\n  }\n\n  bounds.set(dx+=x, dy+=y, dx+w, dy+h);\n\n  if (item.angle && !mode) {\n    bounds.rotate(item.angle * DegToRad, x, y);\n  } else if (mode === 2) {\n    return bounds.rotatedPoints(item.angle * DegToRad, x, y);\n  }\n  return bounds;\n}\n\nfunction draw(context, scene, bounds) {\n  visit(scene, item => {\n    var opacity = item.opacity == null ? 1 : item.opacity,\n        p, x, y, i, lh, tl, str;\n\n    if (bounds && !bounds.intersects(item.bounds) || // bounds check\n        opacity === 0 || item.fontSize <= 0 ||\n        item.text == null || item.text.length === 0) return;\n\n    context.font = font(item);\n    context.textAlign = item.align || 'left';\n\n    p = anchorPoint(item);\n    x = p.x1,\n    y = p.y1;\n\n    if (item.angle) {\n      context.save();\n      context.translate(x, y);\n      context.rotate(item.angle * DegToRad);\n      x = y = 0; // reset x, y\n    }\n    x += (item.dx || 0);\n    y += (item.dy || 0) + offset(item);\n\n    tl = textLines(item);\n    blend(context, item);\n    if (isArray(tl)) {\n      lh = lineHeight(item);\n      for (i=0; i<tl.length; ++i) {\n        str = textValue(item, tl[i]);\n        if (item.fill && fill(context, item, opacity)) {\n          context.fillText(str, x, y);\n        }\n        if (item.stroke && stroke(context, item, opacity)) {\n          context.strokeText(str, x, y);\n        }\n        y += lh;\n      }\n    } else {\n      str = textValue(item, tl);\n      if (item.fill && fill(context, item, opacity)) {\n        context.fillText(str, x, y);\n      }\n      if (item.stroke && stroke(context, item, opacity)) {\n        context.strokeText(str, x, y);\n      }\n    }\n\n    if (item.angle) context.restore();\n  });\n}\n\nfunction hit(context, item, x, y, gx, gy) {\n  if (item.fontSize <= 0) return false;\n  if (!item.angle) return true; // bounds sufficient if no rotation\n\n  // project point into space of unrotated bounds\n  var p = anchorPoint(item),\n      ax = p.x1,\n      ay = p.y1,\n      b = bound(tempBounds, item, 1),\n      a = -item.angle * DegToRad,\n      cos = Math.cos(a),\n      sin = Math.sin(a),\n      px = cos * gx - sin * gy + (ax - cos * ax + sin * ay),\n      py = sin * gx + cos * gy + (ay - sin * ax - cos * ay);\n\n  return b.contains(px, py);\n}\n\nfunction intersectText(item, box) {\n  const p = bound(tempBounds, item, 2);\n  return intersectBoxLine(box, p[0], p[1], p[2], p[3])\n      || intersectBoxLine(box, p[0], p[1], p[4], p[5])\n      || intersectBoxLine(box, p[4], p[5], p[6], p[7])\n      || intersectBoxLine(box, p[2], p[3], p[6], p[7]);\n}\n\nexport default {\n  type:   'text',\n  tag:    'text',\n  nested: false,\n  attr:   attr,\n  bound:  bound,\n  draw:   draw,\n  pick:   pick(hit),\n  isect:  intersectText\n};\n","import {trail} from '../path/shapes.js';\nimport {pickTrail} from '../util/pickPath.js';\nimport markMultiItemPath from './markMultiItemPath.js';\n\nexport default markMultiItemPath('trail', trail, pickTrail);\n","import arc from './arc.js';\nimport area from './area.js';\nimport group from './group.js';\nimport image from './image.js';\nimport line from './line.js';\nimport path from './path.js';\nimport rect from './rect.js';\nimport rule from './rule.js';\nimport shape from './shape.js';\nimport symbol from './symbol.js';\nimport text from './text.js';\nimport trail from './trail.js';\n\nexport default {\n  arc:     arc,\n  area:    area,\n  group:   group,\n  image:   image,\n  line:    line,\n  path:    path,\n  rect:    rect,\n  rule:    rule,\n  shape:   shape,\n  symbol:  symbol,\n  text:    text,\n  trail:   trail\n};\n","import Bounds from '../Bounds.js';\nimport marks from '../marks/index.js';\n\nexport default function(item, func, opt) {\n  var type = marks[item.mark.marktype],\n      bound = func || type.bound;\n  if (type.nested) item = item.mark;\n\n  return bound(item.bounds || (item.bounds = new Bounds()), item, opt);\n}\n","import Bounds from '../Bounds.js';\nimport boundItem from './boundItem.js';\nimport marks from '../marks/index.js';\n\nvar DUMMY = {mark: null};\n\nexport default function(mark, bounds, opt) {\n  var type  = marks[mark.marktype],\n      bound = type.bound,\n      items = mark.items,\n      hasItems = items && items.length,\n      i, n, item, b;\n\n  if (type.nested) {\n    if (hasItems) {\n      item = items[0];\n    } else {\n      // no items, fake it\n      DUMMY.mark = mark;\n      item = DUMMY;\n    }\n    b = boundItem(item, bound, opt);\n    bounds = bounds && bounds.union(b) || b;\n    return bounds;\n  }\n\n  bounds = bounds\n    || mark.bounds && mark.bounds.clear()\n    || new Bounds();\n\n  if (hasItems) {\n    for (i=0, n=items.length; i<n; ++i) {\n      bounds.union(boundItem(items[i], bound, opt));\n    }\n  }\n\n  return mark.bounds = bounds;\n}\n","import boundMark from '../bound/boundMark.js';\n\nconst keys = [\n  'marktype', 'name', 'role', 'interactive', 'clip', 'items', 'zindex',\n  'x', 'y', 'width', 'height', 'align', 'baseline',             // layout\n  'fill', 'fillOpacity', 'opacity', 'blend',                    // fill\n  'stroke', 'strokeOpacity', 'strokeWidth', 'strokeCap',        // stroke\n  'strokeDash', 'strokeDashOffset',                             // stroke dash\n  'strokeForeground', 'strokeOffset',                           // group\n  'startAngle', 'endAngle', 'innerRadius', 'outerRadius',       // arc\n  'cornerRadius', 'padAngle',                                   // arc, rect\n  'cornerRadiusTopLeft', 'cornerRadiusTopRight',                // rect, group\n  'cornerRadiusBottomLeft', 'cornerRadiusBottomRight',\n  'interpolate', 'tension', 'orient', 'defined',                // area, line\n  'url', 'aspect', 'smooth',                                    // image\n  'path', 'scaleX', 'scaleY',                                   // path\n  'x2', 'y2',                                                   // rule\n  'size', 'shape',                                              // symbol\n  'text', 'angle', 'theta', 'radius', 'dir', 'dx', 'dy',        // text\n  'ellipsis', 'limit', 'lineBreak', 'lineHeight',\n  'font', 'fontSize', 'fontWeight', 'fontStyle', 'fontVariant', // font\n  'description', 'aria', 'ariaRole', 'ariaRoleDescription'      // aria\n];\n\nexport function sceneToJSON(scene, indent) {\n  return JSON.stringify(scene, keys, indent);\n}\n\nexport function sceneFromJSON(json) {\n  const scene = (typeof json === 'string' ? JSON.parse(json) : json);\n  return initialize(scene);\n}\n\nfunction initialize(scene) {\n  var type = scene.marktype,\n      items = scene.items,\n      parent, i, n;\n\n  if (items) {\n    for (i=0, n=items.length; i<n; ++i) {\n      parent = type ? 'mark' : 'group';\n      items[i][parent] = scene;\n      if (items[i].zindex) items[i][parent].zdirty = true;\n      if ('group' === (type || parent)) initialize(items[i]);\n    }\n  }\n\n  if (type) boundMark(scene);\n  return scene;\n}\n","import Bounds from './Bounds.js';\nimport GroupItem from './GroupItem.js';\nimport {sceneFromJSON, sceneToJSON} from './util/serialize.js';\n\nexport default class Scenegraph {\n  constructor(scene) {\n    if (arguments.length) {\n      this.root = sceneFromJSON(scene);\n    } else {\n      this.root = createMark({\n        marktype: 'group',\n        name: 'root',\n        role: 'frame'\n      });\n      this.root.items = [new GroupItem(this.root)];\n    }\n  }\n\n  toJSON(indent) {\n    return sceneToJSON(this.root, indent || 0);\n  }\n\n  mark(markdef, group, index) {\n    group = group || this.root.items[0];\n    const mark = createMark(markdef, group);\n    group.items[index] = mark;\n    if (mark.zindex) mark.group.zdirty = true;\n    return mark;\n  }\n}\n\n\nfunction createMark(def, group) {\n  const mark = {\n    bounds:      new Bounds(),\n    clip:        !!def.clip,\n    group:       group,\n    interactive: def.interactive === false ? false : true,\n    items:       [],\n    marktype:    def.marktype,\n    name:        def.name || undefined,\n    role:        def.role || undefined,\n    zindex:      def.zindex || 0\n  };\n\n  // add accessibility properties if defined\n  if (def.aria != null) {\n    mark.aria = def.aria;\n  }\n  if (def.description) {\n    mark.description = def.description;\n  }\n\n  return mark;\n}\n","// create a new DOM element\nexport function domCreate(doc, tag, ns) {\n  if (!doc && typeof document !== 'undefined' && document.createElement) {\n    doc = document;\n  }\n  return doc\n    ? (ns ? doc.createElementNS(ns, tag) : doc.createElement(tag))\n    : null;\n}\n\n// find first child element with matching tag\nexport function domFind(el, tag) {\n  tag = tag.toLowerCase();\n  var nodes = el.childNodes, i = 0, n = nodes.length;\n  for (; i<n; ++i) if (nodes[i].tagName.toLowerCase() === tag) {\n    return nodes[i];\n  }\n}\n\n// retrieve child element at given index\n// create & insert if doesn't exist or if tags do not match\nexport function domChild(el, index, tag, ns) {\n  var a = el.childNodes[index], b;\n  if (!a || a.tagName.toLowerCase() !== tag.toLowerCase()) {\n    b = a || null;\n    a = domCreate(el.ownerDocument, tag, ns);\n    el.insertBefore(a, b);\n  }\n  return a;\n}\n\n// remove all child elements at or above the given index\nexport function domClear(el, index) {\n  var nodes = el.childNodes,\n      curr = nodes.length;\n  while (curr > index) el.removeChild(nodes[--curr]);\n  return el;\n}\n\n// generate css class name for mark\nexport function cssClass(mark) {\n  return 'mark-' + mark.marktype\n    + (mark.role ? ' role-' + mark.role : '')\n    + (mark.name ? ' ' + mark.name : '');\n}\n","export default function(event, el) {\n  const rect = el.getBoundingClientRect();\n  return [\n    event.clientX - rect.left - (el.clientLeft || 0),\n    event.clientY - rect.top - (el.clientTop || 0)\n  ];\n}\n","import marks from '../marks/index.js';\nimport point from './point.js';\n\nexport default function(item, event, el, origin) {\n  var mark = item && item.mark,\n      mdef, p;\n\n  if (mark && (mdef = marks[mark.marktype]).tip) {\n    p = point(event, el);\n    p[0] -= origin[0];\n    p[1] -= origin[1];\n    while (item = item.mark.group) {\n      p[0] -= item.x || 0;\n      p[1] -= item.y || 0;\n    }\n    item = mdef.tip(mark.items, p);\n  }\n\n  return item;\n}\n","import {domCreate} from './util/dom.js';\nimport resolveItem from './util/resolveItem.js';\nimport {loader} from 'vega-loader';\n\nexport default class Handler {\n  /**\n   * Create a new Handler instance.\n   * @param {object} [customLoader] - Optional loader instance for\n   *   href URL sanitization. If not specified, a standard loader\n   *   instance will be generated.\n   * @param {function} [customTooltip] - Optional tooltip handler\n   *   function for custom tooltip display.\n   * @constructor\n   */\n  constructor(customLoader, customTooltip) {\n    this._active = null;\n    this._handlers = {};\n    this._loader = customLoader || loader();\n    this._tooltip = customTooltip || defaultTooltip;\n  }\n\n  /**\n   * Initialize a new Handler instance.\n   * @param {DOMElement} el - The containing DOM element for the display.\n   * @param {Array<number>} origin - The origin of the display, in pixels.\n   *   The coordinate system will be translated to this point.\n   * @param {object} [obj] - Optional context object that should serve as\n   *   the \"this\" context for event callbacks.\n   * @return {Handler} - This handler instance.\n   */\n  initialize(el, origin, obj) {\n    this._el = el;\n    this._obj = obj || null;\n    return this.origin(origin);\n  }\n\n  /**\n   * Returns the parent container element for a visualization.\n   * @return {DOMElement} - The containing DOM element.\n   */\n  element() {\n    return this._el;\n  }\n\n  /**\n   * Returns the scene element (e.g., canvas or SVG) of the visualization\n   * Subclasses must override if the first child is not the scene element.\n   * @return {DOMElement} - The scene (e.g., canvas or SVG) element.\n   */\n  canvas() {\n    return this._el && this._el.firstChild;\n  }\n\n  /**\n   * Get / set the origin coordinates of the visualization.\n   */\n  origin(origin) {\n    if (arguments.length) {\n      this._origin = origin || [0, 0];\n      return this;\n    } else {\n      return this._origin.slice();\n    }\n  }\n\n  /**\n   * Get / set the scenegraph root.\n   */\n  scene(scene) {\n    if (!arguments.length) return this._scene;\n    this._scene = scene;\n    return this;\n  }\n\n  /**\n   * Add an event handler. Subclasses should override this method.\n   */\n  on( /*type, handler*/) { }\n\n  /**\n   * Remove an event handler. Subclasses should override this method.\n   */\n  off( /*type, handler*/) { }\n\n  /**\n   * Utility method for finding the array index of an event handler.\n   * @param {Array} h - An array of registered event handlers.\n   * @param {string} type - The event type.\n   * @param {function} handler - The event handler instance to find.\n   * @return {number} - The handler's array index or -1 if not registered.\n   */\n  _handlerIndex(h, type, handler) {\n    for (let i = h ? h.length : 0; --i >= 0;) {\n      if (h[i].type === type && (!handler || h[i].handler === handler)) {\n        return i;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * Returns an array with registered event handlers.\n   * @param {string} [type] - The event type to query. Any annotations\n   *   are ignored; for example, for the argument \"click.foo\", \".foo\" will\n   *   be ignored and the method returns all \"click\" handlers. If type is\n   *   null or unspecified, this method returns handlers for all types.\n   * @return {Array} - A new array containing all registered event handlers.\n   */\n  handlers(type) {\n    const h = this._handlers, a = [];\n    if (type) {\n      a.push(...h[this.eventName(type)]);\n    } else {\n      for (const k in h) { a.push(...h[k]); }\n    }\n    return a;\n  }\n\n  /**\n   * Parses an event name string to return the specific event type.\n   * For example, given \"click.foo\" returns \"click\"\n   * @param {string} name - The input event type string.\n   * @return {string} - A string with the event type only.\n   */\n  eventName(name) {\n    const i = name.indexOf('.');\n    return i < 0 ? name : name.slice(0, i);\n  }\n\n  /**\n   * Handle hyperlink navigation in response to an item.href value.\n   * @param {Event} event - The event triggering hyperlink navigation.\n   * @param {Item} item - The scenegraph item.\n   * @param {string} href - The URL to navigate to.\n   */\n  handleHref(event, item, href) {\n    this._loader\n      .sanitize(href, { context: 'href' })\n      .then(opt => {\n        const e = new MouseEvent(event.type, event), a = domCreate(null, 'a');\n        for (const name in opt) a.setAttribute(name, opt[name]);\n        a.dispatchEvent(e);\n      })\n      .catch(() => { });\n  }\n\n  /**\n   * Handle tooltip display in response to an item.tooltip value.\n   * @param {Event} event - The event triggering tooltip display.\n   * @param {Item} item - The scenegraph item.\n   * @param {boolean} show - A boolean flag indicating whether\n   *   to show or hide a tooltip for the given item.\n   */\n  handleTooltip(event, item, show) {\n    if (item && item.tooltip != null) {\n      item = resolveItem(item, event, this.canvas(), this._origin);\n      const value = (show && item && item.tooltip) || null;\n      this._tooltip.call(this._obj, this, event, item, value);\n    }\n  }\n\n  /**\n   * Returns the size of a scenegraph item and its position relative\n   * to the viewport.\n   * @param {Item} item - The scenegraph item.\n   * @return {object} - A bounding box object (compatible with the\n   *   DOMRect type) consisting of x, y, width, heigh, top, left,\n   *   right, and bottom properties.\n   */\n  getItemBoundingClientRect(item) {\n    const el = this.canvas();\n    if (!el) return;\n\n    const rect = el.getBoundingClientRect(), origin = this._origin, bounds = item.bounds, width = bounds.width(), height = bounds.height();\n\n    let x = bounds.x1 + origin[0] + rect.left, y = bounds.y1 + origin[1] + rect.top;\n\n    // translate coordinate for each parent group\n    while (item.mark && (item = item.mark.group)) {\n      x += item.x || 0;\n      y += item.y || 0;\n    }\n\n    // return DOMRect-compatible bounding box\n    return {\n      x, y, width, height,\n      left: x, top: y, right: x + width, bottom: y + height\n    };\n  }\n}\n\n// The default tooltip display handler.\n// Sets the HTML title attribute on the visualization container.\nfunction defaultTooltip(handler, event, item, value) {\n  handler.element().setAttribute('title', value || '');\n}\n","import ResourceLoader from './ResourceLoader.js';\n\nexport default class Renderer {\n  /**\n   * Create a new Renderer instance.\n   * @param {object} [loader] - Optional loader instance for\n   *   image and href URL sanitization. If not specified, a\n   *   standard loader instance will be generated.\n   * @constructor\n   */\n  constructor(loader) {\n    this._el = null;\n    this._bgcolor = null;\n    this._loader = new ResourceLoader(loader);\n  }\n\n  /**\n   * Initialize a new Renderer instance.\n   * @param {DOMElement} el - The containing DOM element for the display.\n   * @param {number} width - The coordinate width of the display, in pixels.\n   * @param {number} height - The coordinate height of the display, in pixels.\n   * @param {Array<number>} origin - The origin of the display, in pixels.\n   *   The coordinate system will be translated to this point.\n   * @param {number} [scaleFactor=1] - Optional scaleFactor by which to multiply\n   *   the width and height to determine the final pixel size.\n   * @return {Renderer} - This renderer instance.\n   */\n  initialize(el, width, height, origin, scaleFactor) {\n    this._el = el;\n    return this.resize(width, height, origin, scaleFactor);\n  }\n\n  /**\n   * Returns the parent container element for a visualization.\n   * @return {DOMElement} - The containing DOM element.\n   */\n  element() {\n    return this._el;\n  }\n\n  /**\n   * Returns the scene element (e.g., canvas or SVG) of the visualization\n   * Subclasses must override if the first child is not the scene element.\n   * @return {DOMElement} - The scene (e.g., canvas or SVG) element.\n   */\n  canvas() {\n    return this._el && this._el.firstChild;\n  }\n\n  /**\n   * Get / set the background color.\n   */\n  background(bgcolor) {\n    if (arguments.length === 0) return this._bgcolor;\n    this._bgcolor = bgcolor;\n    return this;\n  }\n\n  /**\n   * Resize the display.\n   * @param {number} width - The new coordinate width of the display, in pixels.\n   * @param {number} height - The new coordinate height of the display, in pixels.\n   * @param {Array<number>} origin - The new origin of the display, in pixels.\n   *   The coordinate system will be translated to this point.\n   * @param {number} [scaleFactor=1] - Optional scaleFactor by which to multiply\n   *   the width and height to determine the final pixel size.\n   * @return {Renderer} - This renderer instance;\n   */\n  resize(width, height, origin, scaleFactor) {\n    this._width = width;\n    this._height = height;\n    this._origin = origin || [0, 0];\n    this._scale = scaleFactor || 1;\n    return this;\n  }\n\n  /**\n   * Report a dirty item whose bounds should be redrawn.\n   * This base class method does nothing. Subclasses that perform\n   * incremental should implement this method.\n   * @param {Item} item - The dirty item whose bounds should be redrawn.\n   */\n  dirty( /*item*/) { }\n\n  /**\n   * Render an input scenegraph, potentially with a set of dirty items.\n   * This method will perform an immediate rendering with available resources.\n   * The renderer may also need to perform image loading to perform a complete\n   * render. This process can lead to asynchronous re-rendering of the scene\n   * after this method returns. To receive notification when rendering is\n   * complete, use the renderAsync method instead.\n   * @param {object} scene - The root mark of a scenegraph to render.\n   * @param {Array} markTypes - Array of the mark types to render.\n   *                            If undefined, render all mark types\n   * @return {Renderer} - This renderer instance.\n   */\n  render(scene, markTypes) {\n    const r = this;\n\n    // bind arguments into a render call, and cache it\n    // this function may be subsequently called for async redraw\n    r._call = function () { r._render(scene, markTypes); };\n\n    // invoke the renderer\n    r._call();\n\n    // clear the cached call for garbage collection\n    // async redraws will stash their own copy\n    r._call = null;\n\n    return r;\n  }\n\n  /**\n   * Internal rendering method. Renderer subclasses should override this\n   * method to actually perform rendering.\n   * @param {object} scene - The root mark of a scenegraph to render.\n   * @param {Array} markTypes - Array of the mark types to render.\n   *                            If undefined, render all mark types\n   */\n  _render( /*scene, markTypes*/) {\n    // subclasses to override\n  }\n\n  /**\n   * Asynchronous rendering method. Similar to render, but returns a Promise\n   * that resolves when all rendering is completed. Sometimes a renderer must\n   * perform image loading to get a complete rendering. The returned\n   * Promise will not resolve until this process completes.\n   * @param {object} scene - The root mark of a scenegraph to render.\n   * @param {Array} markTypes - Array of the mark types to render.\n   *                            If undefined, render all mark types\n   * @return {Promise} - A Promise that resolves when rendering is complete.\n   */\n  renderAsync(scene, markTypes) {\n    const r = this.render(scene, markTypes);\n    return this._ready\n      ? this._ready.then(() => r)\n      : Promise.resolve(r);\n  }\n\n  /**\n   * Internal method for asynchronous resource loading.\n   * Proxies method calls to the ImageLoader, and tracks loading\n   * progress to invoke a re-render once complete.\n   * @param {string} method - The method name to invoke on the ImageLoader.\n   * @param {string} uri - The URI for the requested resource.\n   * @return {Promise} - A Promise that resolves to the requested resource.\n   */\n  _load(method, uri) {\n    var r = this, p = r._loader[method](uri);\n\n    if (!r._ready) {\n      // re-render the scene when loading completes\n      const call = r._call;\n      r._ready = r._loader.ready()\n        .then(redraw => {\n          if (redraw) call();\n          r._ready = null;\n        });\n    }\n\n    return p;\n  }\n\n  /**\n   * Sanitize a URL to include as a hyperlink in the rendered scene.\n   * This method proxies a call to ImageLoader.sanitizeURL, but also tracks\n   * image loading progress and invokes a re-render once complete.\n   * @param {string} uri - The URI string to sanitize.\n   * @return {Promise} - A Promise that resolves to the sanitized URL.\n   */\n  sanitizeURL(uri) {\n    return this._load('sanitizeURL', uri);\n  }\n\n  /**\n   * Requests an image to include in the rendered scene.\n   * This method proxies a call to ImageLoader.loadImage, but also tracks\n   * image loading progress and invokes a re-render once complete.\n   * @param {string} uri - The URI string of the image.\n   * @return {Promise} - A Promise that resolves to the loaded Image.\n   */\n  loadImage(uri) {\n    return this._load('loadImage', uri);\n  }\n}\n","export const KeyDownEvent = 'keydown';\nexport const KeyPressEvent = 'keypress';\nexport const KeyUpEvent = 'keyup';\nexport const DragEnterEvent = 'dragenter';\nexport const DragLeaveEvent = 'dragleave';\nexport const DragOverEvent = 'dragover';\nexport const PointerDownEvent = 'pointerdown';\nexport const PointerUpEvent = 'pointerup';\nexport const PointerMoveEvent = 'pointermove';\nexport const PointerOutEvent = 'pointerout';\nexport const PointerOverEvent = 'pointerover';\nexport const MouseDownEvent = 'mousedown';\nexport const MouseUpEvent = 'mouseup';\nexport const MouseMoveEvent = 'mousemove';\nexport const MouseOutEvent = 'mouseout';\nexport const MouseOverEvent = 'mouseover';\nexport const ClickEvent = 'click';\nexport const DoubleClickEvent = 'dblclick';\nexport const WheelEvent = 'wheel';\nexport const MouseWheelEvent = 'mousewheel';\nexport const TouchStartEvent = 'touchstart';\nexport const TouchMoveEvent = 'touchmove';\nexport const TouchEndEvent = 'touchend';\n\nexport const Events = [\n  KeyDownEvent,\n  KeyPressEvent,\n  KeyUpEvent,\n  DragEnterEvent,\n  DragLeaveEvent,\n  DragOverEvent,\n  PointerDownEvent,\n  PointerUpEvent,\n  PointerMoveEvent,\n  PointerOutEvent,\n  PointerOverEvent,\n  MouseDownEvent,\n  MouseUpEvent,\n  MouseMoveEvent,\n  MouseOutEvent,\n  MouseOverEvent,\n  ClickEvent,\n  DoubleClickEvent,\n  WheelEvent,\n  MouseWheelEvent,\n  TouchStartEvent,\n  TouchMoveEvent,\n  TouchEndEvent\n];\n\nexport const TooltipShowEvent = PointerMoveEvent;\n\nexport const TooltipHideEvent = MouseOutEvent;\n\nexport const HrefEvent = ClickEvent;\n","import Handler from './Handler.js';\nimport Marks from './marks/index.js';\nimport {\n  ClickEvent,\n  DragEnterEvent, DragLeaveEvent, DragOverEvent, Events, HrefEvent,\n  MouseDownEvent, MouseMoveEvent, MouseOutEvent, MouseOverEvent,\n  MouseWheelEvent,\n  PointerDownEvent, PointerMoveEvent, PointerOutEvent, PointerOverEvent,\n  TooltipHideEvent, TooltipShowEvent,\n  TouchEndEvent, TouchMoveEvent, TouchStartEvent\n} from './util/events.js';\nimport point from './util/point.js';\nimport {domFind} from './util/dom.js';\n\nexport default class CanvasHandler extends Handler {\n  constructor(loader, tooltip) {\n    super(loader, tooltip);\n    this._down = null;\n    this._touch = null;\n    this._first = true;\n    this._events = {};\n\n    // supported events\n    this.events = Events;\n    this.pointermove = move(\n      [PointerMoveEvent, MouseMoveEvent],\n      [PointerOverEvent, MouseOverEvent],\n      [PointerOutEvent, MouseOutEvent]\n    );\n\n    this.dragover = move([DragOverEvent], [DragEnterEvent], [DragLeaveEvent]),\n\n    this.pointerout = inactive([PointerOutEvent, MouseOutEvent]);\n    this.dragleave = inactive([DragLeaveEvent]);\n  }\n\n  initialize(el, origin, obj) {\n    this._canvas = el && domFind(el, 'canvas');\n\n    // add minimal events required for proper state management\n    [\n      ClickEvent, MouseDownEvent,\n      PointerDownEvent, PointerMoveEvent, PointerOutEvent,\n      DragLeaveEvent\n    ].forEach(type => eventListenerCheck(this, type));\n\n    return super.initialize(el, origin, obj);\n  }\n\n  // return the backing canvas instance\n  canvas() {\n    return this._canvas;\n  }\n\n  // retrieve the current canvas context\n  context() {\n    return this._canvas.getContext('2d');\n  }\n\n\n  // to keep old versions of firefox happy\n  DOMMouseScroll(evt) {\n    this.fire(MouseWheelEvent, evt);\n  }\n\n  pointerdown(evt) {\n    this._down = this._active;\n    this.fire(PointerDownEvent, evt);\n  }\n\n  mousedown(evt) {\n    this._down = this._active;\n    this.fire(MouseDownEvent, evt);\n  }\n\n  click(evt) {\n    if (this._down === this._active) {\n      this.fire(ClickEvent, evt);\n      this._down = null;\n    }\n  }\n\n  touchstart(evt) {\n    this._touch = this.pickEvent(evt.changedTouches[0]);\n\n    if (this._first) {\n      this._active = this._touch;\n      this._first = false;\n    }\n\n    this.fire(TouchStartEvent, evt, true);\n  }\n\n  touchmove(evt) {\n    this.fire(TouchMoveEvent, evt, true);\n  }\n\n  touchend(evt) {\n    this.fire(TouchEndEvent, evt, true);\n    this._touch = null;\n  }\n\n  // fire an event\n  fire(type, evt, touch) {\n    const a = touch ? this._touch : this._active,\n          h = this._handlers[type];\n\n    // set event type relative to scenegraph items\n    evt.vegaType = type;\n\n    // handle hyperlinks and tooltips first\n    if (type === HrefEvent && a && a.href) {\n      this.handleHref(evt, a, a.href);\n    } else if (type === TooltipShowEvent || type === TooltipHideEvent) {\n      this.handleTooltip(evt, a, type !== TooltipHideEvent);\n    }\n\n    // invoke all registered handlers\n    if (h) {\n      for (let i=0, len=h.length; i<len; ++i) {\n        h[i].handler.call(this._obj, evt, a);\n      }\n    }\n  }\n\n  // add an event handler\n  on(type, handler) {\n    const name = this.eventName(type),\n          h = this._handlers,\n          i = this._handlerIndex(h[name], type, handler);\n\n    if (i < 0) {\n      eventListenerCheck(this, type);\n      (h[name] || (h[name] = [])).push({\n        type:    type,\n        handler: handler\n      });\n    }\n\n    return this;\n  }\n\n  // remove an event handler\n  off(type, handler) {\n    const name = this.eventName(type),\n          h = this._handlers[name],\n          i = this._handlerIndex(h, type, handler);\n\n    if (i >= 0) {\n      h.splice(i, 1);\n    }\n\n    return this;\n  }\n\n  pickEvent(evt) {\n    const p = point(evt, this._canvas),\n          o = this._origin;\n    return this.pick(this._scene, p[0], p[1], p[0] - o[0], p[1] - o[1]);\n  }\n\n  // find the scenegraph item at the current pointer position\n  // x, y -- the absolute x, y pointer coordinates on the canvas element\n  // gx, gy -- the relative coordinates within the current group\n  pick(scene, x, y, gx, gy) {\n    const g = this.context(),\n          mark = Marks[scene.marktype];\n    return mark.pick.call(this, g, scene, x, y, gx, gy);\n  }\n\n}\n\nconst eventBundle = type => (\n  type === TouchStartEvent ||\n  type === TouchMoveEvent ||\n  type === TouchEndEvent\n)\n? [TouchStartEvent, TouchMoveEvent, TouchEndEvent]\n: [type];\n\n// lazily add listeners to the canvas as needed\nfunction eventListenerCheck(handler, type) {\n  eventBundle(type).forEach(_ => addEventListener(handler, _));\n}\n\nfunction addEventListener(handler, type) {\n  const canvas = handler.canvas();\n  if (canvas && !handler._events[type]) {\n    handler._events[type] = 1;\n    canvas.addEventListener(type, handler[type]\n      ? evt => handler[type](evt)\n      : evt => handler.fire(type, evt)\n    );\n  }\n}\n\nfunction fireAll(handler, types, event) {\n  types.forEach(type => handler.fire(type, event));\n}\n\nfunction move(moveEvents, overEvents, outEvents) {\n  return function(evt) {\n    const a = this._active,\n          p = this.pickEvent(evt);\n\n    if (p === a) {\n      // active item and picked item are the same\n      fireAll(this, moveEvents, evt); // fire move\n    } else {\n      // active item and picked item are different\n      if (!a || !a.exit) {\n        // fire out for prior active item\n        // suppress if active item was removed from scene\n        fireAll(this, outEvents, evt);\n      }\n      this._active = p; // set new active item\n      fireAll(this, overEvents, evt); // fire over for new active item\n      fireAll(this, moveEvents, evt); // fire move for new active item\n    }\n  };\n}\n\nfunction inactive(types) {\n  return function(evt) {\n    fireAll(this, types, evt);\n    this._active = null;\n  };\n}\n","function devicePixelRatio() {\n  return typeof window !== 'undefined' ? window.devicePixelRatio || 1 : 1;\n}\n\nexport default function(canvas, width, height, origin, scaleFactor, opt) {\n  const inDOM = typeof HTMLElement !== 'undefined'\n              && canvas instanceof HTMLElement\n              && canvas.parentNode != null,\n        context = canvas.getContext('2d'),\n        ratio = inDOM ? devicePixelRatio() : scaleFactor;\n\n  canvas.width = width * ratio;\n  canvas.height = height * ratio;\n\n  for (const key in opt) {\n    context[key] = opt[key];\n  }\n\n  if (inDOM && ratio !== 1) {\n    canvas.style.width = width + 'px';\n    canvas.style.height = height + 'px';\n  }\n\n  context.pixelRatio = ratio;\n  context.setTransform(\n    ratio, 0, 0, ratio,\n    ratio * origin[0],\n    ratio * origin[1]\n  );\n\n  return canvas;\n}\n","import Renderer from './Renderer.js';\nimport Bounds from './Bounds.js';\nimport marks from './marks/index.js';\n\nimport {domClear} from './util/dom.js';\nimport clip from './util/canvas/clip.js';\nimport resize from './util/canvas/resize.js';\nimport {canvas} from 'vega-canvas';\nimport {error} from 'vega-util';\n\nexport default class CanvasRenderer extends Renderer {\n  constructor(loader) {\n    super(loader);\n    this._options = {};\n    this._redraw = false;\n    this._dirty = new Bounds();\n    this._tempb = new Bounds();\n  }\n\n  initialize(el, width, height, origin, scaleFactor, options) {\n    this._options = options || {};\n\n    this._canvas = this._options.externalContext\n      ? null\n      : canvas(1, 1, this._options.type); // instantiate a small canvas\n\n    if (el && this._canvas) {\n      domClear(el, 0).appendChild(this._canvas);\n      this._canvas.setAttribute('class', 'marks');\n    }\n\n    // this method will invoke resize to size the canvas appropriately\n    return super.initialize(el, width, height, origin, scaleFactor);\n  }\n\n  resize(width, height, origin, scaleFactor) {\n    super.resize(width, height, origin, scaleFactor);\n\n    if (this._canvas) {\n      // configure canvas size and transform\n      resize(this._canvas, this._width, this._height,\n        this._origin, this._scale, this._options.context);\n    } else {\n      // external context needs to be scaled and positioned to origin\n      const ctx = this._options.externalContext;\n      if (!ctx) error('CanvasRenderer is missing a valid canvas or context');\n      ctx.scale(this._scale, this._scale);\n      ctx.translate(this._origin[0], this._origin[1]);\n    }\n\n    this._redraw = true;\n    return this;\n  }\n\n  canvas() {\n    return this._canvas;\n  }\n\n  context() {\n    return this._options.externalContext\n      || (this._canvas ? this._canvas.getContext('2d') : null);\n  }\n\n  dirty(item) {\n    const b = this._tempb.clear().union(item.bounds);\n    let g = item.mark.group;\n\n    while (g) {\n      b.translate(g.x || 0, g.y || 0);\n      g = g.mark.group;\n    }\n\n    this._dirty.union(b);\n  }\n\n  _render(scene, markTypes) {\n    const g = this.context(),\n          o = this._origin,\n          w = this._width,\n          h = this._height,\n          db = this._dirty,\n          vb = viewBounds(o, w, h);\n\n    // setup\n    g.save();\n    const b = this._redraw || db.empty()\n      ? (this._redraw = false, vb.expand(1))\n      : clipToBounds(g, vb.intersect(db), o);\n\n    this.clear(-o[0], -o[1], w, h);\n\n    // render\n    this.draw(g, scene, b, markTypes);\n\n    // takedown\n    g.restore();\n    db.clear();\n\n    return this;\n  }\n\n  draw(ctx, scene, bounds, markTypes) {\n    if (scene.marktype !== 'group' && markTypes != null && !markTypes.includes(scene.marktype)) {\n      return;\n    }\n\n    const mark = marks[scene.marktype];\n    if (scene.clip) clip(ctx, scene);\n    mark.draw.call(this, ctx, scene, bounds, markTypes);\n    if (scene.clip) ctx.restore();\n  }\n\n  clear(x, y, w, h) {\n    const opt = this._options,\n          g = this.context();\n\n    if (opt.type !== 'pdf' && !opt.externalContext) {\n      // calling clear rect voids vector output in pdf mode\n      // and could remove external context content (#2615)\n      g.clearRect(x, y, w, h);\n    }\n\n    if (this._bgcolor != null) {\n      g.fillStyle = this._bgcolor;\n      g.fillRect(x, y, w, h);\n    }\n  }\n}\n\nconst viewBounds = (origin, width, height) => new Bounds()\n  .set(0, 0, width, height)\n  .translate(-origin[0], -origin[1]);\n\nfunction clipToBounds(g, b, origin) {\n  // expand bounds by 1 pixel, then round to pixel boundaries\n  b.expand(1).round();\n\n  // align to base pixel grid in case of non-integer scaling (#2425)\n  if (g.pixelRatio % 1) {\n    b.scale(g.pixelRatio).round().scale(1 / g.pixelRatio);\n  }\n\n  // to avoid artifacts translate if origin has fractional pixels\n  b.translate(-(origin[0] % 1), -(origin[1] % 1));\n\n  // set clip path\n  g.beginPath();\n  g.rect(b.x1, b.y1, b.width(), b.height());\n  g.clip();\n\n  return b;\n}\n","import Handler from './Handler.js';\nimport {domFind} from './util/dom.js';\nimport {HrefEvent, TooltipHideEvent, TooltipShowEvent} from './util/events.js';\n\nexport default class SVGHandler extends Handler {\n  constructor(loader, tooltip) {\n    super(loader, tooltip);\n    const h = this;\n    h._hrefHandler = listener(h, (evt, item) => {\n      if (item && item.href) h.handleHref(evt, item, item.href);\n    });\n    h._tooltipHandler = listener(h, (evt, item) => {\n      h.handleTooltip(evt, item, evt.type !== TooltipHideEvent);\n    });\n  }\n\n  initialize(el, origin, obj) {\n    let svg = this._svg;\n    if (svg) {\n      svg.removeEventListener(HrefEvent, this._hrefHandler);\n      svg.removeEventListener(TooltipShowEvent, this._tooltipHandler);\n      svg.removeEventListener(TooltipHideEvent, this._tooltipHandler);\n    }\n    this._svg = svg = el && domFind(el, 'svg');\n    if (svg) {\n      svg.addEventListener(HrefEvent, this._hrefHandler);\n      svg.addEventListener(TooltipShowEvent, this._tooltipHandler);\n      svg.addEventListener(TooltipHideEvent, this._tooltipHandler);\n    }\n    return super.initialize(el, origin, obj);\n  }\n\n  canvas() {\n    return this._svg;\n  }\n\n  // add an event handler\n  on(type, handler) {\n    const name = this.eventName(type),\n          h = this._handlers,\n          i = this._handlerIndex(h[name], type, handler);\n\n    if (i < 0) {\n      const x = {\n        type,\n        handler,\n        listener: listener(this, handler)\n      };\n\n      (h[name] || (h[name] = [])).push(x);\n      if (this._svg) {\n        this._svg.addEventListener(name, x.listener);\n      }\n    }\n\n    return this;\n  }\n\n  // remove an event handler\n  off(type, handler) {\n    const name = this.eventName(type),\n          h = this._handlers[name],\n          i = this._handlerIndex(h, type, handler);\n\n    if (i >= 0) {\n      if (this._svg) {\n        this._svg.removeEventListener(name, h[i].listener);\n      }\n      h.splice(i, 1);\n    }\n\n    return this;\n  }\n}\n\n// wrap an event listener for the SVG DOM\nconst listener = (context, handler) => evt => {\n  let item = evt.target.__data__;\n  item = Array.isArray(item) ? item[0] : item;\n  evt.vegaType = evt.type;\n  handler.call(context._obj, evt, item);\n};\n","import {domainCaption, isDiscrete} from 'vega-scale';\nimport {array, peek, toSet} from 'vega-util';\n\nconst ARIA_HIDDEN = 'aria-hidden';\nconst ARIA_LABEL = 'aria-label';\nconst ARIA_ROLE = 'role';\nconst ARIA_ROLEDESCRIPTION = 'aria-roledescription';\nconst GRAPHICS_OBJECT = 'graphics-object';\nconst GRAPHICS_SYMBOL = 'graphics-symbol';\n\nconst bundle = (role, roledesc, label) => ({\n  [ARIA_ROLE]: role,\n  [ARIA_ROLEDESCRIPTION]: roledesc,\n  [ARIA_LABEL]: label || undefined\n});\n\n// these roles are covered by related roles\n// we can ignore them, no need to generate attributes\nconst AriaIgnore = toSet([\n  'axis-domain',\n  'axis-grid',\n  'axis-label',\n  'axis-tick',\n  'axis-title',\n  'legend-band',\n  'legend-entry',\n  'legend-gradient',\n  'legend-label',\n  'legend-title',\n  'legend-symbol',\n  'title'\n]);\n\n// aria attribute generators for guide roles\nconst AriaGuides = {\n  'axis': {desc: 'axis', caption: axisCaption},\n  'legend': {desc: 'legend', caption: legendCaption},\n  'title-text': {\n    desc: 'title',\n    caption: item => `Title text '${titleCaption(item)}'`\n  },\n  'title-subtitle': {\n    desc: 'subtitle',\n    caption: item => `Subtitle text '${titleCaption(item)}'`\n  }\n};\n\n// aria properties generated for mark item encoding channels\nexport const AriaEncode = {\n  ariaRole: ARIA_ROLE,\n  ariaRoleDescription: ARIA_ROLEDESCRIPTION,\n  description: ARIA_LABEL\n};\n\nexport function ariaItemAttributes(emit, item) {\n  const hide = item.aria === false;\n  emit(ARIA_HIDDEN, hide || undefined);\n\n  if (hide || item.description == null) {\n    for (const prop in AriaEncode) {\n      emit(AriaEncode[prop], undefined);\n    }\n  } else {\n    const type = item.mark.marktype;\n    emit(\n      ARIA_LABEL,\n      item.description\n    );\n    emit(\n      ARIA_ROLE,\n      item.ariaRole || (type === 'group' ? GRAPHICS_OBJECT : GRAPHICS_SYMBOL)\n    );\n    emit(\n      ARIA_ROLEDESCRIPTION,\n      item.ariaRoleDescription || `${type} mark`\n    );\n  }\n}\n\nexport function ariaMarkAttributes(mark) {\n  return mark.aria === false ? { [ARIA_HIDDEN]: true }\n    : AriaIgnore[mark.role] ? null\n    : AriaGuides[mark.role] ? ariaGuide(mark, AriaGuides[mark.role])\n    : ariaMark(mark);\n}\n\nfunction ariaMark(mark) {\n  const type = mark.marktype;\n  const recurse = (\n    type === 'group' ||\n    type === 'text' ||\n    mark.items.some(_ => _.description != null && _.aria !== false)\n  );\n  return bundle(\n    recurse ? GRAPHICS_OBJECT : GRAPHICS_SYMBOL,\n    `${type} mark container`,\n    mark.description\n  );\n}\n\nfunction ariaGuide(mark, opt) {\n  try {\n    const item = mark.items[0],\n          caption = opt.caption || (() => '');\n    return bundle(\n      opt.role || GRAPHICS_SYMBOL,\n      opt.desc,\n      item.description || caption(item)\n    );\n  } catch (err) {\n    return null;\n  }\n}\n\nfunction titleCaption(item) {\n  return array(item.text).join(' ');\n}\n\nfunction axisCaption(item) {\n  const datum = item.datum,\n        orient = item.orient,\n        title = datum.title ? extractTitle(item) : null,\n        ctx = item.context,\n        scale = ctx.scales[datum.scale].value,\n        locale = ctx.dataflow.locale(),\n        type = scale.type,\n        xy = (orient === 'left' || orient === 'right') ? 'Y' : 'X';\n\n  return `${xy}-axis`\n    + (title ? ` titled '${title}'` : '')\n    + ` for a ${isDiscrete(type) ? 'discrete' : type} scale`\n    + ` with ${domainCaption(locale, scale, item)}`;\n}\n\nfunction legendCaption(item) {\n  const datum = item.datum,\n        title = datum.title ? extractTitle(item) : null,\n        type = `${datum.type || ''} legend`.trim(),\n        scales = datum.scales,\n        props = Object.keys(scales),\n        ctx = item.context,\n        scale = ctx.scales[scales[props[0]]].value,\n        locale = ctx.dataflow.locale();\n\n  return capitalize(type)\n    + (title ? ` titled '${title}'` : '')\n    + ` for ${channelCaption(props)}`\n    + ` with ${domainCaption(locale, scale, item)}`;\n}\n\nfunction extractTitle(item) {\n  try {\n    return array(peek(item.items).items[0].text).join(' ');\n  } catch (err) {\n    return null;\n  }\n}\n\nfunction channelCaption(props) {\n  props = props.map(p => p + (p === 'fill' || p === 'stroke' ? ' color' : ''));\n  return props.length < 2 ? props[0]\n    : props.slice(0, -1).join(', ') + ' and ' + peek(props);\n}\n\nfunction capitalize(s) {\n  return s.length ? s[0].toUpperCase() + s.slice(1) : s;\n}\n","const innerText = val => (val + '')\n  .replace(/&/g, '&amp;')\n  .replace(/</g, '&lt;')\n  .replace(/>/g, '&gt;');\n\nconst attrText = val => innerText(val)\n  .replace(/\"/g, '&quot;')\n  .replace(/\\t/g, '&#x9;')\n  .replace(/\\n/g, '&#xA;')\n  .replace(/\\r/g, '&#xD;');\n\nexport function markup() {\n  let buf = '',\n      outer = '',\n      inner = '';\n\n  const stack = [],\n        clear = () => outer = inner = '',\n        push = tag => {\n          if (outer) { buf += `${outer}>${inner}`; clear(); }\n          stack.push(tag);\n        },\n        attr = (name, value) => {\n          if (value != null) outer += ` ${name}=\"${attrText(value)}\"`;\n          return m;\n        },\n\n        m = {\n          open(tag, ...attrs) {\n            push(tag);\n            outer = '<' + tag;\n            for (const set of attrs) {\n              for (const key in set) attr(key, set[key]);\n            }\n            return m;\n          },\n          close() {\n            const tag = stack.pop();\n            if (outer) {\n              buf += outer + (inner\n                ? `>${inner}</${tag}>`\n                : '/>');\n            } else {\n              buf += `</${tag}>`;\n            }\n            clear();\n            return m;\n          },\n          attr,\n          text: t => (inner += innerText(t), m),\n          toString: () => buf\n        };\n\n  return m;\n}\n\nexport const serializeXML = node =>\n  _serialize(markup(), node) + '';\n\nfunction _serialize(m, node) {\n  m.open(node.tagName);\n\n  if (node.hasAttributes()) {\n    const attrs = node.attributes,\n          n = attrs.length;\n    for (let i=0; i<n; ++i) {\n      m.attr(attrs[i].name, attrs[i].value);\n    }\n  }\n\n  if (node.hasChildNodes()) {\n    const children = node.childNodes;\n\n    for (const child of children) {\n      child.nodeType === 3 // text node\n        ? m.text(child.nodeValue)\n        : _serialize(m, child);\n    }\n  }\n\n  return m.close();\n}\n","export const stylesAttr = {\n  fill:             'fill',\n  fillOpacity:      'fill-opacity',\n  stroke:           'stroke',\n  strokeOpacity:    'stroke-opacity',\n  strokeWidth:      'stroke-width',\n  strokeCap:        'stroke-linecap',\n  strokeJoin:       'stroke-linejoin',\n  strokeDash:       'stroke-dasharray',\n  strokeDashOffset: 'stroke-dashoffset',\n  strokeMiterLimit: 'stroke-miterlimit',\n  opacity:          'opacity'\n};\n\nexport const stylesCss = {\n  blend:            'mix-blend-mode'\n};\n\n// ensure miter limit default is consistent with canvas (#2498)\nexport const rootAttributes = {\n  'fill': 'none',\n  'stroke-miterlimit': 10\n};\n","import Renderer from './Renderer.js';\nimport {gradientRef, isGradient, patternPrefix} from './Gradient.js';\nimport marks from './marks/index.js';\nimport {ariaItemAttributes, ariaMarkAttributes} from './util/aria.js';\nimport {cssClass, domChild, domClear, domCreate} from './util/dom.js';\nimport {serializeXML} from './util/markup.js';\nimport {fontFamily, fontSize, lineHeight, textLines, textValue} from './util/text.js';\nimport {visit} from './util/visit.js';\nimport clip from './util/svg/clip.js';\nimport metadata from './util/svg/metadata.js';\nimport {rootAttributes, stylesAttr, stylesCss} from './util/svg/styles.js';\nimport {isArray} from 'vega-util';\n\nconst RootIndex = 0,\n      xmlns = 'http://www.w3.org/2000/xmlns/',\n      svgns = metadata.xmlns;\n\nexport default class SVGRenderer extends Renderer {\n  constructor(loader) {\n    super(loader);\n    this._dirtyID = 0;\n    this._dirty = [];\n    this._svg = null;\n    this._root = null;\n    this._defs = null;\n  }\n\n  /**\n   * Initialize a new SVGRenderer instance.\n   * @param {DOMElement} el - The containing DOM element for the display.\n   * @param {number} width - The coordinate width of the display, in pixels.\n   * @param {number} height - The coordinate height of the display, in pixels.\n   * @param {Array<number>} origin - The origin of the display, in pixels.\n   *   The coordinate system will be translated to this point.\n   * @param {number} [scaleFactor=1] - Optional scaleFactor by which to multiply\n   *   the width and height to determine the final pixel size.\n   * @return {SVGRenderer} - This renderer instance.\n   */\n  initialize(el, width, height, origin, scaleFactor) {\n    // create the svg definitions cache\n    this._defs = {};\n    this._clearDefs();\n\n    if (el) {\n      this._svg = domChild(el, 0, 'svg', svgns);\n      this._svg.setAttributeNS(xmlns, 'xmlns', svgns);\n      this._svg.setAttributeNS(xmlns, 'xmlns:xlink', metadata['xmlns:xlink']);\n      this._svg.setAttribute('version', metadata['version']);\n      this._svg.setAttribute('class', 'marks');\n      domClear(el, 1);\n\n      // set the svg root group\n      this._root = domChild(this._svg, RootIndex, 'g', svgns);\n      setAttributes(this._root, rootAttributes);\n\n      // ensure no additional child elements\n      domClear(this._svg, RootIndex + 1);\n    }\n\n    // set background color if defined\n    this.background(this._bgcolor);\n\n    return super.initialize(el, width, height, origin, scaleFactor);\n  }\n\n  /**\n   * Get / set the background color.\n   */\n  background(bgcolor) {\n    if (arguments.length && this._svg) {\n      this._svg.style.setProperty('background-color', bgcolor);\n    }\n    return super.background(...arguments);\n  }\n\n  /**\n   * Resize the display.\n   * @param {number} width - The new coordinate width of the display, in pixels.\n   * @param {number} height - The new coordinate height of the display, in pixels.\n   * @param {Array<number>} origin - The new origin of the display, in pixels.\n   *   The coordinate system will be translated to this point.\n   * @param {number} [scaleFactor=1] - Optional scaleFactor by which to multiply\n   *   the width and height to determine the final pixel size.\n   * @return {SVGRenderer} - This renderer instance;\n   */\n  resize(width, height, origin, scaleFactor) {\n    super.resize(width, height, origin, scaleFactor);\n\n    if (this._svg) {\n      setAttributes(this._svg, {\n        width: this._width * this._scale,\n        height: this._height * this._scale,\n        viewBox: `0 0 ${this._width} ${this._height}`\n      });\n      this._root.setAttribute('transform', `translate(${this._origin})`);\n    }\n\n    this._dirty = [];\n\n    return this;\n  }\n\n  /**\n   * Returns the SVG element of the visualization.\n   * @return {DOMElement} - The SVG element.\n   */\n  canvas() {\n    return this._svg;\n  }\n\n  /**\n   * Returns an SVG text string for the rendered content,\n   * or null if this renderer is currently headless.\n   */\n  svg() {\n    const svg = this._svg,\n          bg = this._bgcolor;\n\n    if (!svg) return null;\n\n    let node;\n    if (bg) {\n      svg.removeAttribute('style');\n      node = domChild(svg, RootIndex, 'rect', svgns);\n      setAttributes(node, {width: this._width, height: this._height, fill: bg});\n    }\n\n    const text = serializeXML(svg);\n\n    if (bg) {\n      svg.removeChild(node);\n      this._svg.style.setProperty('background-color', bg);\n    }\n\n    return text;\n  }\n\n  /**\n   * Internal rendering method.\n   * @param {object} scene - The root mark of a scenegraph to render.\n   * @param {Array} markTypes - Array of the mark types to render.\n   *                            If undefined, render all mark types\n   */\n  _render(scene, markTypes) {\n    // perform spot updates and re-render markup\n    if (this._dirtyCheck()) {\n      if (this._dirtyAll) this._clearDefs();\n      this.mark(this._root, scene, undefined, markTypes);\n      domClear(this._root, 1);\n    }\n\n    this.defs();\n\n    this._dirty = [];\n    ++this._dirtyID;\n\n    return this;\n  }\n\n  // -- Manage rendering of items marked as dirty --\n\n  /**\n   * Flag a mark item as dirty.\n   * @param {Item} item - The mark item.\n   */\n  dirty(item) {\n    if (item.dirty !== this._dirtyID) {\n      item.dirty = this._dirtyID;\n      this._dirty.push(item);\n    }\n  }\n\n  /**\n   * Check if a mark item is considered dirty.\n   * @param {Item} item - The mark item.\n   */\n  isDirty(item) {\n    return this._dirtyAll\n      || !item._svg\n      || !item._svg.ownerSVGElement\n      || item.dirty === this._dirtyID;\n  }\n\n  /**\n   * Internal method to check dirty status and, if possible,\n   * make targetted updates without a full rendering pass.\n   */\n  _dirtyCheck() {\n    this._dirtyAll = true;\n    const items = this._dirty;\n    if (!items.length || !this._dirtyID) return true;\n\n    const id = ++this._dirtyID;\n    let item, mark, type, mdef, i, n, o;\n\n    for (i=0, n=items.length; i<n; ++i) {\n      item = items[i];\n      mark = item.mark;\n\n      if (mark.marktype !== type) {\n        // memoize mark instance lookup\n        type = mark.marktype;\n        mdef = marks[type];\n      }\n\n      if (mark.zdirty && mark.dirty !== id) {\n        this._dirtyAll = false;\n        dirtyParents(item, id);\n        mark.items.forEach(i => { i.dirty = id; });\n      }\n      if (mark.zdirty) continue; // handle in standard drawing pass\n\n      if (item.exit) { // EXIT\n        if (mdef.nested && mark.items.length) {\n          // if nested mark with remaining points, update instead\n          o = mark.items[0];\n          if (o._svg) this._update(mdef, o._svg, o);\n        } else if (item._svg) {\n          // otherwise remove from DOM\n          o = item._svg.parentNode;\n          if (o) o.removeChild(item._svg);\n        }\n        item._svg = null;\n        continue;\n      }\n\n      item = (mdef.nested ? mark.items[0] : item);\n      if (item._update === id) continue; // already visited\n\n      if (!item._svg || !item._svg.ownerSVGElement) {\n        // ENTER\n        this._dirtyAll = false;\n        dirtyParents(item, id);\n      } else {\n        // IN-PLACE UPDATE\n        this._update(mdef, item._svg, item);\n      }\n      item._update = id;\n    }\n    return !this._dirtyAll;\n  }\n\n  // -- Construct & maintain scenegraph to SVG mapping ---\n\n  /**\n   * Render a set of mark items.\n   * @param {SVGElement} el - The parent element in the SVG tree.\n   * @param {object} scene - The mark parent to render.\n   * @param {SVGElement} prev - The previous sibling in the SVG tree.\n   * @param {Array} markTypes - Array of the mark types to render.\n   *                            If undefined, render all mark types\n   */\n  mark(el, scene, prev, markTypes) {\n    if (!this.isDirty(scene)) {\n      return scene._svg;\n    }\n\n    const svg = this._svg,\n          markType = scene.marktype,\n          mdef = marks[markType],\n          events = scene.interactive === false ? 'none' : null,\n          isGroup = mdef.tag === 'g';\n\n    const parent = bind(scene, el, prev, 'g', svg);\n    if (markType !== 'group' && markTypes != null && !markTypes.includes(markType)) {\n      domClear(parent, 0);\n      return scene._svg;\n    }\n\n    parent.setAttribute('class', cssClass(scene));\n\n    // apply aria attributes to parent container element\n    const aria = ariaMarkAttributes(scene);\n    for (const key in aria) setAttribute(parent, key, aria[key]);\n\n    if (!isGroup) {\n      setAttribute(parent, 'pointer-events', events);\n    }\n    setAttribute(parent, 'clip-path',\n      scene.clip ? clip(this, scene, scene.group) : null);\n\n    let sibling = null,\n        i = 0;\n\n    const process = item => {\n      const dirty = this.isDirty(item),\n            node = bind(item, parent, sibling, mdef.tag, svg);\n\n      if (dirty) {\n        this._update(mdef, node, item);\n        if (isGroup) recurse(this, node, item, markTypes);\n      }\n\n      sibling = node;\n      ++i;\n    };\n\n    if (mdef.nested) {\n      if (scene.items.length) process(scene.items[0]);\n    } else {\n      visit(scene, process);\n    }\n\n    domClear(parent, i);\n    return parent;\n  }\n\n  /**\n   * Update the attributes of an SVG element for a mark item.\n   * @param {object} mdef - The mark definition object\n   * @param {SVGElement} el - The SVG element.\n   * @param {Item} item - The mark item.\n   */\n  _update(mdef, el, item) {\n    // set dom element and values cache\n    // provides access to emit method\n    element = el;\n    values = el.__values__;\n\n    // apply aria-specific properties\n    ariaItemAttributes(emit, item);\n\n    // apply svg attributes\n    mdef.attr(emit, item, this);\n\n    // some marks need special treatment\n    const extra = mark_extras[mdef.type];\n    if (extra) extra.call(this, mdef, el, item);\n\n    // apply svg style attributes\n    // note: element state may have been modified by 'extra' method\n    if (element) this.style(element, item);\n  }\n\n  /**\n   * Update the presentation attributes of an SVG element for a mark item.\n   * @param {SVGElement} el - The SVG element.\n   * @param {Item} item - The mark item.\n   */\n  style(el, item) {\n    if (item == null) return;\n\n    for (const prop in stylesAttr) {\n      let value = prop === 'font' ? fontFamily(item) : item[prop];\n      if (value === values[prop]) continue;\n\n      const name = stylesAttr[prop];\n      if (value == null) {\n        el.removeAttribute(name);\n      } else {\n        if (isGradient(value)) {\n          value = gradientRef(value, this._defs.gradient, href());\n        }\n        el.setAttribute(name, value + '');\n      }\n\n      values[prop] = value;\n    }\n\n    for (const prop in stylesCss) {\n      setStyle(el, stylesCss[prop], item[prop]);\n    }\n  }\n\n  /**\n   * Render SVG defs, as needed.\n   * Must be called *after* marks have been processed to ensure the\n   * collected state is current and accurate.\n   */\n  defs() {\n    const svg = this._svg,\n          defs = this._defs;\n\n    let el = defs.el,\n        index = 0;\n\n    for (const id in defs.gradient) {\n      if (!el) defs.el = (el = domChild(svg, RootIndex + 1, 'defs', svgns));\n      index = updateGradient(el, defs.gradient[id], index);\n    }\n\n    for (const id in defs.clipping) {\n      if (!el) defs.el = (el = domChild(svg, RootIndex + 1, 'defs', svgns));\n      index = updateClipping(el, defs.clipping[id], index);\n    }\n\n    // clean-up\n    if (el) {\n      index === 0\n        ? (svg.removeChild(el), defs.el = null)\n        : domClear(el, index);\n    }\n  }\n\n  /**\n   * Clear defs caches.\n   */\n  _clearDefs() {\n    const def = this._defs;\n    def.gradient = {};\n    def.clipping = {};\n  }\n}\n\n// mark ancestor chain with a dirty id\nfunction dirtyParents(item, id) {\n  for (; item && item.dirty !== id; item=item.mark.group) {\n    item.dirty = id;\n    if (item.mark && item.mark.dirty !== id) {\n      item.mark.dirty = id;\n    } else return;\n  }\n}\n\n// update gradient definitions\nfunction updateGradient(el, grad, index) {\n  let i, n, stop;\n\n  if (grad.gradient === 'radial') {\n    // SVG radial gradients automatically transform to normalized bbox\n    // coordinates, in a way that is cumbersome to replicate in canvas.\n    // We wrap the radial gradient in a pattern element, allowing us to\n    // maintain a circular gradient that matches what canvas provides.\n    let pt = domChild(el, index++, 'pattern', svgns);\n    setAttributes(pt, {\n      id: patternPrefix + grad.id,\n      viewBox: '0,0,1,1',\n      width: '100%',\n      height: '100%',\n      preserveAspectRatio: 'xMidYMid slice'\n    });\n\n    pt = domChild(pt, 0, 'rect', svgns);\n    setAttributes(pt, {\n      width: 1,\n      height: 1,\n      fill: `url(${href()}#${grad.id})`\n    });\n\n    el = domChild(el, index++, 'radialGradient', svgns);\n    setAttributes(el, {\n      id: grad.id,\n      fx: grad.x1,\n      fy: grad.y1,\n      fr: grad.r1,\n      cx: grad.x2,\n      cy: grad.y2,\n      r: grad.r2\n    });\n  } else {\n    el = domChild(el, index++, 'linearGradient', svgns);\n    setAttributes(el, {\n      id: grad.id,\n      x1: grad.x1,\n      x2: grad.x2,\n      y1: grad.y1,\n      y2: grad.y2\n    });\n  }\n\n  for (i=0, n=grad.stops.length; i<n; ++i) {\n    stop = domChild(el, i, 'stop', svgns);\n    stop.setAttribute('offset', grad.stops[i].offset);\n    stop.setAttribute('stop-color', grad.stops[i].color);\n  }\n  domClear(el, i);\n\n  return index;\n}\n\n// update clipping path definitions\nfunction updateClipping(el, clip, index) {\n  let mask;\n\n  el = domChild(el, index, 'clipPath', svgns);\n  el.setAttribute('id', clip.id);\n\n  if (clip.path) {\n    mask = domChild(el, 0, 'path', svgns);\n    mask.setAttribute('d', clip.path);\n  } else {\n    mask = domChild(el, 0, 'rect', svgns);\n    setAttributes(mask, {x: 0, y: 0, width: clip.width, height: clip.height});\n  }\n  domClear(el, 1);\n\n  return index + 1;\n}\n\n// Recursively process group contents.\nfunction recurse(renderer, el, group, markTypes) {\n  // child 'g' element is second to last among children (path, g, path)\n  // other children here are foreground and background path elements\n  el = el.lastChild.previousSibling;\n  let prev, idx = 0;\n\n  visit(group, item => {\n    prev = renderer.mark(el, item, prev, markTypes);\n    ++idx;\n  });\n\n  // remove any extraneous DOM elements\n  domClear(el, 1 + idx);\n}\n\n// Bind a scenegraph item to an SVG DOM element.\n// Create new SVG elements as needed.\nfunction bind(item, el, sibling, tag, svg) {\n  let node = item._svg, doc;\n\n  // create a new dom node if needed\n  if (!node) {\n    doc = el.ownerDocument;\n    node = domCreate(doc, tag, svgns);\n    item._svg = node;\n\n    if (item.mark) {\n      node.__data__ = item;\n      node.__values__ = {fill: 'default'};\n\n      // if group, create background, content, and foreground elements\n      if (tag === 'g') {\n        const bg = domCreate(doc, 'path', svgns);\n        node.appendChild(bg);\n        bg.__data__ = item;\n\n        const cg = domCreate(doc, 'g', svgns);\n        node.appendChild(cg);\n        cg.__data__ = item;\n\n        const fg = domCreate(doc, 'path', svgns);\n        node.appendChild(fg);\n        fg.__data__ = item;\n        fg.__values__ = {fill: 'default'};\n      }\n    }\n  }\n\n  // (re-)insert if (a) not contained in SVG or (b) sibling order has changed\n  if (node.ownerSVGElement !== svg || siblingCheck(node, sibling)) {\n    el.insertBefore(node, sibling ? sibling.nextSibling : el.firstChild);\n  }\n\n  return node;\n}\n\n// check if two nodes are ordered siblings\nfunction siblingCheck(node, sibling) {\n  return node.parentNode\n    && node.parentNode.childNodes.length > 1\n    && node.previousSibling != sibling; // treat null/undefined the same\n}\n\n// -- Set attributes & styles on SVG elements ---\n\nlet element = null, // temp var for current SVG element\n    values = null;  // temp var for current values hash\n\n// Extra configuration for certain mark types\nconst mark_extras = {\n  group(mdef, el, item) {\n    const fg = element = el.childNodes[2];\n    values = fg.__values__;\n    mdef.foreground(emit, item, this);\n\n    values = el.__values__; // use parent's values hash\n    element = el.childNodes[1];\n    mdef.content(emit, item, this);\n\n    const bg = element = el.childNodes[0];\n    mdef.background(emit, item, this);\n\n    const value = item.mark.interactive === false ? 'none' : null;\n    if (value !== values.events) {\n      setAttribute(fg, 'pointer-events', value);\n      setAttribute(bg, 'pointer-events', value);\n      values.events = value;\n    }\n\n    if (item.strokeForeground && item.stroke) {\n      const fill = item.fill;\n      setAttribute(fg, 'display', null);\n\n      // set style of background\n      this.style(bg, item);\n      setAttribute(bg, 'stroke', null);\n\n      // set style of foreground\n      if (fill) item.fill = null;\n      values = fg.__values__;\n      this.style(fg, item);\n      if (fill) item.fill = fill;\n\n      // leave element null to prevent downstream styling\n      element = null;\n    } else {\n      // ensure foreground is ignored\n      setAttribute(fg, 'display', 'none');\n    }\n  },\n  image(mdef, el, item) {\n    if (item.smooth === false) {\n      setStyle(el, 'image-rendering', 'optimizeSpeed');\n      setStyle(el, 'image-rendering', 'pixelated');\n    } else {\n      setStyle(el, 'image-rendering', null);\n    }\n  },\n  text(mdef, el, item) {\n    const tl = textLines(item);\n    let key, value, doc, lh;\n\n    if (isArray(tl)) {\n      // multi-line text\n      value = tl.map(_ => textValue(item, _));\n      key = value.join('\\n'); // content cache key\n\n      if (key !== values.text) {\n        domClear(el, 0);\n        doc = el.ownerDocument;\n        lh = lineHeight(item);\n        value.forEach((t, i) => {\n          const ts = domCreate(doc, 'tspan', svgns);\n          ts.__data__ = item; // data binding\n          ts.textContent = t;\n          if (i) {\n            ts.setAttribute('x', 0);\n            ts.setAttribute('dy', lh);\n          }\n          el.appendChild(ts);\n        });\n        values.text = key;\n      }\n    } else {\n      // single-line text\n      value = textValue(item, tl);\n      if (value !== values.text) {\n        el.textContent = value;\n        values.text = value;\n      }\n    }\n\n    setAttribute(el, 'font-family', fontFamily(item));\n    setAttribute(el, 'font-size', fontSize(item) + 'px');\n    setAttribute(el, 'font-style', item.fontStyle);\n    setAttribute(el, 'font-variant', item.fontVariant);\n    setAttribute(el, 'font-weight', item.fontWeight);\n  }\n};\n\nfunction emit(name, value, ns) {\n  // early exit if value is unchanged\n  if (value === values[name]) return;\n\n  // use appropriate method given namespace (ns)\n  if (ns) {\n    setAttributeNS(element, name, value, ns);\n  } else {\n    setAttribute(element, name, value);\n  }\n\n  // note current value for future comparison\n  values[name] = value;\n}\n\nfunction setStyle(el, name, value) {\n  if (value !== values[name]) {\n    if (value == null) {\n      el.style.removeProperty(name);\n    } else {\n      el.style.setProperty(name, value + '');\n    }\n    values[name] = value;\n  }\n}\n\nfunction setAttributes(el, attrs) {\n  for (const key in attrs) {\n    setAttribute(el, key, attrs[key]);\n  }\n}\n\nfunction setAttribute(el, name, value) {\n  if (value != null) {\n    // if value is provided, update DOM attribute\n    el.setAttribute(name, value);\n  } else {\n    // else remove DOM attribute\n    el.removeAttribute(name);\n  }\n}\n\nfunction setAttributeNS(el, name, value, ns) {\n  if (value != null) {\n    // if value is provided, update DOM attribute\n    el.setAttributeNS(ns, name, value);\n  } else {\n    // else remove DOM attribute\n    el.removeAttributeNS(ns, name);\n  }\n}\n\nfunction href() {\n  let loc;\n  return typeof window === 'undefined' ? ''\n    : (loc = window.location).hash ? loc.href.slice(0, -loc.hash.length)\n    : loc.href;\n}\n","import Renderer from './Renderer.js';\nimport {gradientRef, isGradient, patternPrefix} from './Gradient.js';\nimport Marks from './marks/index.js';\nimport {ariaItemAttributes, ariaMarkAttributes} from './util/aria.js';\nimport {cssClass} from './util/dom.js';\nimport {markup} from './util/markup.js';\nimport {fontFamily, fontSize, lineHeight, textLines, textValue} from './util/text.js';\nimport {visit} from './util/visit.js';\nimport clip from './util/svg/clip.js';\nimport metadata from './util/svg/metadata.js';\nimport {rootAttributes, stylesAttr, stylesCss} from './util/svg/styles.js';\nimport {extend, isArray} from 'vega-util';\n\nexport default class SVGStringRenderer extends Renderer {\n  constructor(loader) {\n    super(loader);\n    this._text = null;\n    this._defs = {\n      gradient: {},\n      clipping: {}\n    };\n  }\n\n  /**\n   * Returns the rendered SVG text string,\n   * or null if rendering has not yet occurred.\n   */\n  svg() {\n    return this._text;\n  }\n\n  /**\n   * Internal rendering method.\n   * @param {object} scene - The root mark of a scenegraph to render.\n   */\n  _render(scene) {\n    const m = markup();\n\n    // svg tag\n    m.open('svg', extend({}, metadata, {\n      class:   'marks',\n      width:   this._width * this._scale,\n      height:  this._height * this._scale,\n      viewBox: `0 0 ${this._width} ${this._height}`\n    }));\n\n    // background, if defined\n    const bg = this._bgcolor;\n    if (bg && bg !== 'transparent' && bg !== 'none') {\n      m.open('rect', {\n        width:  this._width,\n        height: this._height,\n        fill:   bg\n      }).close();\n    }\n\n    // root content group\n    m.open('g', rootAttributes, {\n      transform: 'translate(' + this._origin + ')'\n    });\n    this.mark(m, scene);\n    m.close(); // </g>\n\n    // defs\n    this.defs(m);\n\n    // get SVG text string\n    this._text = m.close() + '';\n\n    return this;\n  }\n\n  /**\n   * Render a set of mark items.\n   * @param {object} m - The markup context.\n   * @param {object} scene - The mark parent to render.\n   */\n  mark(m, scene) {\n    const mdef = Marks[scene.marktype],\n          tag  = mdef.tag,\n          attrList = [ariaItemAttributes, mdef.attr];\n\n    // render opening group tag\n    m.open('g',\n      {\n        'class': cssClass(scene),\n        'clip-path': scene.clip ? clip(this, scene, scene.group) : null\n      },\n      ariaMarkAttributes(scene),\n      {\n        'pointer-events': tag !== 'g' && scene.interactive === false ? 'none' : null\n      }\n    );\n\n    // render contained elements\n    const process = item => {\n      const href = this.href(item);\n      if (href) m.open('a', href);\n\n      m.open(\n        tag,\n        this.attr(scene, item, attrList, tag !== 'g' ? tag : null)\n      );\n\n      if (tag === 'text') {\n        const tl = textLines(item);\n        if (isArray(tl)) {\n          // multi-line text\n          const attrs = {x: 0, dy: lineHeight(item)};\n          for (let i=0; i<tl.length; ++i) {\n            m.open('tspan', i ? attrs: null)\n              .text(textValue(item, tl[i]))\n              .close();\n          }\n        } else {\n          // single-line text\n          m.text(textValue(item, tl));\n        }\n      } else if (tag === 'g') {\n        const fore = item.strokeForeground,\n              fill = item.fill,\n              stroke = item.stroke;\n\n        if (fore && stroke) {\n          item.stroke = null;\n        }\n\n        m.open(\n          'path',\n          this.attr(scene, item, mdef.background, 'bgrect')\n        ).close();\n\n        // recurse for group content\n        m.open('g', this.attr(scene, item, mdef.content));\n        visit(item, scene => this.mark(m, scene));\n        m.close();\n\n        if (fore && stroke) {\n          if (fill) item.fill = null;\n          item.stroke = stroke;\n\n          m.open(\n            'path',\n            this.attr(scene, item, mdef.foreground, 'bgrect')\n          ).close();\n\n          if (fill) item.fill = fill;\n        } else {\n          m.open(\n            'path',\n            this.attr(scene, item, mdef.foreground, 'bgfore')\n          ).close();\n        }\n      }\n\n      m.close(); // </tag>\n      if (href) m.close(); // </a>\n    };\n\n    if (mdef.nested) {\n      if (scene.items && scene.items.length) process(scene.items[0]);\n    } else {\n      visit(scene, process);\n    }\n\n    // render closing group tag\n    return m.close(); // </g>\n  }\n\n  /**\n   * Get href attributes for a hyperlinked mark item.\n   * @param {Item} item - The mark item.\n   */\n  href(item) {\n    const href = item.href;\n    let attr;\n\n    if (href) {\n      if (attr = this._hrefs && this._hrefs[href]) {\n        return attr;\n      } else {\n        this.sanitizeURL(href).then(attr => {\n          // rewrite to use xlink namespace\n          attr['xlink:href'] = attr.href;\n          attr.href = null;\n          (this._hrefs || (this._hrefs = {}))[href] = attr;\n        });\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Get an object of SVG attributes for a mark item.\n   * @param {object} scene - The mark parent.\n   * @param {Item} item - The mark item.\n   * @param {array|function} attrs - One or more attribute emitters.\n   * @param {string} tag - The tag being rendered.\n   */\n  attr(scene, item, attrs, tag) {\n    const object = {},\n          emit = (name, value, ns, prefixed) => {\n            object[prefixed || name] = value;\n          };\n\n    // apply mark specific attributes\n    if (Array.isArray(attrs)) {\n      attrs.forEach(fn => fn(emit, item, this));\n    } else {\n      attrs(emit, item, this);\n    }\n\n    // apply style attributes\n    if (tag) {\n      style(object, item, scene, tag, this._defs);\n    }\n\n    return object;\n  }\n\n  /**\n   * Render SVG defs, as needed.\n   * Must be called *after* marks have been processed to ensure the\n   * collected state is current and accurate.\n   * @param {object} m - The markup context.\n   */\n  defs(m) {\n    const gradient = this._defs.gradient,\n          clipping = this._defs.clipping,\n          count = Object.keys(gradient).length + Object.keys(clipping).length;\n\n    if (count === 0) return; // nothing to do\n\n    m.open('defs');\n\n    for (const id in gradient) {\n      const def = gradient[id],\n            stops = def.stops;\n\n      if (def.gradient === 'radial') {\n        // SVG radial gradients automatically transform to normalized bbox\n        // coordinates, in a way that is cumbersome to replicate in canvas.\n        // We wrap the radial gradient in a pattern element, allowing us to\n        // maintain a circular gradient that matches what canvas provides.\n\n        m.open('pattern', {\n          id: patternPrefix + id,\n          viewBox: '0,0,1,1',\n          width: '100%',\n          height: '100%',\n          preserveAspectRatio: 'xMidYMid slice'\n        });\n\n        m.open('rect', {\n          width:  '1',\n          height: '1',\n          fill:   'url(#' + id + ')'\n        }).close();\n\n        m.close(); // </pattern>\n\n        m.open('radialGradient', {\n          id: id,\n          fx: def.x1,\n          fy: def.y1,\n          fr: def.r1,\n          cx: def.x2,\n          cy: def.y2,\n          r: def.r2\n        });\n      } else {\n        m.open('linearGradient', {\n          id: id,\n          x1: def.x1,\n          x2: def.x2,\n          y1: def.y1,\n          y2: def.y2\n        });\n      }\n\n      for (let i = 0; i < stops.length; ++i) {\n        m.open('stop', {\n          offset: stops[i].offset,\n          'stop-color': stops[i].color\n        }).close();\n      }\n\n      m.close();\n    }\n\n    for (const id in clipping) {\n      const def = clipping[id];\n\n      m.open('clipPath', {id: id});\n      if (def.path) {\n        m.open('path', {\n          d: def.path\n        }).close();\n      } else {\n        m.open('rect', {\n          x: 0,\n          y: 0,\n          width: def.width,\n          height: def.height\n        }).close();\n      }\n      m.close();\n    }\n\n    m.close();\n  }\n}\n\n// Helper function for attr for style presentation attributes\nfunction style(s, item, scene, tag, defs) {\n  let styleList;\n  if (item == null) return s;\n\n  if (tag === 'bgrect' && scene.interactive === false) {\n    s['pointer-events'] = 'none';\n  }\n\n  if (tag === 'bgfore') {\n    if (scene.interactive === false) {\n      s['pointer-events'] = 'none';\n    }\n    s.display = 'none';\n    if (item.fill !== null) return s;\n  }\n\n  if (tag === 'image' && item.smooth === false) {\n    styleList = [\n      'image-rendering: optimizeSpeed;',\n      'image-rendering: pixelated;'\n    ];\n  }\n\n  if (tag === 'text') {\n    s['font-family'] = fontFamily(item);\n    s['font-size'] = fontSize(item) + 'px';\n    s['font-style'] = item.fontStyle;\n    s['font-variant'] = item.fontVariant;\n    s['font-weight'] = item.fontWeight;\n  }\n\n  for (const prop in stylesAttr) {\n    let value = item[prop];\n    const name = stylesAttr[prop];\n\n    if (value === 'transparent' && (name === 'fill' || name === 'stroke')) {\n      // transparent is not a legal SVG value\n      // we can skip it to rely on default 'none' instead\n    } else if (value != null) {\n      if (isGradient(value)) {\n        value = gradientRef(value, defs.gradient, '');\n      }\n      s[name] = value;\n    }\n  }\n\n  for (const prop in stylesCss) {\n    const value = item[prop];\n    if (value != null) {\n      styleList = styleList || [];\n      styleList.push(`${stylesCss[prop]}: ${value};`);\n    }\n  }\n  if (styleList) {\n    s.style = styleList.join(' ');\n  }\n\n  return s;\n}\n","import Renderer from './Renderer.js';\nimport SVGRenderer from './SVGRenderer.js';\nimport CanvasRenderer from './CanvasRenderer.js';\nimport {domChild} from './util/dom.js';\n\n/**\n * @typedef {Object} HybridRendererOptions\n *\n * @property {string[]} [svgMarkTypes=['text']] - An array of SVG mark types to render\n *                                                in the SVG layer. All other mark types\n *                                                will be rendered in the Canvas layer.\n * @property {boolean} [svgOnTop=true] - Flag to determine if SVG should be rendered on top.\n * @property {boolean} [debug=false] - Flag to enable or disable debugging mode. When true,\n *                                     the top layer will be stacked below the bottom layer\n *                                     rather than overlaid on top.\n */\n\n/** @type {HybridRendererOptions} */\nexport const OPTS = {\n  svgMarkTypes: ['text'],\n  svgOnTop: true,\n  debug: false\n};\n\n/**\n * Configure the HybridRenderer\n *\n * @param {HybridRendererOptions} options - HybridRenderer configuration options.\n */\nexport function setHybridRendererOptions(options) {\n  OPTS['svgMarkTypes'] = options.svgMarkTypes ?? ['text'];\n  OPTS['svgOnTop'] = options.svgOnTop ?? true;\n  OPTS['debug'] = options.debug ?? false;\n}\n\nexport default class HybridRenderer extends Renderer {\n  constructor(loader) {\n    super(loader);\n    this._svgRenderer = new SVGRenderer(loader);\n    this._canvasRenderer = new CanvasRenderer(loader);\n  }\n\n  /**\n   * Initialize a new HybridRenderer instance.\n   * @param {DOMElement} el - The containing DOM element for the display.\n   * @param {number} width - The coordinate width of the display, in pixels.\n   * @param {number} height - The coordinate height of the display, in pixels.\n   * @param {Array<number>} origin - The origin of the display, in pixels.\n   *   The coordinate system will be translated to this point.\n   * @param {number} [scaleFactor=1] - Optional scaleFactor by which to multiply\n   *   the width and height to determine the final pixel size.\n   * @return {HybridRenderer} - This renderer instance.\n   */\n  initialize(el, width, height, origin, scaleFactor) {\n    this._root_el = domChild(el, 0, 'div');\n\n    const bottomEl = domChild(this._root_el, 0, 'div');\n    const topEl = domChild(this._root_el, 1, 'div');\n\n    this._root_el.style.position = 'relative';\n\n    // Set position absolute to overlay svg on top of canvas\n    if (!OPTS.debug) {\n      bottomEl.style.height = '100%';\n      topEl.style.position = 'absolute';\n      topEl.style.top = '0';\n      topEl.style.left = '0';\n      topEl.style.height = '100%';\n      topEl.style.width = '100%';\n    }\n\n    this._svgEl = OPTS.svgOnTop? topEl: bottomEl;\n    this._canvasEl = OPTS.svgOnTop? bottomEl: topEl;\n\n    // pointer-events to none on SVG layer so that canvas gets all events\n    this._svgEl.style.pointerEvents = 'none';\n\n    this._canvasRenderer.initialize(this._canvasEl, width, height, origin, scaleFactor);\n    this._svgRenderer.initialize(this._svgEl, width, height, origin, scaleFactor);\n    return super.initialize(el, width, height, origin, scaleFactor);\n  }\n\n  /**\n   * Flag a mark item as dirty.\n   * @param {Item} item - The mark item.\n   */\n  dirty(item) {\n    if (OPTS.svgMarkTypes.includes(item.mark.marktype)) {\n      this._svgRenderer.dirty(item);\n    } else {\n      this._canvasRenderer.dirty(item);\n    }\n    return this;\n  }\n\n  /**\n   * Internal rendering method.\n   * @param {object} scene - The root mark of a scenegraph to render.\n   * @param {Array} markTypes - Array of the mark types to render.\n   *                            If undefined, render all mark types\n   */\n  _render(scene, markTypes) {\n    const allMarkTypes = markTypes ?? [\n      'arc', 'area', 'image', 'line', 'path', 'rect', 'rule', 'shape', 'symbol', 'text', 'trail'\n    ];\n    const canvasMarkTypes = allMarkTypes.filter((m) => !OPTS.svgMarkTypes.includes(m));\n    this._svgRenderer.render(scene, OPTS.svgMarkTypes);\n    this._canvasRenderer.render(scene, canvasMarkTypes);\n  }\n\n  /**\n   * Resize the display.\n   * @param {number} width - The new coordinate width of the display, in pixels.\n   * @param {number} height - The new coordinate height of the display, in pixels.\n   * @param {Array<number>} origin - The new origin of the display, in pixels.\n   *   The coordinate system will be translated to this point.\n   * @param {number} [scaleFactor=1] - Optional scaleFactor by which to multiply\n   *   the width and height to determine the final pixel size.\n   * @return {SVGRenderer} - This renderer instance;\n   */\n  resize(width, height, origin, scaleFactor) {\n    super.resize(width, height, origin, scaleFactor);\n    this._svgRenderer.resize(width, height, origin, scaleFactor);\n    this._canvasRenderer.resize(width, height, origin, scaleFactor);\n    return this;\n  }\n\n  background(bgcolor) {\n    // Propagate background color to lower canvas renderer\n    if (OPTS.svgOnTop) {\n      this._canvasRenderer.background(bgcolor);\n    } else {\n      this._svgRenderer.background(bgcolor);\n    }\n    return this;\n  }\n}\n","import CanvasHandler from './CanvasHandler.js';\nimport {OPTS} from './HybridRenderer.js';\nimport {domChild} from './util/dom.js';\n\nexport default class HybridHandler extends CanvasHandler {\n  constructor (loader, tooltip) {\n    super(loader, tooltip);\n  }\n\n  initialize(el, origin, obj) {\n    const canvas = domChild(domChild(el, 0, 'div'), OPTS.svgOnTop? 0: 1, 'div');\n    return super.initialize(canvas, origin, obj);\n  }\n}\n","import CanvasHandler from './CanvasHandler.js';\nimport CanvasRenderer from './CanvasRenderer.js';\nimport SVGHandler from './SVGHandler.js';\nimport SVGRenderer from './SVGRenderer.js';\nimport SVGStringRenderer from './SVGStringRenderer.js';\nimport HybridRenderer from './HybridRenderer.js';\nimport HybridHandler from './HybridHandler.js';\n\nconst Canvas = 'canvas';\nconst Hybrid = 'hybrid';\nconst PNG = 'png';\nconst SVG = 'svg';\nconst None = 'none';\n\nexport const RenderType = {\n  Canvas: Canvas,\n  PNG:    PNG,\n  SVG:    SVG,\n  Hybrid: Hybrid,\n  None:   None\n};\n\nconst modules = {};\n\nmodules[Canvas] = modules[PNG] = {\n  renderer: CanvasRenderer,\n  headless: CanvasRenderer,\n  handler:  CanvasHandler\n};\n\nmodules[SVG] = {\n  renderer: SVGRenderer,\n  headless: SVGStringRenderer,\n  handler:  SVGHandler\n};\n\nmodules[Hybrid] = {\n  renderer: HybridRenderer,\n  headless: HybridRenderer,\n  handler:  HybridHandler\n};\n\nmodules[None] = {};\n\nexport function renderModule(name, _) {\n  name = String(name || '').toLowerCase();\n  if (arguments.length > 1) {\n    modules[name] = _;\n    return this;\n  } else {\n    return modules[name];\n  }\n}\n","import Marks from './marks/index.js';\nimport {error} from 'vega-util';\nimport Bounds from './Bounds.js';\n\nexport function intersect(scene, bounds, filter) {\n  const hits = [], // intersection results\n        box = new Bounds().union(bounds), // defensive copy\n        type = scene.marktype;\n\n  return type ? intersectMark(scene, box, filter, hits)\n    : type === 'group' ? intersectGroup(scene, box, filter, hits)\n    : error('Intersect scene must be mark node or group item.');\n}\n\nfunction intersectMark(mark, box, filter, hits) {\n  if (visitMark(mark, box, filter)) {\n    const items = mark.items,\n          type = mark.marktype,\n          n = items.length;\n\n    let i = 0;\n\n    if (type === 'group') {\n      for (; i<n; ++i) {\n        intersectGroup(items[i], box, filter, hits);\n      }\n    } else {\n      for (const test = Marks[type].isect; i<n; ++i) {\n        const item = items[i];\n        if (intersectItem(item, box, test)) hits.push(item);\n      }\n    }\n  }\n  return hits;\n}\n\nfunction visitMark(mark, box, filter) {\n  // process if bounds intersect and if\n  // (1) mark is a group mark (so we must recurse), or\n  // (2) mark is interactive and passes filter\n  return mark.bounds && box.intersects(mark.bounds) && (\n    mark.marktype === 'group' ||\n    mark.interactive !== false && (!filter || filter(mark))\n  );\n}\n\nfunction intersectGroup(group, box, filter, hits) {\n  // test intersect against group\n  // skip groups by default unless filter says otherwise\n  if ((filter && filter(group.mark)) &&\n      intersectItem(group, box, Marks.group.isect)) {\n    hits.push(group);\n  }\n\n  // recursively test children marks\n  // translate box to group coordinate space\n  const marks = group.items,\n        n = marks && marks.length;\n\n  if (n) {\n    const x = group.x || 0,\n          y = group.y || 0;\n    box.translate(-x, -y);\n    for (let i=0; i<n; ++i) {\n      intersectMark(marks[i], box, filter, hits);\n    }\n    box.translate(x, y);\n  }\n\n  return hits;\n}\n\nfunction intersectItem(item, box, test) {\n  // test bounds enclosure, bounds intersection, then detailed test\n  const bounds = item.bounds;\n  return box.encloses(bounds) || (box.intersects(bounds) && test(item, box));\n}\n","import Bounds from '../Bounds.js';\nimport boundContext from './boundContext.js';\nimport {isFunction} from 'vega-util';\n\nconst clipBounds = new Bounds();\n\nexport default function(mark) {\n  const clip = mark.clip;\n\n  if (isFunction(clip)) {\n    clip(boundContext(clipBounds.clear()));\n  } else if (clip) {\n    clipBounds.set(0, 0, mark.group.width, mark.group.height);\n  } else return;\n\n  mark.bounds.intersect(clipBounds);\n}\n","import pathParse from '../path/parse.js';\nimport {isNumber, isObject} from 'vega-util';\n\nconst TOLERANCE = 1e-9;\n\nexport function sceneEqual(a, b, key) {\n  return (a === b) ? true\n    : (key === 'path') ? pathEqual(a, b)\n    : (a instanceof Date && b instanceof Date) ? +a === +b\n    : (isNumber(a) && isNumber(b)) ? Math.abs(a - b) <= TOLERANCE\n    : (!a || !b || !isObject(a) && !isObject(b)) ? a == b\n    : objectEqual(a, b);\n}\n\nexport function pathEqual(a, b) {\n  return sceneEqual(pathParse(a), pathParse(b));\n}\n\nfunction objectEqual(a, b) {\n  var ka = Object.keys(a),\n      kb = Object.keys(b),\n      key, i;\n\n  if (ka.length !== kb.length) return false;\n\n  ka.sort();\n  kb.sort();\n\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i]) return false;\n  }\n\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!sceneEqual(a[key], b[key], key)) return false;\n  }\n\n  return typeof a === typeof b;\n}\n","import {resetSVGGradientId} from './src/Gradient.js';\nimport {resetSVGClipId} from './src/util/svg/clip.js';\n\nexport {default as Bounds} from './src/Bounds.js';\nexport {default as Gradient} from './src/Gradient.js';\nexport {default as GroupItem} from './src/GroupItem.js';\nexport {default as ResourceLoader} from './src/ResourceLoader.js';\nexport {default as Item} from './src/Item.js';\nexport {default as Scenegraph} from './src/Scenegraph.js';\n\nexport {default as Handler} from './src/Handler.js';\nexport {default as Renderer} from './src/Renderer.js';\nexport {default as CanvasHandler} from './src/CanvasHandler.js';\nexport {default as CanvasRenderer} from './src/CanvasRenderer.js';\nexport {default as SVGHandler} from './src/SVGHandler.js';\nexport {default as SVGRenderer} from './src/SVGRenderer.js';\nexport {default as SVGStringRenderer} from './src/SVGStringRenderer.js';\nexport {default as HybridRenderer, setHybridRendererOptions} from './src/HybridRenderer.js';\nexport {default as HybridHandler} from './src/HybridHandler.js';\nexport {RenderType, renderModule} from './src/modules.js';\nexport {intersect} from './src/intersect.js';\n\nexport {default as Marks} from './src/marks/index.js';\n\nexport {default as boundClip} from './src/bound/boundClip.js';\nexport {default as boundContext} from './src/bound/boundContext.js';\nexport {default as boundStroke} from './src/bound/boundStroke.js';\nexport {default as boundItem} from './src/bound/boundItem.js';\nexport {default as boundMark} from './src/bound/boundMark.js';\n\nexport {default as pathCurves} from './src/path/curves.js';\nexport {default as pathSymbols} from './src/path/symbols.js';\nexport {default as pathRectangle} from './src/path/rectangle.js';\nexport {default as pathTrail} from './src/path/trail.js';\nexport {default as pathParse} from './src/path/parse.js';\nexport {default as pathRender} from './src/path/render.js';\n\nexport {default as point} from './src/util/point.js';\nexport {domCreate, domFind, domChild, domClear} from './src/util/dom.js';\nexport {markup, serializeXML} from './src/util/markup.js';\nexport {\n  font,\n  fontFamily,\n  fontSize,\n  lineHeight,\n  multiLineOffset,\n  textMetrics\n} from './src/util/text.js';\n\nexport {sceneEqual, pathEqual} from './src/util/equal.js';\nexport {sceneToJSON, sceneFromJSON} from './src/util/serialize.js';\nexport {\n  intersectPath,\n  intersectPoint,\n  intersectRule,\n  intersectBoxLine\n} from './src/util/intersect.js';\nexport {\n  zorder as sceneZOrder,\n  visit as sceneVisit,\n  pickVisit as scenePickVisit\n} from './src/util/visit.js';\n\n// for testing purposes\nexport {path} from 'd3-path';\n\nexport function resetSVGDefIds() {\n  resetSVGClipId();\n  resetSVGGradientId();\n}\n"],"names":["gradient_id","resetSVGGradientId","patternPrefix","isGradient","value","gradient","gradientRef","g","defs","base","type","id","prefix","x1","get","y1","r1","x2","y2","r2","val","def","p0","p1","stops","stop","offset","color","push","lookup","curve","curveBasis","curveBasisClosed","curveBasisOpen","curveBundle","tension","curveCardinal","curveCardinalOpen","curveCardinalClosed","curveCatmullRom","curveCatmullRomClosed","curveCatmullRomOpen","curveLinear","curveLinearClosed","horizontal","curveMonotoneY","vertical","curveMonotoneX","curveNatural","curveStep","curveStepAfter","curveStepBefore","curves","orientation","entry","hasOwnProperty","paramCounts","m","l","h","v","z","c","s","q","t","a","commandPattern","numberPattern","spacePattern","flagPattern","parse","path","commands","matches","match","forEach","str","cmd","toLowerCase","paramCount","params","parseParams","slice","trim","count","length","Error","i","segment","index","pattern","ws","DegToRad","Math","PI","Epsilon","HalfPi","Tau","HalfSqrt3","sqrt","segmentCache","bezierCache","join","segments","x","y","rx","ry","large","sweep","rotateX","ox","oy","key","call","arguments","th","sin_th","sin","cos_th","cos","abs","px","py","pl","a00","a01","a10","a11","x0","y0","d","sfactor_sq","sfactor","xc","yc","th0","atan2","th1","th_arc","segs","ceil","result","th2","th3","bezier","cx","cy","cos_th0","sin_th0","cos_th1","sin_th1","th_half","sin_th_h2","x3","y3","temp","scale","current","sX","sY","n","context","previous","controlX","controlY","tempX","tempY","tempControlX","tempControlY","anchorX","anchorY","beginPath","len","lineTo","moveTo","bezierCurveTo","quadraticCurveTo","drawArc","closePath","coords","seg","bez","Tan30","builtins","draw","size","r","arc","w","rect","o","b","symbols","_","customSymbol","custom","parsed","pathParse","pathRender","C","rectangleX","rectangleY","rectangleWidth","width","rectangleHeight","height","number","clamp","min","max","crTL","crTR","crBL","crBR","rectangle","buffer","tl","tr","bl","br","cornerRadius","defined","ready","point","w2","ux","uy","ud","hypot","trail","data","defined0","item","xw","yh","sa","startAngle","ea","endAngle","pa","padAngle","ir","innerRadius","or","outerRadius","cr","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomRight","cornerRadiusBottomLeft","sz","ts","shape","arcShape","d3_arc","areavShape","d3_area","areahShape","lineShape","d3_line","rectShape","vg_rect","symbolShape","d3_symbol","trailShape","vg_trail","hasCornerRadius","area","items","interp","interpolate","orient","line","mark","symbol","clip_id","resetSVGClipId","renderer","clip","_defs","clipping","isFunction","Bounds","clear","union","prototype","clone","Number","MAX_VALUE","empty","equals","set","add","expand","round","floor","translate","dx","dy","rotate","angle","p","rotatedPoints","intersect","encloses","alignsWith","intersects","contains","Item","bounds","GroupItem","inherits","ResourceLoader","constructor","customLoader","_pending","_loader","loader","pending","sanitizeURL","uri","increment","sanitize","then","opt","decrement","catch","loadImage","Image","image","url","href","img","cors","crossOrigin","onload","onerror","src","e","complete","Promise","accept","poll","setTimeout","miter","stroke","opacity","strokeOpacity","sw","strokeWidth","miterAdjustment","strokeJoin","circleThreshold","lx","ly","rot","ma","mb","mc","md","addL","addX","addY","addp","addpL","deg","px1","py1","px2","py2","quadExtrema","px3","py3","cubicExtrema","ccw","update","cb","t0","t1","cubic","s2","t2","canvas","getContext","intersectPath","brush","isPointInPath","intersectPoint","box","intersectRect","intersectRule","intersectBoxLine","u","globalCompositeOperation","blend","dflt","addStops","addColorStop","spec","createRadialGradient","createLinearGradient","ictx","fillStyle","fillRect","createPattern","fillOpacity","globalAlpha","fill","Empty","lw","strokeStyle","lineWidth","lineCap","strokeCap","lineJoin","miterLimit","strokeMiterLimit","setLineDash","strokeDash","lineDashOffset","strokeDashOffset","compare","zindex","zorder","scene","zdirty","zitems","output","sort","visit","visitor","pickVisit","hit","drawAll","drawPath","drawOne","pick","test","truthy","gx","gy","pixelRatio","hitPath","filled","Array","isArray","isPointInStroke","lc","pickPath","scaleX","scaleY","translateItem","rotateItem","transformItem","isect","attr","emit","bound","boundStroke","tag","nested","markItemPath","pickArea","Infinity","pickLine","pow","dd","pickTrail","tip","markMultiItemPath","save","clipGroup","group","strokeOffset","emitRectangle","off","background","foreground","strokeForeground","content","j","noBound","rectanglePath","hitBackground","hitForeground","hitCorner","markTypes","fore","marktype","includes","restore","dw","dh","ix","interactive","pickMark","getImage","imageWidth","aspect","imageHeight","imageXOffset","align","imageYOffset","baseline","toDataURL","metadata","ar0","ar1","imageSmoothingEnabled","smooth","drawImage","xOffset","yOffset","sx","sy","cache","pathCache","widthCache","lruCache","textMetrics","fontSize","measureWidth","estimateWidth","useCanvas","use","text","_estimateWidth","textValue","currentFontHeight","_measureWidth","font","currentFont","undefined","measureText","lineHeight","lineArray","textLines","lineBreak","split","multiLineOffset","limit","truncate","widthGetter","ellipsis","rtl","dir","lo","hi","mid","fontFamily","quote","String","replace","fontStyle","fontVariant","fontWeight","textAlign","tempBounds","anchorPoint","radius","theta","mode","reduce","lh","fillText","strokeText","ax","ay","intersectText","rule","func","marks","DUMMY","hasItems","boundItem","keys","sceneToJSON","indent","JSON","stringify","sceneFromJSON","json","initialize","parent","boundMark","Scenegraph","root","createMark","name","role","toJSON","markdef","aria","description","domCreate","doc","ns","document","createElement","createElementNS","domFind","el","nodes","childNodes","tagName","domChild","ownerDocument","insertBefore","domClear","curr","removeChild","cssClass","event","getBoundingClientRect","clientX","left","clientLeft","clientY","top","clientTop","origin","mdef","Handler","customTooltip","_active","_handlers","_tooltip","defaultTooltip","obj","_el","_obj","element","firstChild","_origin","_scene","on","_handlerIndex","handler","handlers","eventName","k","indexOf","handleHref","MouseEvent","setAttribute","dispatchEvent","handleTooltip","show","tooltip","resolveItem","getItemBoundingClientRect","right","bottom","Renderer","_bgcolor","scaleFactor","resize","bgcolor","_width","_height","_scale","dirty","render","_call","_render","renderAsync","_ready","resolve","_load","method","redraw","KeyDownEvent","KeyPressEvent","KeyUpEvent","DragEnterEvent","DragLeaveEvent","DragOverEvent","PointerDownEvent","PointerUpEvent","PointerMoveEvent","PointerOutEvent","PointerOverEvent","MouseDownEvent","MouseUpEvent","MouseMoveEvent","MouseOutEvent","MouseOverEvent","ClickEvent","DoubleClickEvent","WheelEvent","MouseWheelEvent","TouchStartEvent","TouchMoveEvent","TouchEndEvent","Events","TooltipShowEvent","TooltipHideEvent","HrefEvent","CanvasHandler","_down","_touch","_first","_events","events","pointermove","move","dragover","pointerout","inactive","dragleave","_canvas","eventListenerCheck","DOMMouseScroll","evt","fire","pointerdown","mousedown","click","touchstart","pickEvent","changedTouches","touchmove","touchend","touch","vegaType","splice","Marks","eventBundle","addEventListener","fireAll","types","moveEvents","overEvents","outEvents","exit","devicePixelRatio","window","inDOM","HTMLElement","parentNode","ratio","style","setTransform","CanvasRenderer","_options","_redraw","_dirty","_tempb","options","externalContext","appendChild","ctx","error","db","vb","viewBounds","clipToBounds","clearRect","SVGHandler","_hrefHandler","listener","_tooltipHandler","svg","_svg","removeEventListener","target","__data__","ARIA_HIDDEN","ARIA_LABEL","ARIA_ROLE","ARIA_ROLEDESCRIPTION","GRAPHICS_OBJECT","GRAPHICS_SYMBOL","bundle","roledesc","label","AriaIgnore","toSet","AriaGuides","desc","caption","axisCaption","legendCaption","titleCaption","AriaEncode","ariaRole","ariaRoleDescription","ariaItemAttributes","hide","prop","ariaMarkAttributes","ariaGuide","ariaMark","recurse","some","err","array","datum","title","extractTitle","scales","locale","dataflow","xy","isDiscrete","domainCaption","props","Object","capitalize","channelCaption","peek","map","toUpperCase","innerText","attrText","markup","buf","outer","inner","stack","open","attrs","close","pop","toString","serializeXML","node","_serialize","hasAttributes","attributes","hasChildNodes","children","child","nodeType","nodeValue","stylesAttr","stylesCss","rootAttributes","RootIndex","xmlns","svgns","SVGRenderer","_dirtyID","_root","_clearDefs","setAttributeNS","setAttributes","setProperty","viewBox","bg","removeAttribute","_dirtyCheck","_dirtyAll","isDirty","ownerSVGElement","dirtyParents","_update","prev","markType","isGroup","bind","sibling","process","values","__values__","extra","mark_extras","setStyle","updateGradient","updateClipping","grad","pt","preserveAspectRatio","fx","fy","fr","mask","lastChild","previousSibling","idx","cg","fg","siblingCheck","nextSibling","textContent","removeProperty","removeAttributeNS","loc","location","hash","SVGStringRenderer","_text","extend","class","transform","attrList","_hrefs","object","prefixed","fn","styleList","display","OPTS","svgMarkTypes","svgOnTop","debug","setHybridRendererOptions","HybridRenderer","_svgRenderer","_canvasRenderer","_root_el","bottomEl","topEl","position","_svgEl","_canvasEl","pointerEvents","allMarkTypes","canvasMarkTypes","filter","HybridHandler","Canvas","Hybrid","PNG","SVG","None","RenderType","modules","headless","renderModule","hits","intersectMark","intersectGroup","visitMark","intersectItem","clipBounds","boundContext","TOLERANCE","sceneEqual","pathEqual","Date","isNumber","isObject","objectEqual","ka","kb","resetSVGDefIds"],"mappings":"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","debugId":null}}]
}